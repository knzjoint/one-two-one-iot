(function(e){function t(t){for(var o,a,c=t[0],l=t[1],u=t[2],s=0,d=[];s<c.length;s++)a=c[s],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},a={app:0},r={app:0},i=[];function c(e){return l.p+"static/js/"+({}[e]||e)+"."+{"chunk-00a8a87c":"74c43a8c","chunk-1a7fbbd8":"77b1e7eb","chunk-2d0aeaf9":"569e0fb1","chunk-34da5851":"b20b1bae","chunk-7cf8b14a":"bb364e06","chunk-7e0ee0a5":"b57da156","chunk-74fe97ba":"319e011e","chunk-835ac8aa":"3a650676","chunk-3021e870":"2fab3e4a","chunk-2d22d7e7":"397b1fae","chunk-46e8fdcc":"c4c26364","chunk-45bc44ea":"0f5dd4c6","chunk-f7e09ca2":"4cb04266","chunk-9448271a":"bce00837","chunk-a6a84d0e":"fb4416dd","chunk-a7cd5462":"0b130197","chunk-ea38f850":"622cfedf","chunk-f3db5bf8":"b3122f6f"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-00a8a87c":1,"chunk-34da5851":1,"chunk-7cf8b14a":1,"chunk-835ac8aa":1,"chunk-3021e870":1,"chunk-46e8fdcc":1,"chunk-f7e09ca2":1,"chunk-a6a84d0e":1,"chunk-a7cd5462":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="static/css/"+({}[e]||e)+"."+{"chunk-00a8a87c":"bcdfd393","chunk-1a7fbbd8":"31d6cfe0","chunk-2d0aeaf9":"31d6cfe0","chunk-34da5851":"dbd4f3d0","chunk-7cf8b14a":"fc0a2dbb","chunk-7e0ee0a5":"31d6cfe0","chunk-74fe97ba":"31d6cfe0","chunk-835ac8aa":"bde0d521","chunk-3021e870":"ee646ae3","chunk-2d22d7e7":"31d6cfe0","chunk-46e8fdcc":"8fe1990e","chunk-45bc44ea":"31d6cfe0","chunk-f7e09ca2":"9d8d36bf","chunk-9448271a":"31d6cfe0","chunk-a6a84d0e":"3a448480","chunk-a7cd5462":"029f48a3","chunk-ea38f850":"31d6cfe0","chunk-f3db5bf8":"31d6cfe0"}[e]+".css",r=l.p+o,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],s=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(s===o||s===r))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],s=u.getAttribute("data-href");if(s===o||s===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){a[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,n){o=r[e]=[t,n]}));t.push(o[2]=i);var u,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=c(e);var d=new Error;u=function(t){s.onerror=s.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",d.name="ChunkLoadError",d.type=o,d.request=a,n[1](d)}r[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:s})}),12e4);s.onerror=s.onload=u,document.head.appendChild(s)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=s;i.push([0,"vue-admin-beautiful-libs"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0385":function(e,t,n){},"04eb":function(e,t,n){},"05aa":function(e,t,n){"use strict";n.r(t);var o=n("434f");function a(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("a-input"),l=Object(o["resolveComponent"])("a-form-item"),u=Object(o["resolveComponent"])("a-select-option"),s=Object(o["resolveComponent"])("a-select"),d=Object(o["resolveComponent"])("a-input-number"),f=Object(o["resolveComponent"])("a-switch"),m=Object(o["resolveComponent"])("a-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(m,{rules:r.rules,ref:"dataForm",model:r.tempItem,"label-col":{span:6},"wrapper-col":{span:14}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称",name:"stepName"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{size:"small",value:r.tempItem.stepName,"onUpdate:value":t[0]||(t[0]=function(e){return r.tempItem.stepName=e}),style:{width:"200px"}},null,8,["value"])]})),_:1}),Object(o["createVNode"])(l,{label:"判断类型",name:"relationalOperator"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{value:r.tempItem.conditionType,"onUpdate:value":t[1]||(t[1]=function(e){return r.tempItem.conditionType=e})},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.relationalOperatorSelect,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{value:e.value,key:t},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1}),Object(o["createVNode"])(l,{label:"值类型"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{value:r.tempItem.type,"onUpdate:value":t[2]||(t[2]=function(e){return r.tempItem.type=e}),disabled:""},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.dataTypeSelect,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{value:e.value,key:t},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1}),Object(o["createVNode"])(l,{label:"值控制描述"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(n.itemData.things_desc),1)]})),_:1}),"INT"===r.tempItem.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,label:"值",name:"value"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:r.tempItem.value,"onUpdate:value":t[3]||(t[3]=function(e){return r.tempItem.value=e}),min:1,max:100},null,8,["value"])]})),_:1})):"DECIMAL"===r.tempItem.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,label:"值",name:"value"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:r.tempItem.value,"onUpdate:value":t[4]||(t[4]=function(e){return r.tempItem.value=e}),min:0,max:100,step:.1},null,8,["value","step"])]})),_:1})):"STRING"===r.tempItem.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:2,label:"值",name:"value"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{size:"small",value:r.tempItem.value,"onUpdate:value":t[5]||(t[5]=function(e){return r.tempItem.value=e}),style:{width:"200px"}},null,8,["value"])]})),_:1})):"BOOL"===r.tempItem.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:3,label:"值",name:"value"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{"checked-children":"开","un-checked-children":"关",checked:r.tempItem.value,"onUpdate:checked":t[6]||(t[6]=function(e){return r.tempItem.value=e})},null,8,["checked"])]})),_:1})):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["rules","model"])])}var r=n("291b"),i=(n("e186"),n("0211"),n("7e5a"),n("cb0b"),n("998e"),n("761a")),c=[{value:"EQ",label:"相等"},{value:"NE",label:"不相等"},{value:"LT",label:"小于"},{value:"GT",label:"大于"},{value:"LE",label:"小于或等于"},{value:"GE",label:"大于或等于"}],l=[{value:"INT",label:"整数"},{value:"DECIMAL",label:"浮点"},{value:"STRING",label:"字符"},{value:"BOOL",label:"布尔"},{value:"JSON",label:"JSON"}];var u={name:"nodeNodeForm",props:{editItem:{type:Object},itemData:{type:Object}},data:function(){return{tempItem:{stepName:"节点",type:"INT",value:"100",conditionType:""},rules:{stepName:[{required:!0,trigger:"blur",message:"请填写名称"}]},relationalOperatorSelect:c,dataTypeSelect:l}},created:function(){this.editItem&&this.editItem.stepName&&(this.tempItem=Object(i["clone"])(this.editItem)),this.itemData&&this.itemData.name&&(this.tempItem.stepName=this.itemData.name,this.tempItem.type=this.itemData.thingsType)},methods:{validateFormData:function(){return new Promise((function(e,t){e()}))},validateDeviceName:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=/^[a-zA-Z][a-zA-Z0-9_]{6,15}$/,n.test(t)){e.next=3;break}return e.abrupt("return",Promise.reject("以字母开头，6到16位（字母，数字，下划线，减号, $）"));case 3:return e.abrupt("return",Promise.resolve());case 4:case"end":return e.stop()}}),e)})))()},formData:function(){var e=Object(i["clone"])(this.tempItem);return e}}},s=n("b3f2"),d=n.n(s);const f=d()(u,[["render",a]]);t["default"]=f},"0781":function(e,t,n){"use strict";n.r(t);var o=n("f121"),a=n.n(o),r=n("61f7"),i=a.a.logo,c=a.a.title,l=a.a.layout,u=a.a.header,s=a.a.themeName,d=a.a.i18n,f=a.a.showLanguage,m=a.a.showProgressBar,p=a.a.showRefresh,h=a.a.showSearch,b=a.a.showTheme,g=a.a.showTagsBar,v=a.a.showNotice,w=a.a.showFullScreen,O=a.a.cachedViews,j=function(e){var t=localStorage.getItem(e);return!!Object(r["isJson"])(t)&&JSON.parse(t)},y=j("vue-admin-beautiful-pro-theme"),C=j("vue-admin-beautiful-pro-collapse"),x=C.collapse,N=j("vue-admin-beautiful-pro-language"),k=N.language,I=function(e){return"undefined"!==typeof y[e]?y[e]:e},S=function(){return{logo:i,title:c,collapse:x,cachedViews:O,themeName:y.themeName||s,layout:y.layout||l,header:y.header||u,device:"desktop",language:k||d,showLanguage:I(f),showProgressBar:I(m),showRefresh:I(p),showSearch:I(h),showTheme:I(b),showTagsBar:I(g),showNotice:I(v),showFullScreen:I(w)}},T={collapse:function(e){return e.collapse},device:function(e){return e.device},header:function(e){return e.header},language:function(e){return e.language},layout:function(e){return e.layout},logo:function(e){return e.logo},title:function(e){return e.title},cachedViews:function(e){return e.cachedViews},showLanguage:function(e){return e.showLanguage},showProgressBar:function(e){return e.showProgressBar},showRefresh:function(e){return e.showRefresh},showSearch:function(e){return e.showSearch},showTheme:function(e){return e.showTheme},showTagsBar:function(e){return e.showTagsBar},showNotice:function(e){return e.showNotice},showFullScreen:function(e){return e.showFullScreen},themeName:function(e){return e.themeName}},F={toggleCollapse:function(e){e.collapse=!e.collapse,localStorage.setItem("vue-admin-beautiful-pro-collapse",'{"collapse":'.concat(e.collapse,"}"))},toggleDevice:function(e,t){e.device=t},changeHeader:function(e,t){e.header=t},changeLayout:function(e,t){e.layout=t},handleShowLanguage:function(e,t){e.showLanguage=t},handleShowProgressBar:function(e,t){e.showProgressBar=t},handleShowRefresh:function(e,t){e.showRefresh=t},handleShowSearch:function(e,t){e.showSearch=t},handleShowTheme:function(e,t){e.showTheme=t},handleShowTagsBar:function(e,t){e.showTagsBar=t},handleShowNotice:function(e,t){e.showNotice=t},handleShowFullScreen:function(e,t){e.showFullScreen=t},openSideBar:function(e){e.collapse=!1},foldSideBar:function(e){e.collapse=!0},changeLanguage:function(e,t){localStorage.setItem("vue-admin-beautiful-pro-language",'{"language":"'.concat(t,'"}')),e.language=t}},L={toggleCollapse:function(e){var t=e.commit;t("toggleCollapse")},toggleDevice:function(e,t){var n=e.commit;n("toggleDevice",t)},changeHeader:function(e,t){var n=e.commit;n("changeHeader",t)},changeLayout:function(e,t){var n=e.commit;n("changeLayout",t)},handleShowLanguage:function(e,t){var n=e.commit;n("handleShowLanguage",t)},handleShowProgressBar:function(e,t){var n=e.commit;n("handleShowProgressBar",t)},handleShowRefresh:function(e,t){var n=e.commit;n("handleShowRefresh",t)},handleShowSearch:function(e,t){var n=e.commit;n("handleShowSearch",t)},handleShowTheme:function(e,t){var n=e.commit;n("handleShowTheme",t)},handleShowTagsBar:function(e,t){var n=e.commit;n("handleShowTagsBar",t)},handleShowNotice:function(e,t){var n=e.commit;n("handleShowNotice",t)},handleShowFullScreen:function(e,t){var n=e.commit;n("handleShowFullScreen",t)},openSideBar:function(e){var t=e.commit;t("openSideBar")},foldSideBar:function(e){var t=e.commit;t("foldSideBar")},changeLanguage:function(e,t){var n=e.commit;n("changeLanguage",t)}};t["default"]={state:S,getters:T,mutations:F,actions:L}},"07c5":function(e,t,n){"use strict";(function(e){var o=n("1938"),a=(n("457d"),n("b2df"),n("7e5a"),n("d994"),n("097a"),n("4fe0"),n("9787"),n("373e"),n("434f")),r=n("1729");function i(){return"undefined"!==typeof window?window.console:e.console}var c=i();function l(e,t,n){return void 0==n||(e=null==e?{}:e,e[t]=n),e}function u(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function s(e,t,n){var o=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,o)}function d(e,t){return e.indexOf(t)}function f(e,t,n){if(!e)return[];var a=e.map((function(e){return e.elm})),r=Object(o["a"])(t).map((function(e){return a.indexOf(e)}));return n?r.filter((function(e){return-1!==e})):r}function m(e,t){var n=this;this.$nextTick((function(){return n.$emit(e.toLowerCase(),t)}))}function p(e){var t=this;return function(n){null!==t.realList&&t["onDrag"+e](n),m.call(t,e,n)}}function h(e){if(!e)return!1;var t=e.pull;return"function"===typeof t?"clone"===t():"clone"===t}var b=["Start","Add","Remove","Update","End"],g=["Choose","Sort","Filter","Clone"],v=["Move"].concat(b,g).map((function(e){return"on"+e})),w=null,O={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}};t["a"]={name:"draggable",inheritAttrs:!0,props:O,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1,isCloning:!1}},render:function(){var e=[];if("function"===typeof this.$slots.default&&(e=this.$slots.default()),e&&1===e.length){var t=e[0];t.componentOptions&&["transition-group","TransitionGroup"].includes(t.componentOptions.tag)&&(this.transitionMode=!0)}var n=0,r=e,i=this.$slots,c=i.header,u=i.footer;c&&(n=c.length,r=r?[].concat(Object(o["a"])(c),Object(o["a"])(r)):Object(o["a"])(c)),u&&(r=r?[].concat(Object(o["a"])(r),Object(o["a"])(u)):Object(o["a"])(u)),this.headerOffset=n;var s=null,d=function(e,t){s=l(s,e,t)};if(this.componentData){var f=this.componentData,m=f.on,p=f.props;d("on",m),d("props",p)}return d("ref","draggable"),d("ref","draggable"),Object(a["h"])(this.getTag(),s,r)},created:function(){null!==this.list&&null!==this.value&&c.error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&c.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&c.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var t={};b.forEach((function(n){t["on"+n]=p.call(e,n)})),g.forEach((function(n){t["on"+n]=m.bind(e,n)}));var n=Object.assign({},this.options,this.$attrs,t,{onMove:function(t,n){return e.onDragMove(t,n)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new r(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){this.updateOptions(e)},deep:!0},$attrs:{handler:function(e){this.updateOptions(e)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getTag:function(){return this.tag||this.element},getIsCloning:function(){var e=this.$attrs.group,t=e||this.getOptionGroup();return h(t)},getOptionGroup:function(){var e=this.options;if(e)return e.group},updateOptions:function(e){for(var t in e)-1==v.indexOf(t)&&this._sortable&&this._sortable.option(t,e[t])},getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default();var e=[].slice.call(this.$refs.draggable.children);return this.transitionMode?e[0].child.$slots.default():e},computeIndexes:function(){var e=this;this.$nextTick((function(){e.visibleIndexes=f(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode)}))},getUnderlyingVm:function(e){var t=d(this.getChildrenNodes()||[],e);if(-1===t)return null;var n=this.realList[t];return{index:t,element:n}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&"transition-group"===t.$options._componentTag?t.$parent:t},emitChanges:function(e){var t=this;this.$nextTick((function(){t.$emit("change",e)}))},alterList:function(e){if(this.list)e(this.list);else{var t=Object(o["a"])(this.value);e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,Object(o["a"])(e))};this.alterList(t)},updatePosition:function(e,t){var n=function(n){return n.splice(t,0,n.splice(e,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(e){var t=e.to,n=e.related,o=this.getUnderlyingPotencialDraggableComponent(t);if(!o)return{component:o};var a=o.realList,r={list:a,component:o};if(t!==n&&a&&o.getUnderlyingVm){var i=o.getUnderlyingVm(n);if(i)return Object.assign(i,r)}return r},getVmIndex:function(e){var t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){var t=this.getChildrenNodes();t[e].data=null;var n=this.getComponent();n.children=[],n.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),this.isCloning=this.getIsCloning(),e.item._underlying_vm_=this.clone(this.context.element),w=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){u(e.item);var n=this.getVmIndex(e.newIndex);this.spliceList(n,0,t),this.computeIndexes();var o={element:t,newIndex:n};this.emitChanges({added:o})}},onDragRemove:function(e){if(s(this.rootContainer,e.item,e.oldIndex),this.isCloning)u(e.clone);else{var t=this.context.index;this.spliceList(t,1);var n={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:n})}},onDragUpdate:function(e){u(e.item),s(e.from,e.item,e.oldIndex);var t=this.context.index,n=this.getVmIndex(e.newIndex);this.updatePosition(t,n);var o={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:o})},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var n=Object(o["a"])(t.to.children).filter((function(e){return"none"!==e.style["display"]})),a=n.indexOf(t.related),r=e.component.getVmIndex(a),i=-1!=n.indexOf(w);return i||!t.willInsertAfter?r:r+1},onDragMove:function(e,t){var n=this.move;if(!n||!this.realList)return!0;var o=this.getRelatedContextFromMoveEvent(e),a=this.context,r=this.computeFutureIndex(o,e);return Object.assign(a,{futureIndex:r}),Object.assign(e,{relatedContext:o,draggedContext:a}),n(e,t)},onDragEnd:function(){this.computeIndexes(),w=null}}}}).call(this,n("2409"))},"0bce":function(e,t,n){"use strict";n("04eb")},"0f9a":function(e,t,n){"use strict";n.r(t);var o=n("291b"),a=(n("e186"),n("c24f")),r=n("e9df"),i=n("f121"),c=n("b2eb"),l=n("20c0"),u=n("893d"),s=function(){return{accessToken:Object(r["getAccessToken"])(),username:"",avatar:""}},d={accessToken:function(e){return e.accessToken},username:function(e){return e.username},avatar:function(e){return e.avatar}},f={setAccessToken:function(e,t){e.accessToken=t,Object(r["setAccessToken"])(t)},setUsername:function(e,t){e.username=t},setAvatar:function(e,t){e.avatar=t}},m={setVirtualRoles:function(e){var t=e.commit,n=e.dispatch;n("acl/setFull",!0,{root:!0}),t("setAvatar","https://i.gtimg.cn/club/item/face/img/2/15922_100.gif"),t("setUsername","admin(未开启登录拦截)")},login:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function n(){var o,r,c,s,d,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.commit,n.next=3,Object(a["login"])(t);case 3:r=n.sent,c=r.data,s=c.token[i["tokenName"]],s?(o("setAccessToken",s),d=(new Date).getHours(),f=d<8?"早上好":d<=11?"上午好":d<=13?"中午好":d<18?"下午好":"晚上好",l["a"].open({message:"欢迎登录".concat(i["title"]),description:"".concat(f,"！")})):u["a"].error("登录接口异常，未正确返回".concat(i["tokenName"],"..."));case 7:case"end":return n.stop()}}),n)})))()},getUserInfo:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,o,r,i,l,s,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,o=e.dispatch,r=e.state,t.next=3,Object(a["getUserInfo"])(r.accessToken);case 3:if(i=t.sent,l=i.data,l){t.next=8;break}return u["a"].error("验证失败，请重新登录..."),t.abrupt("return",!1);case 8:s=l.username,d=l.avatar,f=l.role,s&&f?(o("acl/setRole",f,{root:!0}),n("setUsername",s),n("setAvatar",d),c["default"].Init(s)):u["a"].error("用户信息接口异常");case 10:case"end":return t.stop()}}),t)})))()},logout:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,Object(a["logout"])(s.accessToken);case 3:return t.next=5,n("resetAll");case 5:case"end":return t.stop()}}),t)})))()},resetAll:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,n("setAccessToken","");case 3:return t.next=5,n("acl/setFull",!1,{root:!0});case 5:return t.next=7,n("acl/setRole",[],{root:!0});case 7:return t.next=9,n("acl/setAbility",[],{root:!0});case 9:Object(r["removeAccessToken"])();case 10:case"end":return t.stop()}}),t)})))()},setAccessToken:function(e,t){var n=e.commit;n("setAccessToken",t)}};t["default"]={state:s,getters:d,mutations:f,actions:m}},1:function(e,t){},1154:function(e,t,n){"use strict";n.r(t),n.d(t,"hasRole",(function(){return a})),n.d(t,"can",(function(){return r}));n("097a"),n("5e88");var o=n("4360");function a(e){if(o["default"].getters["acl/admin"])return!0;if(e instanceof Array&&e.length>0)return r(e,o["default"].getters["acl/role"]);var t="oneOf";Object.prototype.hasOwnProperty.call(e,"mode")&&(t=e["mode"]);var n=!0;return Object.prototype.hasOwnProperty.call(e,"role")&&(n=n&&r(o["default"].getters["acl/role"],{role:e["role"],mode:t})),n&&Object.prototype.hasOwnProperty.call(e,"ability")&&(n=n&&r(o["default"].getters["acl/ability"],{role:e["ability"],mode:t})),n}function r(e,t){var n=e.includes(t);return n}},1813:function(e,t,n){"use strict";n.r(t);n("0211");var o=n("434f"),a={class:"items-box"},r=["onClick"],i={class:"step-img"},c=["src"],l={class:"step-title"},u=["onClick"],s={class:"step-img"},d=["src"],f={class:"step-title"},m=["onClick"],p={class:"square"},h={class:"step-img"},b=["src"];function g(e,t,n,g,v,w){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.flowAllList,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.children,(function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[e.type===v.flowTypeConstant.action?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[t.hidden?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"node",onClick:function(e){return w.handleClick(t)}},[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("img",{src:t.icon,style:{width:"100%"},alt:""},null,8,c)]),Object(o["createElementVNode"])("div",l,Object(o["toDisplayString"])(t.name),1)],8,r))],64)):e.type===v.flowTypeConstant.flow?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[t.hidden?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"node node-circle",onClick:function(e){return w.handleClick(t)}},[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("img",{src:t.icon,style:{width:"100%"},alt:""},null,8,d)]),Object(o["createElementVNode"])("div",f,Object(o["toDisplayString"])(t.name),1)],8,u))],64)):e.type===v.flowTypeConstant.condition?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:2},[t.hidden?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"node-square",onClick:function(e){return w.handleClick(t)}},[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("img",{src:t.icon,style:{width:"100%"},alt:""},null,8,b)])])],8,m))],64)):Object(o["createCommentVNode"])("",!0)],64)})),256))])})),256))])}var v=n("c912"),w={name:"ListForm",props:{flowAllList:{type:Array,default:function(){return[]}}},data:function(){return{flowTypeConstant:v["FLOW_TYPE"]}},methods:{handleClick:function(e){this.$emit("handleCheck",e)}}},O=(n("c286"),n("b3f2")),j=n.n(O);const y=j()(w,[["render",g],["__scopeId","data-v-4d421c34"]]);t["default"]=y},"1e74":function(e,t){var n={contentType:"application/json;charset=UTF-8",messageDuration:3e3,requestTimeout:1e4,successCode:[200,2e3,0]};e.exports=n},2033:function(e,t,n){"use strict";n.r(t),n.d(t,"getRouterList",(function(){return a}));var o=n("b775");function a(e){return Object(o["default"])({url:"/menu/navigate",method:"get",params:e})}},2196:function(e,t,n){var o={"./af":"2338","./af.js":"2338","./ar":"b7a6","./ar-dz":"5535","./ar-dz.js":"5535","./ar-kw":"a1a5","./ar-kw.js":"a1a5","./ar-ly":"ac58","./ar-ly.js":"ac58","./ar-ma":"2955","./ar-ma.js":"2955","./ar-sa":"b378","./ar-sa.js":"b378","./ar-tn":"3f3a","./ar-tn.js":"3f3a","./ar.js":"b7a6","./az":"c120","./az.js":"c120","./be":"a7b3","./be.js":"a7b3","./bg":"ed7b","./bg.js":"ed7b","./bm":"9aa8","./bm.js":"9aa8","./bn":"477e","./bn-bd":"07cf","./bn-bd.js":"07cf","./bn.js":"477e","./bo":"8949","./bo.js":"8949","./br":"afc8","./br.js":"afc8","./bs":"3cb0","./bs.js":"3cb0","./ca":"bfc2","./ca.js":"bfc2","./cs":"4be0","./cs.js":"4be0","./cv":"785e","./cv.js":"785e","./cy":"5cf0","./cy.js":"5cf0","./da":"e45f","./da.js":"e45f","./de":"da51","./de-at":"7f8a","./de-at.js":"7f8a","./de-ch":"f755","./de-ch.js":"f755","./de.js":"da51","./dv":"2910","./dv.js":"2910","./el":"228f","./el.js":"228f","./en-au":"c8a9","./en-au.js":"c8a9","./en-ca":"8c28","./en-ca.js":"8c28","./en-gb":"8932","./en-gb.js":"8932","./en-ie":"0915","./en-ie.js":"0915","./en-il":"02e6","./en-il.js":"02e6","./en-in":"354b","./en-in.js":"354b","./en-nz":"ec4d","./en-nz.js":"ec4d","./en-sg":"c38d","./en-sg.js":"c38d","./eo":"385a","./eo.js":"385a","./es":"7d8e","./es-do":"af00","./es-do.js":"af00","./es-mx":"a545","./es-mx.js":"a545","./es-us":"63cd","./es-us.js":"63cd","./es.js":"7d8e","./et":"b97c","./et.js":"b97c","./eu":"ed7f","./eu.js":"ed7f","./fa":"9b4e","./fa.js":"9b4e","./fi":"f6f0","./fi.js":"f6f0","./fil":"277d","./fil.js":"277d","./fo":"e83a","./fo.js":"e83a","./fr":"0e7e","./fr-ca":"5636","./fr-ca.js":"5636","./fr-ch":"5f78","./fr-ch.js":"5f78","./fr.js":"0e7e","./fy":"1187","./fy.js":"1187","./ga":"83d0","./ga.js":"83d0","./gd":"45a3","./gd.js":"45a3","./gl":"361b","./gl.js":"361b","./gom-deva":"f459","./gom-deva.js":"f459","./gom-latn":"2bc3","./gom-latn.js":"2bc3","./gu":"2643","./gu.js":"2643","./he":"81ad","./he.js":"81ad","./hi":"73be","./hi.js":"73be","./hr":"c9a2","./hr.js":"c9a2","./hu":"2880","./hu.js":"2880","./hy-am":"bc95","./hy-am.js":"bc95","./id":"5c42","./id.js":"5c42","./is":"33fb","./is.js":"33fb","./it":"cec9","./it-ch":"9553","./it-ch.js":"9553","./it.js":"cec9","./ja":"7953","./ja.js":"7953","./jv":"1ab8","./jv.js":"1ab8","./ka":"bbb9","./ka.js":"bbb9","./kk":"887a","./kk.js":"887a","./km":"da3f","./km.js":"da3f","./kn":"be5c","./kn.js":"be5c","./ko":"121d","./ko.js":"121d","./ku":"ea4a","./ku.js":"ea4a","./ky":"9f64","./ky.js":"9f64","./lb":"0da2","./lb.js":"0da2","./lo":"9d44","./lo.js":"9d44","./lt":"6865","./lt.js":"6865","./lv":"700c","./lv.js":"700c","./me":"e656","./me.js":"e656","./mi":"713f","./mi.js":"713f","./mk":"0fdd","./mk.js":"0fdd","./ml":"b50a","./ml.js":"b50a","./mn":"7ccc","./mn.js":"7ccc","./mr":"fd9d","./mr.js":"fd9d","./ms":"78e8","./ms-my":"562d","./ms-my.js":"562d","./ms.js":"78e8","./mt":"4a2e","./mt.js":"4a2e","./my":"257e","./my.js":"257e","./nb":"912f","./nb.js":"912f","./ne":"d2fd","./ne.js":"d2fd","./nl":"02ee","./nl-be":"2ead","./nl-be.js":"2ead","./nl.js":"02ee","./nn":"9838","./nn.js":"9838","./oc-lnc":"059f","./oc-lnc.js":"059f","./pa-in":"b8ef","./pa-in.js":"b8ef","./pl":"d7c9","./pl.js":"d7c9","./pt":"a1bb","./pt-br":"0fa9","./pt-br.js":"0fa9","./pt.js":"a1bb","./ro":"e6b4","./ro.js":"e6b4","./ru":"64be","./ru.js":"64be","./sd":"3f86","./sd.js":"3f86","./se":"b7fa","./se.js":"b7fa","./si":"8b18","./si.js":"8b18","./sk":"15d1","./sk.js":"15d1","./sl":"bc79","./sl.js":"bc79","./sq":"935d","./sq.js":"935d","./sr":"a908","./sr-cyrl":"4c56","./sr-cyrl.js":"4c56","./sr.js":"a908","./ss":"857f","./ss.js":"857f","./sv":"1c9d","./sv.js":"1c9d","./sw":"ab81","./sw.js":"ab81","./ta":"7ecc","./ta.js":"7ecc","./te":"9cd3","./te.js":"9cd3","./tet":"c072","./tet.js":"c072","./tg":"1548","./tg.js":"1548","./th":"b021","./th.js":"b021","./tk":"d5f7","./tk.js":"d5f7","./tl-ph":"79f5","./tl-ph.js":"79f5","./tlh":"af44","./tlh.js":"af44","./tr":"9b39","./tr.js":"9b39","./tzl":"c32e","./tzl.js":"c32e","./tzm":"bf04","./tzm-latn":"b5da","./tzm-latn.js":"b5da","./tzm.js":"bf04","./ug-cn":"73e5","./ug-cn.js":"73e5","./uk":"4796","./uk.js":"4796","./ur":"9abf","./ur.js":"9abf","./uz":"4330","./uz-latn":"459a","./uz-latn.js":"459a","./uz.js":"4330","./vi":"b41f","./vi.js":"b41f","./x-pseudo":"0ac7","./x-pseudo.js":"0ac7","./yo":"ce2f","./yo.js":"ce2f","./zh-cn":"1f8b","./zh-cn.js":"1f8b","./zh-hk":"501f","./zh-hk.js":"501f","./zh-mo":"f86a","./zh-mo.js":"f86a","./zh-tw":"196e","./zh-tw.js":"196e"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id="2196"},"248f":function(e,t,n){},"34e9":function(e,t,n){"use strict";n.r(t);var o=n("434f"),a={class:"if-node-form"};function r(e,t,n,r,i,c){var l=Object(o["resolveComponent"])("a-input"),u=Object(o["resolveComponent"])("a-form-item"),s=Object(o["resolveComponent"])("a-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createVNode"])(s,{rules:i.rules,ref:"dataForm",model:i.tempItem,"label-width":"80px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{label:"步骤名称",name:"stepName"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{size:"small",value:i.tempItem.stepName,"onUpdate:value":t[0]||(t[0]=function(e){return i.tempItem.stepName=e}),style:{width:"200px"}},null,8,["value"])]})),_:1})]})),_:1},8,["rules","model"])])}n("7e5a");var i=n("761a");function c(){return{stepName:"条件判断"}}var l={name:"IfNodeForm",props:{editItem:{type:Object}},created:function(){if(this.editItem&&this.editItem.stepName){var e=Object(i["clone"])(this.editItem);this.updateData(e)}this.init()},data:function(){return{tempItem:c(),rules:{stepName:[{required:!0,trigger:"blur",message:"请填写名称"}]}}},methods:{init:function(){},updateData:function(e){this.tempItem.stepName=e.stepName},validateFormData:function(){return new Promise((function(e,t){e()}))},formData:function(){var e=Object(i["clone"])(this.tempItem);return e}}},u=n("b3f2"),s=n.n(u);const d=s()(l,[["render",r]]);t["default"]=d},3968:function(e,t,n){"use strict";n.r(t);n("0211");var o=n("434f"),a={class:"expand-item"},r={class:"expand-title"},i={class:"expand-content"},c={title:"创建分支"};function l(e,t,n,l,u,s){var d=Object(o["resolveComponent"])("a-input"),f=Object(o["resolveComponent"])("a-form-item"),m=Object(o["resolveComponent"])("vab-icon"),p=Object(o["resolveComponent"])("a-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(p,{rules:u.rules,ref:"dataForm",model:u.tempItem,"label-width":"80px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"步骤名称",name:"stepName"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{size:"small",value:u.tempItem.stepName,"onUpdate:value":t[0]||(t[0]=function(e){return u.tempItem.stepName=e}),style:{width:"200px"}},null,8,["value"])]})),_:1}),Object(o["createVNode"])(f,{label:"分支",name:"stepName"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(u.tempItem.ruleGroupList,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createElementVNode"])("span",r,"分支"+Object(o["toDisplayString"])(t+1),1),Object(o["createElementVNode"])("span",i,[Object(o["createVNode"])(d,{size:"small",value:e.name,"onUpdate:value":function(t){return e.name=t},placeholder:"placeholder"},null,8,["value","onUpdate:value"])]),Object(o["createVNode"])(m,{icon:"delete-bin-6-line",onClick:function(e){return s.handleRemoveRuleGroup(t)}},null,8,["onClick"])])})),256)),Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(m,{onClick:s.handleCreateRuleGroup,icon:"add-fill"},null,8,["onClick"])])]})),_:1})]})),_:1},8,["rules","model"])])}n("7e5a"),n("373e");var u=n("761a"),s=n("3f56");function d(){return{stepName:"条件分组",ruleGroupList:[{name:""}]}}var f={name:"ExpandNodeForm",components:{VabIcon:s["default"]},props:{editItem:{type:Object}},data:function(){return{tempItem:d(),rules:{stepName:[{required:!0,trigger:"blur",message:"请填写名称"}]}}},created:function(){if(this.editItem&&this.editItem.stepName){var e=Object(u["clone"])(this.editItem);this.updateData(e)}},methods:{updateData:function(e){this.tempItem=e},validateFormData:function(){return new Promise((function(e,t){e()}))},formData:function(){var e=Object(u["clone"])(this.tempItem);return e},handleCreateRuleGroup:function(){this.tempItem.ruleGroupList.push({name:""})},handleRemoveRuleGroup:function(e){this.tempItem.ruleGroupList.splice(e,1),0===this.tempItem.ruleGroupList.length&&this.handleCreateRuleGroup()},_message:function(e,t){this.$message({type:t||"error",message:e})}}},m=(n("8bdd"),n("b3f2")),p=n.n(m);const h=p()(f,[["render",l],["__scopeId","data-v-2ce6e5e7"]]);t["default"]=h},"3a64":function(e,t,n){},"3d65":function(e,t,n){"use strict";n("5b53")},"3da2":function(e,t,n){"use strict";n.r(t);var o=n("434f");function a(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("a-input"),l=Object(o["resolveComponent"])("a-form-item"),u=Object(o["resolveComponent"])("a-select-option"),s=Object(o["resolveComponent"])("a-select"),d=Object(o["resolveComponent"])("a-input-number"),f=Object(o["resolveComponent"])("a-switch"),m=Object(o["resolveComponent"])("a-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(m,{rules:r.rules,ref:"dataForm",model:r.tempItem,"label-col":{span:4},"wrapper-col":{span:14}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称",name:"stepName"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{size:"small",value:r.tempItem.stepName,"onUpdate:value":t[0]||(t[0]=function(e){return r.tempItem.stepName=e}),style:{width:"200px"}},null,8,["value"])]})),_:1}),Object(o["createVNode"])(l,{label:"值类型"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{value:r.tempItem.type,"onUpdate:value":t[1]||(t[1]=function(e){return r.tempItem.type=e}),disabled:""},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.dataTypeSelect,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{value:e.value,key:t},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1}),"INT"===r.tempItem.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,label:"值",name:"value"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:r.tempItem.value,"onUpdate:value":t[2]||(t[2]=function(e){return r.tempItem.value=e}),min:1,max:100},null,8,["value"])]})),_:1})):"DECIMAL"===r.tempItem.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,label:"值",name:"value"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:r.tempItem.value,"onUpdate:value":t[3]||(t[3]=function(e){return r.tempItem.value=e}),min:0,max:100,step:.1},null,8,["value","step"])]})),_:1})):"STRING"===r.tempItem.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:2,label:"值",name:"value"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{size:"small",value:r.tempItem.value,"onUpdate:value":t[4]||(t[4]=function(e){return r.tempItem.value=e}),style:{width:"200px"}},null,8,["value"])]})),_:1})):"BOOL"===r.tempItem.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:3,label:"值",name:"value"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{"checked-children":"开","un-checked-children":"关",checked:r.tempItem.value,"onUpdate:checked":t[5]||(t[5]=function(e){return r.tempItem.value=e})},null,8,["checked"])]})),_:1})):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["rules","model"])])}n("0211"),n("7e5a");var r=n("761a"),i=[{value:"INT",label:"整数"},{value:"DECIMAL",label:"浮点"},{value:"STRING",label:"字符"},{value:"BOOL",label:"布尔"},{value:"JSON",label:"JSON"}];var c={name:"EndNodeForm",props:{editItem:{type:Object},itemData:{type:Object}},data:function(){return{tempItem:{stepName:"节点",type:"INT",value:"100",conditionType:"EMPTY"},rules:{stepName:[{required:!0,trigger:"blur",message:"请填写名称"}]},dataTypeSelect:i}},created:function(){this.editItem&&this.editItem.stepName&&(this.tempItem=Object(r["clone"])(this.editItem)),this.itemData&&this.itemData.name&&(this.tempItem.stepName=this.itemData.name,this.tempItem.type=this.itemData.thingsType)},methods:{validateFormData:function(){return new Promise((function(e,t){e()}))},formData:function(){var e=Object(r["clone"])(this.tempItem);return e}}},l=n("b3f2"),u=n.n(l);const s=u()(c,[["render",a]]);t["default"]=s},"3dfd":function(e,t,n){"use strict";n.r(t);var o=n("434f"),a={id:"vue-admin-beautiful"};function r(e,t,n,r,i,c){var l=Object(o["resolveComponent"])("router-view"),u=Object(o["resolveComponent"])("a-config-provider");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createVNode"])(u,{locale:i.locale},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l)]})),_:1},8,["locale"])])}var i=n("e7fa"),c={name:"App",data:function(){return{locale:i["a"]}}},l=(n("8436"),n("b3f2")),u=n.n(l);const s=u()(c,[["render",r]]);t["default"]=s},"3f56":function(e,t,n){"use strict";n.r(t);var o=n("434f");function a(e,t,n,a,r,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("i",{class:Object(o["normalizeClass"])("ri-"+n.icon),"aria-hidden":"true"},null,2)}n("d52b");var r={name:"VabIcon",props:{icon:{type:String,required:!0}}},i=(n("6376"),n("b3f2")),c=n.n(i);const l=c()(r,[["render",a],["__scopeId","data-v-7ef36259"]]);t["default"]=l},4240:function(e,t,n){n("7e5a"),n("882b"),n("3328");var o=n("a404");o.keys().forEach((function(e){o(e)}))},4360:function(e,t,n){"use strict";n.r(t);n("7e5a"),n("882b"),n("3328"),n("cb0b"),n("a9bd"),n("f157");var o=n("767c"),a=n("d307"),r={};a.keys().forEach((function(e){r[e.replace(/(\.\/|\.js)/g,"")]=a(e).default})),Object.keys(r).forEach((function(e){r[e]["namespaced"]=!0})),t["default"]=Object(o["a"])({modules:r})},4932:function(e,t){var n={layout:"horizontal",themeName:"default",fixedHeader:!0,showProgressBar:!0,showTabsBar:!0,showLanguage:!0,showRefresh:!0,showSearch:!0,showTheme:!0,showNotice:!0,showFullScreen:!0};e.exports=n},"4b59":function(e,t,n){"use strict";n.r(t);var o=n("434f");function a(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("router-view"),l=Object(o["resolveComponent"])("a-layout-content");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{class:"vab-content"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])((function(e){var t=e.Component;return[Object(o["createVNode"])(o["Transition"],{mode:"out-in",name:"fade-transform"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(t)))]})),_:2},1024)]})),_:1})]})),_:1})}var r={name:"VabContent",computed:{cachedViews:function(){return this.$store.state.settings.cachedViews}},watch:{$route:{handler:function(){"mobile"===this.device&&this.$store.dispatch("settings/foldSideBar")},immediate:!0}}},i=(n("3d65"),n("b3f2")),c=n.n(i);const l=c()(r,[["render",a]]);t["default"]=l},"558f":function(e,t,n){"use strict";n.r(t);var o=n("434f"),a=n("cf05"),r=n.n(a),i=function(e){return Object(o["pushScopeId"])("data-v-212caa3c"),e=e(),Object(o["popScopeId"])(),e},c={class:"vab-logo"},l=i((function(){return Object(o["createElementVNode"])("img",{src:r.a,alt:""},null,-1)})),u=[l];function s(e,t,n,a,r,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,u)}var d=n("767c"),f={name:"VabLogo",setup:function(){var e=Object(d["d"])();return{logo:Object(o["computed"])((function(){return e.getters["settings/logo"]})),title:Object(o["computed"])((function(){return e.getters["settings/title"]}))}}},m=(n("bb24"),n("b3f2")),p=n.n(m);const h=p()(f,[["render",s],["__scopeId","data-v-212caa3c"]]);t["default"]=h},"565c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("8ab0"),n("a1ff"),n("4bb2"),n("e3c9");var o=n("434f"),a=n("1f17"),r=n("3dfd"),i=n("a18c"),c=n("4360"),l=(n("3e5d"),n("4240"),n("d8ad")),u=n("6856"),s=n.n(u),d=(n("dd96"),n("e1c6"));n("9f36");Object(d["a"])({key:"8c180d16acd06cb0dd636b316c901328"});var f=Object(o["createApp"])(r["default"]);f.use(c["default"]).use(i["default"]).use(a["a"]).mount("#app"),f.config.globalProperties.$bus=l["bus"],f.use(s.a),f.use(VueAmap)},5817:function(e,t,n){"use strict";n.r(t);var o=n("07c5");const a=o["a"];t["default"]=a},"5b53":function(e,t,n){},"5b69":function(e,t,n){"use strict";n.r(t);var o=n("434f"),a=["id"],r=["id"],i=["id"],c=["id"],l={class:"lane-text"},u=["id"],s={class:"lane-text"},d={key:5};function f(e,t,n,f,m,p){var h=Object(o["resolveComponent"])("vab-icon");return"start"===n.node.type||"end"===n.node.type||"event"===n.node.type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,id:n.node.id,class:Object(o["normalizeClass"])(["common-circle-node",{active:p.isActive(),isStart:"start"===n.node.type,isEnd:"end"===n.node.type}]),style:Object(o["normalizeStyle"])({top:n.node.y+"px",left:n.node.x+"px",cursor:p.setCursor(n.currentTool.type)}),onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(){return p.selectNode&&p.selectNode.apply(p,arguments)}),["stop"])),onContextmenu:t[1]||(t[1]=Object(o["withModifiers"])((function(){return p.showNodeContextMenu&&p.showNodeContextMenu.apply(p,arguments)}),["stop"]))},Object(o["toDisplayString"])(n.node.nodeName),47,a)):"common"===n.node.type||"freedom"===n.node.type||"child-flow"===n.node.type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:1,id:n.node.id,class:Object(o["normalizeClass"])(["common-rectangle-node",{active:p.isActive()}]),style:Object(o["normalizeStyle"])({top:n.node.y+"px",left:n.node.x+"px",cursor:p.setCursor(n.currentTool.type)}),onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(){return p.selectNode&&p.selectNode.apply(p,arguments)}),["stop"])),onContextmenu:t[3]||(t[3]=Object(o["withModifiers"])((function(){return p.showNodeContextMenu&&p.showNodeContextMenu.apply(p,arguments)}),["stop"]))},[Object(o["createVNode"])(h,{icon:p.setIcon(n.node.type),class:"node-icon"},null,8,["icon"]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(n.node.nodeName),1)],46,r)):"gateway"===n.node.type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:2,id:n.node.id,class:Object(o["normalizeClass"])(["common-diamond-node",{active:p.isActive()}]),style:Object(o["normalizeStyle"])({top:n.node.y+"px",left:n.node.x+"px",cursor:p.setCursor(n.currentTool.type)}),onClick:t[4]||(t[4]=Object(o["withModifiers"])((function(){return p.selectNode&&p.selectNode.apply(p,arguments)}),["stop"])),onContextmenu:t[5]||(t[5]=Object(o["withModifiers"])((function(){return p.showNodeContextMenu&&p.showNodeContextMenu.apply(p,arguments)}),["stop"]))},null,46,i)):"x-lane"===n.node.type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:3,id:n.node.id,class:Object(o["normalizeClass"])(["common-x-lane-node",{active:p.isActive()}]),style:Object(o["normalizeStyle"])({top:n.node.y+"px",left:n.node.x+"px",height:n.node.height+"px",width:n.node.width+"px",cursor:"zoom-in"===n.currentTool.type?"zoom-in":"zoom-out"===n.currentTool.type?"zoom-out":"default"})},[Object(o["createElementVNode"])("div",{class:"lane-text-div",style:Object(o["normalizeStyle"])({cursor:p.setCursor(n.currentTool.type)}),onClick:t[6]||(t[6]=Object(o["withModifiers"])((function(){return p.selectNode&&p.selectNode.apply(p,arguments)}),["stop"])),onContextmenu:t[7]||(t[7]=Object(o["withModifiers"])((function(){return p.showNodeContextMenu&&p.showNodeContextMenu.apply(p,arguments)}),["stop"]))},[Object(o["createElementVNode"])("span",l,Object(o["toDisplayString"])(n.node.nodeName),1)],36)],14,c)):"y-lane"===n.node.type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:4,id:n.node.id,class:Object(o["normalizeClass"])(["common-y-lane-node",{active:p.isActive()}]),style:Object(o["normalizeStyle"])({top:n.node.y+"px",left:n.node.x+"px",height:n.node.height+"px",width:n.node.width+"px",cursor:"zoom-in"===n.currentTool.type?"zoom-in":"zoom-out"===n.currentTool.type?"zoom-out":"default"})},[Object(o["createElementVNode"])("div",{class:"lane-text-div",style:Object(o["normalizeStyle"])({cursor:p.setCursor(n.currentTool.type)}),onClick:t[8]||(t[8]=Object(o["withModifiers"])((function(){return p.selectNode&&p.selectNode.apply(p,arguments)}),["stop"])),onContextmenu:t[9]||(t[9]=Object(o["withModifiers"])((function(){return p.showNodeContextMenu&&p.showNodeContextMenu.apply(p,arguments)}),["stop"]))},[Object(o["createElementVNode"])("span",s,Object(o["toDisplayString"])(n.node.nodeName),1)],36)],14,u)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",d))}n("b2df"),n("7e5a");var m=n("46f3"),p=n.n(m),h=n("8438"),b=n("9f60"),g=n("3f56"),v={props:["select","selectGroup","node","plumb","currentTool"],components:{jsplumb:p.a,VabIcon:g["default"]},mounted:function(){this.registerNode()},data:function(){return{currentSelect:this.select,currentSelectGroup:this.selectGroup}},methods:{setIcon:function(e){switch(e){case"common":return"user";case"freedom":return"sync";case"child-flow":return"apartment";default:return"tool"}},setCursor:function(e){switch(e){case"drag":return"move";case"connection":return"crosshair";case"zoom-in":return"zoom-in";case"zoom-out":return"zoom-out";default:return"default"}},registerNode:function(){var e=this;if(this.plumb.draggable(this.node.id,{containment:"parent",handle:function(e,t){for(var n=t.parentNode.querySelectorAll(".common-circle-node,.common-rectangle-node,.common-diamond-node,.lane-text-div"),o=0;o<n.length;o++)if(n[o]===t||"lane-text"===e.target.className)return!0;return!1},grid:b["flowConfig"].defaultStyle.alignGridPX,drag:function(t){b["flowConfig"].defaultStyle.isOpenAuxiliaryLine&&e.$emit("alignForLine",t)},stop:function(t){e.node.x=t.pos[0],e.node.y=t.pos[1],e.currentSelectGroup.length>1&&e.$emit("updateNodePos"),e.$emit("hideAlignLine")}}),"x-lane"===this.node.type||"y-lane"===this.node.type){var t=document.querySelector("#"+this.node.id);new h["a"](t,{handles:["e","w","n","s","nw","ne","sw","se"],initSize:{maxWidth:1e3,maxHeight:1e3,minWidth:200,minHeight:200}},(function(){e.node.height=Math.ceil(parseInt(t.style.height)),e.node.width=Math.ceil(parseInt(t.style.width))}))}this.currentSelect=this.node,this.currentSelectGroup=[]},selectNode:function(){var e=this;this.currentSelect=this.node,this.$emit("isMultiple",(function(t){if(t){var n=e.currentSelectGroup.filter((function(t){return t.id===e.node.id}));n.length<=0&&(e.plumb.addToDragSelection(e.node.id),e.currentSelectGroup.push(e.node))}else e.currentSelectGroup=[]}))},showNodeContextMenu:function(e){this.$emit("showNodeContextMenu",e),this.selectNode()},isActive:function(){var e=this;if(this.currentSelect.id===this.node.id)return!0;if(!this.currentSelectGroup)return[];var t=this.currentSelectGroup.filter((function(t){return t.id===e.node.id}));return t.length>0}},watch:{select:function(e){this.currentSelect=e},currentSelect:{handler:function(e){this.$emit("update:select",e)},deep:!0},selectGroup:function(e){this.currentSelectGroup=e},currentSelectGroup:{handler:function(e){this.$emit("update:selectGroup",e)},deep:!0}}},w=(n("940e"),n("b3f2")),O=n.n(w);const j=O()(v,[["render",f]]);t["default"]=j},"61f7":function(e,t,n){"use strict";n.r(t),n.d(t,"isExternal",(function(){return r})),n.d(t,"isPassword",(function(){return i})),n.d(t,"isNumber",(function(){return c})),n.d(t,"isName",(function(){return l})),n.d(t,"isIP",(function(){return u})),n.d(t,"isUrl",(function(){return s})),n.d(t,"isLowerCase",(function(){return d})),n.d(t,"isUpperCase",(function(){return f})),n.d(t,"isAlphabets",(function(){return m})),n.d(t,"isString",(function(){return p})),n.d(t,"isArray",(function(){return h})),n.d(t,"isPort",(function(){return b})),n.d(t,"isPhone",(function(){return g})),n.d(t,"isIdCard",(function(){return v})),n.d(t,"isEmail",(function(){return w})),n.d(t,"isChina",(function(){return O})),n.d(t,"isBlank",(function(){return j})),n.d(t,"isTel",(function(){return y})),n.d(t,"isNum",(function(){return C})),n.d(t,"isLongitude",(function(){return x})),n.d(t,"isLatitude",(function(){return N})),n.d(t,"isRTSP",(function(){return k})),n.d(t,"isJson",(function(){return I})),n.d(t,"validateDeviceName",(function(){return S}));var o=n("291b"),a=n("4a18");n("e186"),n("cb0b"),n("998e"),n("7e5a"),n("3467");function r(e){return/^(https?:|mailto:|tel:)/.test(e)}function i(e){return e.length>=6}function c(e){var t=/^[0-9]*$/;return t.test(e)}function l(e){var t=/^[\u4e00-\u9fa5a-zA-Z0-9]+$/;return t.test(e)}function u(e){var t=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;return t.test(e)}function s(e){var t=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;return t.test(e)}function d(e){var t=/^[a-z]+$/;return t.test(e)}function f(e){var t=/^[A-Z]+$/;return t.test(e)}function m(e){var t=/^[A-Za-z]+$/;return t.test(e)}function p(e){return"string"===typeof e||e instanceof String}function h(e){return"undefined"===typeof Array.isArray?"[object Array]"===Object.prototype.toString.call(e):Array.isArray(e)}function b(e){var t=/^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/;return t.test(e)}function g(e){var t=/^1\d{10}$/;return t.test(e)}function v(e){var t=/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;return t.test(e)}function w(e){var t=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return t.test(e)}function O(e){var t=/^[\u4E00-\u9FA5]{2,4}$/;return t.test(e)}function j(e){return null==e||""===e||""===e.trim()||"null"===e.toLocaleLowerCase().trim()}function y(e){var t=/^(400|800)([0-9\\-]{7,10})|(([0-9]{4}|[0-9]{3})([- ])?)?([0-9]{7,8})(([- 转])*([0-9]{1,4}))?$/;return t.test(e)}function C(e){var t=/^\d+(\.\d{1,2})?$/;return t.test(e)}function x(e){var t=/^[-|+]?(0?\d{1,2}\.\d{1,5}|1[0-7]?\d{1}\.\d{1,5}|180\.0{1,5})$/;return t.test(e)}function N(e){var t=/^[-|+]?([0-8]?\d{1}\.\d{1,5}|90\.0{1,5})$/;return t.test(e)}function k(e){var t=/^rtsp:\/\/([a-z]{0,10}:.{0,10}@)?(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,n=/^rtsp:\/\/([a-z]{0,10}:.{0,10}@)?(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5]):[0-9]{1,5}/,o=/^rtsp:\/\/([a-z]{0,10}:.{0,10}@)?(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\//;return t.test(e)||n.test(e)||o.test(e)}function I(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!=Object(a["a"])(t)||!t)}catch(n){return!1}}function S(e,t){return T.apply(this,arguments)}function T(){return T=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=/^[a-zA-Z][a-zA-Z0-9_]{6,15}$/,o.test(n)){e.next=3;break}return e.abrupt("return",Promise.reject("以字母开头，6到16位（字母，数字，下划线，减号, $）"));case 3:return e.abrupt("return",Promise.resolve());case 4:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}},6364:function(e,t,n){var o=n("fcaa"),a=n("4932"),r=n("1e74");e.exports={setting:o,theme:a,network:r}},6376:function(e,t,n){"use strict";n("aed8")},"66f7":function(e,t,n){"use strict";n.r(t);var o=n("1938"),a=n("291b"),r=(n("e186"),n("d994"),n("a18c")),i=n("2033"),c=n("9f2e"),l=function(){return{routes:[],partialRoutes:[]}},u={routes:function(e){return e.routes},partialRoutes:function(e){return e.partialRoutes}},s={setRoutes:function(e,t){e.routes=t},setPartialRoutes:function(e,t){e.partialRoutes=t}},d={setRoutes:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,a=Object(c["filterRoutes"])([].concat(Object(o["a"])(r["constantRoutes"]),Object(o["a"])(r["asyncRoutes"]))),n("setRoutes",a),t.abrupt("return",Object(o["a"])(r["asyncRoutes"]));case 4:case"end":return t.stop()}}),t)})))()},setAllRoutes:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,l,u,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Object(i["getRouterList"])();case 3:return a=t.sent,l=a.data,"*"!==l[l.length-1].path&&l.push({path:"*",redirect:"/404",hidden:!0}),u=Object(c["convertRouter"])(l),s=Object(c["filterRoutes"])([].concat(Object(o["a"])(r["constantRoutes"]),Object(o["a"])(u))),n("setRoutes",s),t.abrupt("return",Object(o["a"])(u));case 10:case"end":return t.stop()}}),t)})))()},setPartialRoutes:function(e,t){var n=e.commit;n("setPartialRoutes",t)}};t["default"]={state:l,getters:u,mutations:s,actions:d}},"761a":function(e,t,n){"use strict";n.r(t),n.d(t,"uuid",(function(){return a})),n.d(t,"clone",(function(){return r}));var o=n("4a18");n("cb0b"),n("a9bd"),n("7e5a"),n("7223"),n("f150");function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}function r(e){var t="";return"object"===Object(o["a"])(e)?(t=JSON.stringify(e),t=JSON.parse(t)):t=e,t}},"79d0":function(e,t,n){"use strict";n.r(t),n.d(t,"tools",(function(){return o})),n.d(t,"commonNodes",(function(){return a})),n.d(t,"highNodes",(function(){return r})),n.d(t,"laneNodes",(function(){return i}));var o=[{type:"drag",icon:"drag-move-2-fill",name:"拖拽"},{type:"connection",icon:"git-branch-fill",name:"连线"},{type:"zoom-in",icon:"zoom-in-line",name:"放大"},{type:"zoom-out",icon:"zoom-out-line",name:"缩小"}],a=[{type:"start",nodeName:"开始",icon:"play-circle"},{type:"end",nodeName:"结束",icon:"stop"},{type:"common",nodeName:"人工节点",icon:"user"},{type:"freedom",nodeName:"自动节点",icon:"sync"},{type:"gateway",nodeName:"网关",icon:"gateway"},{type:"event",nodeName:"事件",icon:"select"}],r=[{type:"child-flow",nodeName:"子流程",icon:"apartment"}],i=[{type:"x-lane",nodeName:"横向泳道",icon:"column-width"},{type:"y-lane",nodeName:"纵向泳道",icon:"column-height"}]},"7be2":function(e,t,n){"use strict";n("bb55")},"83fb":function(e,t,n){"use strict";n.r(t);var o=n("434f"),a={class:"vab-avatar"},r={class:"ant-dropdown-link"},i=Object(o["createTextVNode"])("退出登录");function c(e,t,n,c,l,u){var s=Object(o["resolveComponent"])("a-avatar"),d=Object(o["resolveComponent"])("DownOutlined"),f=Object(o["resolveComponent"])("a-menu-item"),m=Object(o["resolveComponent"])("a-menu"),p=Object(o["resolveComponent"])("a-dropdown");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createVNode"])(p,null,{overlay:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{onClick:c.logout},{default:Object(o["withCtx"])((function(){return[i]})),_:1},8,["onClick"])]})),_:1})]})),default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",r,[Object(o["createVNode"])(s,{src:c.avatar},null,8,["src"]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(c.username)+" ",1),Object(o["createVNode"])(d)])]})),_:1})])}var l=n("291b"),u=(n("e186"),n("f121")),s=n("0efb"),d=n("767c"),f=n("6b05"),m={name:"VabAvatar",components:{DownOutlined:s["a"]},setup:function(){var e=Object(d["d"])(),t=Object(f["d"])(),n=Object(f["c"])(),a=function(){var o=Object(l["a"])(regeneratorRuntime.mark((function o(){var a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,e.dispatch("user/logout");case 2:u["recordRoute"]?(a=n.fullPath,t.push("/login?redirect=".concat(a))):t.push("/login");case 3:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();return{avatar:Object(o["computed"])((function(){return e.getters["user/avatar"]})),username:Object(o["computed"])((function(){return e.getters["user/username"]})),logout:a}}},p=(n("9a26"),n("b3f2")),h=n.n(p);const b=h()(m,[["render",c]]);t["default"]=b},8436:function(e,t,n){"use strict";n("ceb3")},"84fc":function(e,t,n){"use strict";n("248f")},8687:function(e,t,n){},"8bdd":function(e,t,n){"use strict";n("565c")},"8e10":function(e,t,n){"use strict";n.r(t);var o=n("434f"),a=Object(o["createTextVNode"])(" 流程属性 "),r=Object(o["createTextVNode"])(" 节点属性 "),i=Object(o["createTextVNode"])(" 连线属性 ");function c(e,t,n,c,l,u){var s=Object(o["resolveComponent"])("vab-icon"),d=Object(o["resolveComponent"])("a-input"),f=Object(o["resolveComponent"])("a-form-item"),m=Object(o["resolveComponent"])("a-form"),p=Object(o["resolveComponent"])("a-tab-pane"),h=Object(o["resolveComponent"])("a-tag"),b=Object(o["resolveComponent"])("a-tabs");return Object(o["openBlock"])(),Object(o["createBlock"])(b,{size:"small",defaultActiveKey:"flow-attr",activeKey:l.activeKey},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{key:"flow-attr"},{tab:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",null,[Object(o["createVNode"])(s,{icon:"align-bottom"}),a])]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{layout:"vertical"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"流程id","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:n.flowData.attr.id,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"])]})),_:1})]})),_:1}),Object(o["createVNode"])(p,{key:"node-attr"},{tab:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",null,[Object(o["createVNode"])(s,{icon:"profile-line"}),r])]})),default:Object(o["withCtx"])((function(){return["start"===l.currentSelect.type?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,layout:"vertical"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"类型","wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{color:"purple"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.currentSelect.type),1)]})),_:1})]})),_:1},8,["wrapper-col"]),Object(o["createVNode"])(f,{label:"id","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.id,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"名称","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{placeholder:"请输入节点名称",value:l.currentSelect.nodeName,onChange:u.nodeNameChange},null,8,["value","onChange"])]})),_:1},8,["label-col","wrapper-col"])]})),_:1})):Object(o["createCommentVNode"])("",!0),"end"===l.currentSelect.type?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:1,layout:"vertical"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"类型","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{color:"purple"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.currentSelect.type),1)]})),_:1})]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"id","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.id,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"名称","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{placeholder:"请输入节点名称",value:l.currentSelect.nodeName,onChange:u.nodeNameChange},null,8,["value","onChange"])]})),_:1},8,["label-col","wrapper-col"])]})),_:1})):Object(o["createCommentVNode"])("",!0),"common"===l.currentSelect.type?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:2,layout:"vertical"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"类型","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{color:"purple"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.currentSelect.type),1)]})),_:1})]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"id","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.id,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"名称","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{placeholder:"请输入节点名称",value:l.currentSelect.nodeName,onChange:u.nodeNameChange},null,8,["value","onChange"])]})),_:1},8,["label-col","wrapper-col"])]})),_:1})):"freedom"===l.currentSelect.type?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:3,layout:"vertical"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"类型","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{color:"purple"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.currentSelect.type),1)]})),_:1})]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"id","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.id,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"名称","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{placeholder:"请输入节点名称",value:l.currentSelect.nodeName,onChange:u.nodeNameChange},null,8,["value","onChange"])]})),_:1},8,["label-col","wrapper-col"])]})),_:1})):"event"===l.currentSelect.type?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:4,layout:"vertical"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"类型","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{color:"purple"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.currentSelect.type),1)]})),_:1})]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"id","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.id,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"名称","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{placeholder:"请输入节点名称",value:l.currentSelect.nodeName,onChange:u.nodeNameChange},null,8,["value","onChange"])]})),_:1},8,["label-col","wrapper-col"])]})),_:1})):"gateway"===l.currentSelect.type?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:5,layout:"vertical"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"类型","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{color:"purple"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.currentSelect.type),1)]})),_:1})]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"id","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.id,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"名称","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{placeholder:"请输入节点名称",value:l.currentSelect.nodeName,onChange:u.nodeNameChange},null,8,["value","onChange"])]})),_:1},8,["label-col","wrapper-col"])]})),_:1})):"child-flow"===l.currentSelect.type?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:6,layout:"vertical"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"类型","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{color:"purple"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.currentSelect.type),1)]})),_:1})]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"id","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.id,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"名称","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{placeholder:"请输入节点名称",value:l.currentSelect.nodeName,onChange:u.nodeNameChange},null,8,["value","onChange"])]})),_:1},8,["label-col","wrapper-col"])]})),_:1})):"x-lane"===l.currentSelect.type||"y-lane"===l.currentSelect.type?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:7,layout:"vertical"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"类型","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{color:"purple"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.currentSelect.type),1)]})),_:1})]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"id","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.id,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"名称","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{placeholder:"请输入节点名称",value:l.currentSelect.nodeName,onChange:u.nodeNameChange},null,8,["value","onChange"])]})),_:1},8,["label-col","wrapper-col"])]})),_:1})):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(p,{key:"link-attr"},{tab:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",null,[Object(o["createVNode"])(s,{icon:"apps-fill"}),i])]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{layout:"vertical"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{label:"id","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.id,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"源节点","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.sourceId,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"目标节点","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.targetId,disabled:""},null,8,["value"])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(f,{label:"文本","label-col":l.formItemLayout.labelCol,"wrapper-col":l.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{value:l.currentSelect.label,onChange:u.linkLabelChange},null,8,["value","onChange"])]})),_:1},8,["label-col","wrapper-col"])]})),_:1})]})),_:1})]})),_:1},8,["activeKey"])}n("b2df"),n("7e5a");var l=n("3f56"),u={props:["plumb","flowData","select"],components:{VabIcon:l["default"]},data:function(){return{currentSelect:this.select,formItemLayout:{labelCol:{span:0},wrapperCol:{span:24}},activeKey:"flow-attr"}},methods:{nodeNameChange:function(e){this.currentSelect.nodeName=e.target.value},linkLabelChange:function(e){var t=this,n=e.target.value;this.currentSelect.label=n;var o=this.plumb.getConnections({source:this.currentSelect.sourceId,target:this.currentSelect.targetId})[0],a=o.canvas.id,r=function(e){var n=window.event||e;n.stopPropagation(),t.currentSelect=t.flowData.linkList.filter((function(e){return e.id===a}))[0]};if(""!==n)o.setLabel({label:n,cssClass:"linkLabel ".concat(a)}),document.querySelector("."+a).addEventListener("click",r);else{document.querySelector("."+a).removeEventListener("click",r);var i=o.getLabelOverlay();i&&o.removeOverlay(i.id)}}},watch:{select:function(e){this.currentSelect=e,"link"===this.currentSelect.type?this.activeKey="link-attr":this.currentSelect.type?this.activeKey="node-attr":this.activeKey="flow-attr"},currentSelect:{handler:function(e){this.$emit("update:select",e)},deep:!0}}},s=(n("0bce"),n("b3f2")),d=n.n(s);const f=d()(u,[["render",c]]);t["default"]=f},9080:function(e,t,n){"use strict";n.r(t);n("0211");var o=n("434f"),a={style:{height:"100%"}},r={class:"container"},i={class:"header-option__tools"},c=Object(o["createElementVNode"])("div",{class:"tab"},"基础",-1),l=Object(o["createElementVNode"])("div",{class:"tab"},"高级",-1),u=Object(o["createElementVNode"])("div",{class:"tab"},"泳道",-1),s={class:"header-option__buttons",style:{position:"absolute",top:"0",right:"0",width:"150px","z-index":"1000"}},d={style:{margin:"8px"}},f=Object(o["createTextVNode"])("删除连线"),m=["src"];function p(e,t,n,p,h,b){var g=Object(o["resolveComponent"])("vab-icon"),v=Object(o["resolveComponent"])("a-button"),w=Object(o["resolveComponent"])("a-tooltip"),O=Object(o["resolveComponent"])("node-list"),j=Object(o["resolveComponent"])("a-row"),y=Object(o["resolveComponent"])("pane"),C=Object(o["resolveComponent"])("a-popconfirm"),x=Object(o["resolveComponent"])("flow-area"),N=Object(o["resolveComponent"])("flow-attr"),k=Object(o["resolveComponent"])("splitpanes"),I=Object(o["resolveComponent"])("context-menu-item"),S=Object(o["resolveComponent"])("context-menu"),T=Object(o["resolveComponent"])("a-modal"),F=Object(o["resolveComponent"])("setting-modal"),L=Object(o["resolveComponent"])("shortcut-modal"),V=Object(o["resolveComponent"])("test-modal");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(k,{class:"default-theme",style:{height:"415px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(y,{size:"20","min-size":"0","max-size":"20"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",i,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(h.field.tools,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:e.type},[Object(o["createVNode"])(w,{title:e.name,placement:"right"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{size:"small",type:h.currentTool.type===e.type?"primary":"default",onClick:function(t){return b.selectTool(e.type)}},{icon:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{icon:e.icon},null,8,["icon"])]})),_:2},1032,["type","onClick"])]})),_:2},1032,["title"])])})),128))]),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])((function(){return[c,Object(o["createVNode"])(O,{nodeList:h.field.commonNodes,type:"commonNodes",onSetDragInfo:b.setDragInfo},null,8,["nodeList","onSetDragInfo"])]})),_:1}),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])((function(){return[l,Object(o["createVNode"])(O,{nodeList:h.field.highNodes,type:"highNodes",onSetDragInfo:b.setDragInfo},null,8,["nodeList","onSetDragInfo"])]})),_:1}),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])((function(){return[u,Object(o["createVNode"])(O,{nodeList:h.field.laneNodes,type:"laneNodes",onSetDragInfo:b.setDragInfo},null,8,["nodeList","onSetDragInfo"])]})),_:1})]})),_:1}),Object(o["createVNode"])(y,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(x,{ref:"flowArea",dragInfo:h.dragInfo,browserType:h.browserType,flowData:h.flowData,select:h.currentSelect,"onUpdate:select":t[0]||(t[0]=function(e){return h.currentSelect=e}),selectGroup:h.currentSelectGroup,"onUpdate:selectGroup":t[1]||(t[1]=function(e){return h.currentSelectGroup=e}),plumb:h.plumb,currentTool:h.currentTool,onFindNodeConfig:b.findNodeConfig,onSelectTool:b.selectTool,onGetShortcut:b.getShortcut,onSaveFlow:b.saveFlow},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",s,[Object(o["createVNode"])(w,{title:"保存流程",placement:"bottom"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{onClick:b.saveFlow,class:"header-option-button",size:"small"},{icon:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{icon:"save-line"})]})),_:1},8,["onClick"])]})),_:1}),Object(o["createVNode"])(C,{title:"确认要重新绘制吗？",placement:"bottom",okText:"确认",cancelText:"取消",onConfirm:b.clear},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(w,{title:"重新绘制",placement:"bottom"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{class:"header-option-button",size:"small"},{icon:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{icon:"delete-bin-6-line"})]})),_:1})]})),_:1})]})),_:1},8,["onConfirm"]),Object(o["createVNode"])(w,{title:h.flowData.config.showGridText,placement:"bottom"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{onClick:b.toggleShowGrid,class:"header-option-button",size:"small"},{icon:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{icon:"grid-fill"})]})),_:1},8,["onClick"])]})),_:1},8,["title"]),Object(o["createVNode"])(w,{title:"测试",placement:"bottom"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{onClick:b.openTest,class:"header-option-button",size:"small"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{icon:"book-2-line"})]})),_:1},8,["onClick"])]})),_:1}),Object(o["createVNode"])(C,{title:"请选择帮助项：",placement:"bottom",okType:"default",okText:"快捷键大全",cancelText:"使用文档",onConfirm:b.shortcutHelper,onCancel:b.usingDoc},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(w,{title:"帮助",placement:"bottom"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{class:"header-option-button",size:"small"},{icon:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{icon:"book-2-line"})]})),_:1})]})),_:1})]})),_:1},8,["onConfirm","onCancel"])])]})),_:1},8,["dragInfo","browserType","flowData","select","selectGroup","plumb","currentTool","onFindNodeConfig","onSelectTool","onGetShortcut","onSaveFlow"])]})),_:1}),Object(o["createVNode"])(y,{size:"20","min-size":"0","max-size":"20"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",d,[Object(o["createVNode"])(N,{plumb:h.plumb,flowData:h.flowData,select:h.currentSelect},null,8,["plumb","flowData","select"])])]})),_:1})]})),_:1}),Object(o["createVNode"])(S,{name:"context-link"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(I,{onItemClickHandle:b.deleteLink,divider:!0},{default:Object(o["withCtx"])((function(){return[f]})),_:1},8,["onItemClickHandle"])]})),_:1})]),Object(o["createVNode"])(T,{title:"流程设计图_"+h.flowData.attr.id+".png",centered:"",width:"90%",closable:h.flowPicture.closable,maskClosable:h.flowPicture.maskClosable,visible:h.flowPicture.modalVisible,okText:"下载到本地",cancelText:"取消",onOk:b.downLoadFlowPicture,onCancel:b.cancelDownLoadFlowPicture},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("img",{src:h.flowPicture.url,style:{width:"100%"}},null,8,m)]})),_:1},8,["title","closable","maskClosable","visible","onOk","onCancel"]),Object(o["createVNode"])(F,{ref:"settingModal"},null,512),Object(o["createVNode"])(L,{ref:"shortcutModal"},null,512),Object(o["createVNode"])(V,{ref:"testModal",onLoadFlow:b.loadFlow},null,8,["onLoadFlow"])])}n("9084"),n("b2df"),n("7e5a"),n("882b"),n("879f"),n("f150"),n("3467"),n("373e"),n("8cd3");var h=n("f4d0"),b=n("46f3"),g=n.n(b),v=n("79d0"),w=n("9f60"),O=n("156b"),j=n.n(O),y=n("e6c2"),C=n("de9a"),x=n("af5c"),N=n("8e10"),k=n("af26"),I=n("ba5f"),S=n("9c67"),T=n("ed76"),F=n("3f56"),L=n("6856"),V=n("d927"),E=(n("dd7b"),{name:"vfdp",components:{jsplumb:g.a,flowConfig:w["flowConfig"],html2canvas:j.a,Canvg:y["a"],FlowArea:x["default"],FlowAttr:N["default"],SettingModal:k["default"],ShortcutModal:I["default"],TestModal:S["default"],NodeList:T["default"],VabIcon:F["default"],Splitpanes:V["b"],Pane:V["a"]},mounted:function(){this._getVenuesThings(5),this.dealCompatibility(),this.initJsPlumb(),this.listenShortcut(),this.initFlow(),this.listenPage()},data:function(){return{info:{version:"1.0.0",author:"前端爱码士",gitee:"https://gitee.com/zhangyeping/vue-flow-design-plus"},venuesThings:[],browserType:3,plumb:{},field:{tools:v["tools"],commonNodes:v["commonNodes"],highNodes:v["highNodes"],laneNodes:v["laneNodes"]},flowData:{nodeList:[],linkList:[],attr:{id:""},config:{showGrid:!0,showGridText:"隐藏网格",showGridIcon:"eye"},status:w["flowConfig"].flowStatus.CREATE,remarks:[]},currentTool:{type:"drag",icon:"drag",name:"拖拽"},currentSelect:{},currentSelectGroup:[],activeShortcut:!0,linkContextMenuData:w["flowConfig"].contextMenu.link,flowPicture:{url:"",modalVisible:!1,closable:!1,maskClosable:!1},dragInfo:{type:"",belongTo:""}}},methods:{setDragInfo:function(e){this.dragInfo=e},getBrowserType:function(){var e=navigator.userAgent,t=e.indexOf("Opera")>-1;return t?1:e.indexOf("Firefox")>-1?2:e.indexOf("Chrome")>-1?3:e.indexOf("Safari")>-1?4:e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!t?(alert("IE浏览器支持性较差，推荐使用Firefox或Chrome"),5):e.indexOf("Trident")>-1?(alert("Edge浏览器支持性较差，推荐使用Firefox或Chrome"),6):void 0},dealCompatibility:function(){this.browserType=this.getBrowserType(),2===this.browserType&&(w["flowConfig"].shortcut.scaleContainer={code:16,codeName:"SHIFT(chrome下为ALT)",shortcutName:"画布缩放"})},initJsPlumb:function(){var e=this;this.plumb=jsPlumb.getInstance(w["flowConfig"].jsPlumbInsConfig),this.plumb.bind("beforeDrop",(function(t){var n=t.sourceId,o=t.targetId;if(n===o)return!1;var a=e.flowData.linkList.filter((function(e){return e.sourceId===n&&e.targetId===o}));return!(a.length>0)||(e.$message.error("同方向的两节点连线只能有一条！"),!1)})),this.plumb.bind("connection",(function(t){var n=t.connection.canvas;console.log(t);var o,a,r={};if(e.flowData.status===w["flowConfig"].flowStatus.CREATE||e.flowData.status===w["flowConfig"].flowStatus.MODIFY)o="link-"+C["AMS"].getId(),a="";else if(e.flowData.status===w["flowConfig"].flowStatus.LOADING){var i=e.flowData.linkList[e.flowData.linkList.length-1];o=i.id,a=i.label}n.id=o,r.type="link",r.id=o,r.sourceId=t.sourceId,r.targetId=t.targetId,r.label=a,r.cls={linkType:w["flowConfig"].jsPlumbInsConfig.Connector[0],linkColor:w["flowConfig"].jsPlumbInsConfig.PaintStyle.stroke,linkThickness:w["flowConfig"].jsPlumbInsConfig.PaintStyle.strokeWidth},document.querySelector("#"+o).addEventListener("contextmenu",(function(t){Object(L["emitContext"])(t,{name:"context-link",id:[10,11,12]}),t.stopPropagation(),e.currentSelect=e.flowData.linkList.filter((function(e){return e.id===o}))[0]})),document.querySelector("#"+o).addEventListener("click",(function(t){var n=window.event||t;n.stopPropagation(),e.currentSelect=e.flowData.linkList.filter((function(e){return e.id===o}))[0]})),e.flowData.status!==w["flowConfig"].flowStatus.LOADING&&e.flowData.linkList.push(r)})),this.plumb.importDefaults({ConnectionsDetachable:w["flowConfig"].jsPlumbConfig.conn.isDetachable})},draggableFlowConnect:function(e,t,n){var o=this;function a(){o.plumb.connect({source:e,target:t,endpoint:"Dot",connectorStyle:{strokeStyle:"#ccc",joinStyle:"round",outlineColor:"#ccc"},connector:["Flowchart",{stub:[10,20],gap:1,cornerRadius:2,alwaysRespectStubs:!0}],endpointStyle:{fill:"transparent",outlineStroke:"transparent",outlineWidth:2},paintStyle:{stroke:"lightgray",strokeWidth:2},anchor:["BottomCenter","TopCenter"],overlays:[["PlainArrow",{width:10,length:10,location:1}],["Custom",{location:.5,id:"nodeTempSmall",create:function(){var n=o.$refs[t][0].$el;return n.dataset.target=t,n.dataset.source=e,n},visible:!1}],["Label",{location:1,id:"flowItemDesc",cssClass:"node-item-label",visible:!0}]]})}n?a():this.$nextTick((function(){a()}))},createFlowConnectionLabel:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){var o=n.$options.jsPlumb.getConnections({source:e,target:t});o.forEach((function(e){e.getOverlay("nodeTempSmall").setVisible(!0),e.bind("click",n.handleFlowLabelClick)}))}))},listenShortcut:function(){var e=this;document.onkeydown=function(t){var n=window.event||t;if(e.activeShortcut){var o=n.keyCode;switch(o){case w["flowConfig"].shortcut.multiple.code:e.$refs.flowArea.rectangleMultiple.flag=!0;break;case w["flowConfig"].shortcut.dragContainer.code:e.$refs.flowArea.container.dragFlag=!0;break;case w["flowConfig"].shortcut.scaleContainer.code:e.$refs.flowArea.container.scaleFlag=!0;break;case w["flowConfig"].shortcut.dragTool.code:e.selectTool("drag");break;case w["flowConfig"].shortcut.connTool.code:e.selectTool("connection");break;case w["flowConfig"].shortcut.zoomInTool.code:e.selectTool("zoom-in");break;case w["flowConfig"].shortcut.zoomOutTool.code:e.selectTool("zoom-out");break;case w["flowConfig"].shortcut.leftMove.code:e.moveNode("left");break;case w["flowConfig"].shortcut.upMove.code:e.moveNode("up");break;case w["flowConfig"].shortcut.rightMove.code:e.moveNode("right");break;case w["flowConfig"].shortcut.downMove.code:e.moveNode("down");break}if(n.ctrlKey&&n.altKey)switch(o){case w["flowConfig"].shortcut.settingModal.code:e.setting();break;case w["flowConfig"].shortcut.testModal.code:e.openTest();break}}},document.onkeyup=function(t){var n=window.event||t,o=n.keyCode;o===w["flowConfig"].shortcut.dragContainer.code?e.$refs.flowArea.container.dragFlag=!1:o===w["flowConfig"].shortcut.scaleContainer.code?(n.preventDefault(),e.$refs.flowArea.container.scaleFlag=!1):o===w["flowConfig"].shortcut.multiple.code&&(e.$refs.flowArea.rectangleMultiple.flag=!1)}},listenPage:function(){window.onbeforeunload=function(e){return e=e||window.event,e&&(e.returnValue="关闭提示"),"关闭提示"}},initFlow:function(){this.flowData.status===w["flowConfig"].flowStatus.CREATE?this.flowData.attr.id="flow-"+C["AMS"].getId():this.loadFlow()},loadFlow:function(e){var t=this;this.clear(),this.$nextTick((function(){var n=JSON.parse(e);t.flowData.attr=n.attr,t.flowData.config=n.config,t.flowData.status=w["flowConfig"].flowStatus.LOADING,t.plumb.batch((function(){var e=n.nodeList;e.forEach((function(e){t.flowData.nodeList.push(e)}));var o=n.linkList;t.$nextTick((function(){o.forEach((function(e){t.flowData.linkList.push(e);var n=t.plumb.connect({source:e.sourceId,target:e.targetId,anchor:w["flowConfig"].jsPlumbConfig.anchor.default,connector:[e.cls.linkType,{gap:5,cornerRadius:8,alwaysRespectStubs:!0}],paintStyle:{stroke:e.cls.linkColor,strokeWidth:e.cls.linkThickness}}),o=n.canvas.id,a=function(e){var n=window.event||e;n.stopPropagation(),t.currentSelect=t.flowData.linkList.filter((function(e){return e.id===o}))[0]};""!==e.label?(n.setLabel({label:e.label,cssClass:"linkLabel ".concat(o)}),document.querySelector("."+o).addEventListener("click",a)):document.querySelector("."+o)&&document.querySelector("."+o).removeEventListener("click",a)})),t.currentSelect={},t.currentSelectGroup=[],t.flowData.status=w["flowConfig"].flowStatus.MODIFY}))}),!0);var o=t.computeCanvasSize();t.$refs.flowArea.container.pos={top:100-o.minY,left:100-o.minX}}))},findNodeConfig:function(e,t,n){var o=null;switch(e){case"commonNodes":o=v["commonNodes"].filter((function(e){return e.type===t}));break;case"highNodes":o=v["highNodes"].filter((function(e){return e.type===t}));break;case"laneNodes":o=v["laneNodes"].filter((function(e){return e.type===t}));break}o&&o.length>=0&&(o=o[0]),n(o)},selectTool:function(e){var t=v["tools"].filter((function(t){return t.type===e}));switch(t&&t.length>=0&&(this.currentTool=t[0]),e){case"drag":this.changeToDrag();break;case"connection":this.changeToConnection();break;case"zoom-in":this.changeToZoomIn();break;case"zoom-out":this.changeToZoomOut();break}},changeToDrag:function(){var e=this;this.flowData.nodeList.forEach((function(t){var n=e.plumb.toggleDraggable(t.id);n||e.plumb.toggleDraggable(t.id),"x-lane"!==t.type&&"y-lane"!==t.type&&(e.plumb.unmakeSource(t.id),e.plumb.unmakeTarget(t.id))}))},changeToConnection:function(){var e=this;this.flowData.nodeList.forEach((function(t){var n=e.plumb.toggleDraggable(t.id);n&&e.plumb.toggleDraggable(t.id),"start"!==t.type?"x-lane"!==t.type&&"y-lane"!==t.type&&(e.plumb.makeSource(t.id,w["flowConfig"].jsPlumbConfig.makeSourceConfig),e.plumb.makeTarget(t.id,w["flowConfig"].jsPlumbConfig.makeTargetConfig)):e.plumb.makeSource(t.id,w["flowConfig"].jsPlumbConfig.makeSourceConfig)})),this.currentSelect={},this.currentSelectGroup=[]},changeToZoomIn:function(){console.log("切换到放大工具")},changeToZoomOut:function(){console.log("切换到缩小工具")},checkFlow:function(){var e=this.flowData.nodeList;return!(e.length<=0)||(this.$message.error("流程图中无任何节点！"),!1)},saveFlow:function(){var e=Object.assign({},this.flowData);if(this.checkFlow()){e.status=w["flowConfig"].flowStatus.SAVE;var t=JSON.stringify(e);return this.$message.success("保存流程成功！请查看控制台。"),t}},exportFlowPicture:function(){var e=this;if(this.checkFlow()){var t=this.$refs.flowArea.$el.children[0],n=t.querySelectorAll('svg[id^="link-"]'),o=[];n.forEach((function(e){var n=document.createElement("canvas"),a="linkCanvas-"+C["AMS"].getId();n.id=a,o.push(a);var r=e.outerHTML.trim();canvg(n,r),e.style.position&&(n.style.position+=e.style.position,n.style.left+=e.style.left,n.style.top+=e.style.top),t.appendChild(n)}));var a=this.computeCanvasSize(),r=w["flowConfig"].defaultStyle.photoBlankDistance,i=C["AMS"].div(r,2);j()(t,{width:a.width+r,height:a.height+r,scrollX:-a.minX+i,scrollY:-a.minY+i,logging:!1,onclone:function(){o.forEach((function(e){var t=document.querySelector("#"+e);t.parentNode.removeChild(t)}))}}).then((function(t){var n=t.toDataURL("image/png");e.flowPicture.url=n,e.flowPicture.modalVisible=!0}))}},downLoadFlowPicture:function(){var e=document.createElement("a"),t="alink-"+C["AMS"].getId();e.id=t,e.href=this.flowPicture.url,e.download="流程设计图_"+this.flowData.attr.id+".png",e.click()},cancelDownLoadFlowPicture:function(){this.flowPicture.url="",this.flowPicture.modalVisible=!1},computeCanvasSize:function(){var e=Object.assign([],this.flowData.nodeList),t=e[0].x,n=e[0].y,o=e[0].x+e[0].width,a=e[0].y+e[0].height;e.forEach((function(e){t=Math.min(t,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x+e.width),a=Math.max(a,e.y+e.height)}));var r=o-t,i=a-n;return{width:r,height:i,minX:t,minY:n,maxX:o,maxY:a}},clear:function(){var e=this;this.flowData.nodeList.forEach((function(t){e.plumb.remove(t.id)})),this.currentSelect={},this.currentSelectGroup=[],this.flowData.nodeList=[],this.flowData.linkList=[],this.flowData.remarks=[]},toggleShowGrid:function(){var e=this.flowData.config.showGrid;e?(this.flowData.config.showGrid=!1,this.flowData.config.showGridText="显示网格",this.flowData.config.showGridIcon="eye-invisible"):(this.flowData.config.showGrid=!0,this.flowData.config.showGridText="隐藏网格",this.flowData.config.showGridIcon="eye")},setting:function(){this.$refs.settingModal.open()},shortcutHelper:function(){this.$refs.shortcutModal.open()},usingDoc:function(){window.open(this.info.gitee)},showLinkContextMenu:function(e){var t=window.event||e;t.preventDefault(),t.stopPropagation(),document.querySelector(".vue-contextmenuName-flow-menu").style.display="none",document.querySelector(".vue-contextmenuName-node-menu").style.display="none";var n=t.clientX,o=t.clientY;this.linkContextMenuData.axis={x:n,y:o}},deleteLink:function(){var e=this.currentSelect.sourceId,t=this.currentSelect.targetId;this.plumb.deleteConnection(this.plumb.getConnections({source:e,target:t})[0]);var n=this.flowData.linkList;n.splice(n.findIndex((function(n){return n.sourceId===e&&n.targetId===t})),1),this.currentSelect={}},loseShortcut:function(){this.activeShortcut=!1},getShortcut:function(){this.activeShortcut=!0},openTest:function(){console.log(this.flowData);Object.assign({},this.flowData);this.$refs.testModal.setFlowData(this.flowData),this.$refs.testModal.testVisible=!0},moveNode:function(e){var t=w["flowConfig"].defaultStyle.movePx,n=!0;switch(e){case"left":t=-t;break;case"up":t=-t,n=!1;break;case"right":break;case"down":n=!1}this.currentSelectGroup.length>0?(this.currentSelectGroup.forEach((function(e){n?e.x+=t:e.y+=t})),this.plumb.repaintEverything()):this.currentSelect.id&&(n?this.currentSelect.x+=t:this.currentSelect.y+=t,this.plumb.repaintEverything())},_getVenuesThings:function(e){var t=this;Object(h["getVenuesThings"])(e).then((function(e){t.venuesThings=e.data}))}}}),D=(n("84fc"),n("b3f2")),P=n.n(D);const _=P()(E,[["render",p]]);t["default"]=_},9138:function(e,t,n){},"940e":function(e,t,n){"use strict";n("3a64")},"9a26":function(e,t,n){"use strict";n("a0d9")},"9c67":function(e,t,n){"use strict";n.r(t);var o=n("434f"),a=Object(o["createElementVNode"])("div",null,"当前的flowData:",-1),r=Object(o["createElementVNode"])("div",{style:{"margin-top":"12px"}},"暂存:",-1),i=Object(o["createTextVNode"])("暂存"),c=Object(o["createTextVNode"])("加载(暂存中的json数据)");function l(e,t,n,l,u,s){var d=Object(o["resolveComponent"])("json-viewer"),f=Object(o["resolveComponent"])("a-textarea"),m=Object(o["resolveComponent"])("a-divider"),p=Object(o["resolveComponent"])("a-button"),h=Object(o["resolveComponent"])("a-drawer");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(h,{title:"测试",placement:"right",width:600,visible:u.testVisible,onClose:s.onClose},{default:Object(o["withCtx"])((function(){return[a,Object(o["createVNode"])(d,{value:u.flowData,"expand-depth":3,boxed:"",theme:"jv-light",copyable:"",sort:""},null,8,["value"]),r,Object(o["createVNode"])(f,{autoSize:{minRows:10,maxRows:100},value:u.flowDataJson,onChange:s.editFlowDataJson},null,8,["value","onChange"]),Object(o["createVNode"])(m),Object(o["createVNode"])(p,{onClick:s.tempSave,style:{marginRight:"8px"}},{default:Object(o["withCtx"])((function(){return[i]})),_:1},8,["onClick"]),Object(o["createVNode"])(p,{onClick:s.onLoad,type:"primary"},{default:Object(o["withCtx"])((function(){return[c]})),_:1},8,["onClick"])]})),_:1},8,["visible","onClose"])])}n("f150");var u=n("3c56"),s=(n("4420"),n("9f60")),d={components:{JsonViewer:u["a"]},data:function(){return{testVisible:!1,flowData:null,flowDataJson:""}},methods:{setFlowData:function(e){this.flowData=e},onClose:function(){this.testVisible=!1},editFlowDataJson:function(e){this.flowDataJson=e.target.value},tempSave:function(){var e=Object.assign({},this.flowData);e.status=s["flowConfig"].flowStatus.SAVE,this.flowDataJson=JSON.stringify(e)},onLoad:function(){this.$emit("loadFlow",this.flowDataJson),this.onClose()}}},f=n("b3f2"),m=n.n(f);const p=m()(d,[["render",l]]);t["default"]=p},"9cf6":function(e,t,n){},"9f2e":function(e,t,n){"use strict";n.r(t),n.d(t,"convertRouter",(function(){return u})),n.d(t,"filterRoutes",(function(){return s})),n.d(t,"handleFirstMenu",(function(){return d}));n("457d"),n("cb0b"),n("998e"),n("4b6b"),n("4423"),n("ac56"),n("7223"),n("9787"),n("b2df"),n("7e5a");var o=n("a18c"),a=n("6266"),r=n.n(a),i=n("f121"),c=n("61f7"),l=n("1154");function u(e){return e.map((function(e){if(e.component)if("Layout"===e.component){var t="layouts";e.component=function(e){return Promise.all([n.e("chunk-2d0aeaf9"),n.e("chunk-7e0ee0a5"),n.e("chunk-74fe97ba"),n.e("chunk-835ac8aa"),n.e("chunk-3021e870")]).then(function(){var o=[n("a8ec")("./".concat(t))];e.apply(null,o)}.bind(this)).catch(n.oe)}}else{var o="views/"+e.component;o=new RegExp("^/views/.*$").test(e.component)||new RegExp("^views/.*$").test(e.component)?e.component:new RegExp("^/.*$").test(e.component)?"views"+e.component:new RegExp("^@views/.*$").test(e.component)?e.component.slice(1):"views/"+e.component,e.component=function(e){return Promise.all([n.e("chunk-2d0aeaf9"),n.e("chunk-7e0ee0a5"),n.e("chunk-74fe97ba"),n.e("chunk-835ac8aa"),n.e("chunk-3021e870")]).then(function(){var t=[n("a8ec")("./".concat(o))];e.apply(null,t)}.bind(this)).catch(n.oe)}}return e.children&&e.children.length&&(e.children=u(e.children)),e.children&&0===e.children.length&&delete e.children,e}))}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return e.filter((function(e){return!e.meta||!e.meta.roles||(!i["rolesControl"]||Object(l["hasRole"])(e.meta.roles))})).map((function(e){return"*"===e.path||Object(c["isExternal"])(e.path)||(e.path=r.a.resolve(t,e.path)),e.fullPath=e.path,e.children&&(e.children=s(e.children,e.fullPath)),e}))}function d(){var e=o["default"].currentRoute.matched[0].path;return""===e?"/":e}},"9f60":function(e,t,n){"use strict";n.r(t),n.d(t,"flowConfig",(function(){return o}));var o={jsPlumbInsConfig:{Connector:["Flowchart",{gap:5,cornerRadius:8,alwaysRespectStubs:!0}],ConnectionOverlays:[["Arrow",{width:10,length:10,location:1}]],PaintStyle:{stroke:"#2a2929",strokeWidth:2},HoverPaintStyle:{stroke:"#409EFF",strokeWidth:3},EndpointStyle:{fill:"#456",stroke:"#2a2929",strokeWidth:1,radius:3},EndpointHoverStyle:{fill:"pink"}},jsPlumbConfig:{anchor:{default:["Bottom","Right","Top","Left"]},conn:{isDetachable:!1},makeSourceConfig:{filter:"a",filterExclude:!0,maxConnections:-1,endpoint:["Dot",{radius:7}],anchor:["Bottom","Right","Top","Left"]},makeTargetConfig:{filter:"a",filterExclude:!0,maxConnections:-1,endpoint:["Dot",{radius:7}],anchor:["Bottom","Right","Top","Left"]}},defaultStyle:{dragOpacity:.7,alignGridPX:[5,5],alignSpacing:{level:100,vertical:100},alignDuration:300,containerScale:{init:1,min:.5,max:3,onceNarrow:.1,onceEnlarge:.1},isOpenAuxiliaryLine:!0,showAuxiliaryLineDistance:20,movePx:5,photoBlankDistance:200},idType:"uuid",flowStatus:{CREATE:"0",SAVE:"1",MODIFY:"2",LOADING:"3"},shortcut:{multiple:{code:17,codeName:"CTRL",shortcutName:"多选"},dragContainer:{code:32,codeName:"SPACE",shortcutName:"画布拖拽"},scaleContainer:{code:18,codeName:"ALT(firefox下为SHIFT)",shortcutName:"画布缩放"},dragTool:{code:68,codeName:"D",shortcutName:"拖拽工具"},connTool:{code:76,codeName:"L",shortcutName:"连线工具"},zoomInTool:{code:190,codeName:"<",shortcutName:"放大工具"},zoomOutTool:{code:188,codeName:">",shortcutName:"缩小工具"},leftMove:{code:37,codeName:"←",shortcutName:"左移"},upMove:{code:38,codeName:"↑",shortcutName:"上移"},rightMove:{code:39,codeName:"→",shortcutName:"右移"},downMove:{code:40,codeName:"↓",shortcutName:"下移"},settingModal:{code:83,codeName:"CTRL+ALT+S",shortcutName:"打开设置页面"},testModal:{code:84,codeName:"CTRL+ALT+T",shortcutName:"打开测试页面"}},contextMenu:{container:{menuName:"flow-menu",axis:{x:null,y:null},menulists:[{fnHandler:"flowInfo",icoName:"edit",btnName:"流程图信息"},{fnHandler:"paste",icoName:"edit",btnName:"粘贴"},{fnHandler:"selectAll",icoName:"edit",btnName:"全选"},{fnHandler:"saveFlow",icoName:"edit",btnName:"保存流程"},{iconName:"edit",fnHandler:"addRemark",btnName:"添加备注"},{icoName:"edit",btnName:"对齐方式",children:[{icoName:"edit",fnHandler:"verticaLeft",btnName:"垂直左对齐"},{icoName:"edit",fnHandler:"verticalCenter",btnName:"垂直居中"},{icoName:"edit",fnHandler:"verticalRight",btnName:"垂直右对齐"},{icoName:"edit",fnHandler:"levelUp",btnName:"水平上对齐"},{icoName:"edit",fnHandler:"levelCenter",btnName:"水平居中"},{icoName:"edit",fnHandler:"levelDown",btnName:"水平下对齐"}]}]},node:{menuName:"node-menu",axis:{x:null,y:null},menulists:[{fnHandler:"copyNode",icoName:"edit",btnName:"复制节点"},{fnHandler:"deleteNode",icoName:"edit",btnName:"删除节点"}]},link:{menuName:"link-menu",axis:{x:null,y:null},menulists:[{fnHandler:"deleteLink",icoName:"edit",btnName:"删除连线"}]}}}},a078:function(e,t){var n={layout:"vertical",donation:!1,templateFolder:"project"};e.exports=n},a0ad:function(e,t,n){"use strict";n("0385")},a0d9:function(e,t,n){},a18c:function(e,t,n){"use strict";n.r(t),n.d(t,"constantRoutes",(function(){return c})),n.d(t,"asyncRoutes",(function(){return l}));n("7e5a"),n("cbee"),n("3328");var o=n("6b05"),a=n("c1f7"),r=n("9080"),i=n("ff0b"),c=[{path:"/login",component:function(){return n.e("chunk-a7cd5462").then(n.bind(null,"9ed6"))},hidden:!0},{path:"/403",name:"403",component:function(){return n.e("chunk-46e8fdcc").then(n.bind(null,"00a5"))},hidden:!0},{path:"/404",name:"404",component:function(){return n.e("chunk-00a8a87c").then(n.bind(null,"8cdb"))},hidden:!0}],l=[{path:"/",component:a["default"],redirect:"/index",meta:{title:"首页",icon:"home-4-line",affix:!0,roles:["ADMIN","PERSONAL","FIRM"]},children:[{path:"index",name:"Index",component:function(){return n.e("chunk-a6a84d0e").then(n.bind(null,"37f9"))},meta:{title:"首页",icon:"home-4-line",affix:!0,roles:["ADMIN","PERSONAL","FIRM"]}}]},{path:"/product",component:a["default"],redirect:"/product/table",alwaysShow:!0,meta:{title:"产品",icon:"product-hunt-fill",roles:["ADMIN","PERSONAL","FIRM"]},children:[{path:"table",name:"productTable",component:function(){return n.e("chunk-f3db5bf8").then(n.bind(null,"941a"))},meta:{title:"产品列表",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"]}},{path:"topic/:id",name:"productTopics",hidden:!0,component:function(){return n.e("chunk-1a7fbbd8").then(n.bind(null,"257a"))},meta:{title:"产品主题",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"]}}]},{path:"/device",component:a["default"],redirect:"/device/table",alwaysShow:!0,meta:{title:"设备",icon:"device-fill",roles:["ADMIN","PERSONAL","FIRM"]},children:[{path:"table",name:"deviceTable",component:function(){return n.e("chunk-9448271a").then(n.bind(null,"1508"))},meta:{title:"设备列表",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"]}},{path:"topic/:id",name:"DeviceTopics",hidden:!0,component:function(){return Promise.all([n.e("chunk-7e0ee0a5"),n.e("chunk-835ac8aa"),n.e("chunk-45bc44ea")]).then(n.bind(null,"2e26"))},meta:{title:"设备主题",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"],keepAlive:!0}},{path:"things",name:"ThingsTable",hidden:!0,component:function(){return Promise.all([n.e("chunk-2d0aeaf9"),n.e("chunk-7cf8b14a")]).then(n.bind(null,"65cd"))},meta:{title:"物",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"]}}]},{path:"/venues",component:a["default"],redirect:"/venues/show",alwaysShow:!0,meta:{title:"房间/场地",icon:"archive-drawer-fill",roles:["ADMIN","PERSONAL","FIRM"]},children:[{path:"show",name:"venuesShow",component:function(){return Promise.all([n.e("chunk-2d0aeaf9"),n.e("chunk-34da5851")]).then(n.bind(null,"1b5f"))},meta:{title:"房间/场地",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"]}},{path:"work-flow",name:"WorkFlow",component:i["default"],hidden:!0,meta:{title:"场景联动编辑",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"]}},{path:"things-linkage",name:"ThingsLinkage",component:function(){return n.e("chunk-2d22d7e7").then(n.bind(null,"f876"))},meta:{title:"联动列表",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"]}}]},{path:"/data-view",component:a["default"],redirect:"/data-view/rules-engine",alwaysShow:!0,meta:{title:"数据大屏",icon:"database-line",roles:["ADMIN","PERSONAL","FIRM"]},children:[{path:"rules-engine",name:"rulesEngine",component:r["default"],meta:{title:"规则引擎 流程图",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"]}}]},{path:"/application",component:a["default"],redirect:"/application/table",alwaysShow:!0,meta:{title:"应用",icon:"apps-line",roles:["ADMIN","PERSONAL","FIRM"]},children:[{path:"table",name:"applicationTabe",component:function(){return n.e("chunk-ea38f850").then(n.bind(null,"4699"))},meta:{title:"应用列表",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"]}}]},{path:"/tools",component:a["default"],redirect:"/tools/mqtt",alwaysShow:!0,meta:{title:"工具",icon:"tools-fill",roles:["ADMIN","PERSONAL","FIRM"]},children:[{path:"mqtt",name:"mqttTool",component:function(){return Promise.all([n.e("chunk-7e0ee0a5"),n.e("chunk-835ac8aa"),n.e("chunk-f7e09ca2")]).then(n.bind(null,"3634"))},meta:{title:"MQTT测试工具",icon:"table-2",roles:["ADMIN","PERSONAL","FIRM"]}}]},{path:"/error",name:"Error",component:a["default"],redirect:"/error/403",meta:{title:"错误页",icon:"error-warning-line"},children:[{path:"403",name:"Error403",component:function(){return n.e("chunk-46e8fdcc").then(n.bind(null,"00a5"))},meta:{title:"403",icon:"error-warning-line"}},{path:"404",name:"Error404",component:function(){return n.e("chunk-00a8a87c").then(n.bind(null,"8cdb"))},meta:{title:"404",icon:"error-warning-line"}}]},{path:"/*",redirect:"/404",hidden:!0}],u=Object(o["a"])({history:Object(o["b"])(),routes:c});t["default"]=u},a404:function(e,t,n){var o={"./permissions.js":"a842"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id="a404"},a436:function(e,t,n){"use strict";n.r(t);var o=n("434f"),a={class:"anticon"};function r(e,t,n,r,i,c){var l=Object(o["resolveComponent"])("vab-icon"),u=Object(o["resolveComponent"])("a-sub-menu");return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:n.item.fullPath},{title:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",a,[Object(o["createVNode"])(l,{icon:n.item.meta.icon},null,8,["icon"])]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(n.item.meta.title),1)]})),default:Object(o["withCtx"])((function(){return[Object(o["renderSlot"])(e.$slots,"default")]})),_:3})}var i=n("3f56"),c={name:"Submenu",components:{VabIcon:i["default"]},props:{item:{type:Object,default:function(){return null}},routeChildren:{type:Object,default:function(){return null}}}},l=n("b3f2"),u=n.n(l);const s=u()(c,[["render",r]]);t["default"]=s},a7f9:function(e,t,n){"use strict";n.r(t);var o=n("434f"),a={class:"anticon"};function r(e,t,n,r,i,c){var l=Object(o["resolveComponent"])("vab-icon"),u=Object(o["resolveComponent"])("a-menu-item");return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:n.routeChildren.path,onClickCapture:c.handleLink},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",a,[Object(o["createVNode"])(l,{icon:n.routeChildren.meta.icon},null,8,["icon"])]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(n.routeChildren.meta.title),1)]})),_:1},8,["onClickCapture"])}var i=n("61f7"),c=n("3f56"),l={name:"MenuItem",components:{VabIcon:c["default"]},props:{item:{type:Object,default:function(){return null}},routeChildren:{type:Object,default:function(){return null}}},methods:{handleLink:function(){var e=this.routeChildren.fullPath,t=this.routeChildren.meta.target;"_blank"===t?Object(i["isExternal"])(e)?window.open(e):this.$route.path!==e&&window.open(e.href):Object(i["isExternal"])(e)?window.location.href=e:this.$route.path!==e&&this.$router.push(e)}}},u=n("b3f2"),s=n.n(u);const d=s()(l,[["render",r]]);t["default"]=d},a842:function(e,t,n){"use strict";n.r(t);var o=n("b49e"),a=n("291b"),r=(n("e186"),n("097a"),n("7e5a"),n("882b"),n("a18c")),i=n("4360"),c=n("f8ab"),l=n("f121");r["default"].beforeEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,a){var c,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=i["default"].getters["user/accessToken"],l["loginInterception"]||(c=!0),!c){e.next=42;break}if("/login"!==t.path){e.next=7;break}a({path:"/"}),e.next=40;break;case 7:if(u=["ADMIN","PERSONAL","FIRM"].includes(i["default"].getters["acl/role"]),!u){e.next=12;break}a(),e.next=40;break;case 12:if(e.prev=12,!l["loginInterception"]){e.next=18;break}return e.next=16,i["default"].dispatch("user/getUserInfo");case 16:e.next=20;break;case 18:return e.next=20,i["default"].dispatch("user/setVirtualRoles");case 20:if(s=[],"intelligence"!==l["authentication"]){e.next=27;break}return e.next=24,i["default"].dispatch("routes/setRoutes");case 24:s=e.sent,e.next=31;break;case 27:if("all"!==l["authentication"]){e.next=31;break}return e.next=30,i["default"].dispatch("routes/setAllRoutes");case 30:s=e.sent;case 31:s.forEach((function(e){r["default"].addRoute(e)})),a(Object(o["a"])(Object(o["a"])({},t),{},{replace:!0})),e.next=40;break;case 35:return e.prev=35,e.t0=e["catch"](12),e.next=39,i["default"].dispatch("user/resetAll");case 39:l["recordRoute"]?a({path:"/login",query:{redirect:t.path},replace:!0}):a({path:"/login",replace:!0});case 40:e.next=43;break;case 42:-1!==l["routesWhiteList"].indexOf(t.path)?a():l["recordRoute"]?a({path:"/login",query:{redirect:t.path},replace:!0}):a({path:"/login",replace:!0});case 43:case"end":return e.stop()}}),e,null,[[12,35]])})));return function(t,n,o){return e.apply(this,arguments)}}()),r["default"].afterEach((function(e){document.title=Object(c["default"])(e.meta.title)}))},aed8:function(e,t,n){},af26:function(e,t,n){"use strict";n.r(t);var o=n("434f"),a=Object(o["createTextVNode"])("画布"),r=Object(o["createTextVNode"])("连线"),i=Object(o["createTextVNode"])("贝塞尔曲线"),c=Object(o["createTextVNode"])("直线"),l=Object(o["createTextVNode"])("流程图线"),u=Object(o["createTextVNode"])("状态线"),s=Object(o["createTextVNode"])("默认样式");function d(e,t,n,d,f,m){var p=Object(o["resolveComponent"])("a-divider"),h=Object(o["resolveComponent"])("a-slider"),b=Object(o["resolveComponent"])("a-form-item"),g=Object(o["resolveComponent"])("a-select-option"),v=Object(o["resolveComponent"])("a-select"),w=Object(o["resolveComponent"])("a-switch"),O=Object(o["resolveComponent"])("a-form"),j=Object(o["resolveComponent"])("a-drawer"),y=Object(o["resolveDirective"])("decorator");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(j,{title:"设置",placement:"left",zIndex:10001,width:600,visible:f.settingVisible,onClose:m.close},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{form:f.settingForm,layout:"horizontal"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{orientation:"left"},{default:Object(o["withCtx"])((function(){return[a]})),_:1}),Object(o["createVNode"])(b,{label:"缩小比例","label-col":f.formItemLayout.labelCol,"wrapper-col":f.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(h,{min:.05,max:.5,step:.05,tipFormatter:m.formatterContainerOnceNarrow,onAfterChange:m.setContainerOnceNarrow},null,8,["min","max","step","tipFormatter","onAfterChange"]),[[y,["containerOnceNarrow",{}]]])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(b,{label:"放大比例","label-col":f.formItemLayout.labelCol,"wrapper-col":f.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(h,{min:.05,max:.5,step:.05,tipFormatter:m.formatterContainerOnceEnlarge,onAfterChange:m.setContainerOnceEnlarge},null,8,["min","max","step","tipFormatter","onAfterChange"]),[[y,["containerOnceEnlarge",{}]]])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(p,{orientation:"left"},{default:Object(o["withCtx"])((function(){return[r]})),_:1}),Object(o["createVNode"])(b,{label:"类型","label-col":f.formItemLayout.labelCol,"wrapper-col":f.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(v,{onChange:m.setFlowType},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{value:"Bezier"},{default:Object(o["withCtx"])((function(){return[i]})),_:1}),Object(o["createVNode"])(g,{value:"Straight"},{default:Object(o["withCtx"])((function(){return[c]})),_:1}),Object(o["createVNode"])(g,{value:"Flowchart"},{default:Object(o["withCtx"])((function(){return[l]})),_:1}),Object(o["createVNode"])(g,{value:"StateMachine"},{default:Object(o["withCtx"])((function(){return[u]})),_:1})]})),_:1},8,["onChange"])),[[y,["linkType",{}]]])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(b,{label:"颜色","label-col":f.formItemLayout.labelCol,"wrapper-col":f.formItemLayout.wrapperCol},null,8,["label-col","wrapper-col"]),Object(o["createVNode"])(b,{label:"粗细","label-col":f.formItemLayout.labelCol,"wrapper-col":f.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(h,{min:1,max:10,onAfterChange:m.setStrokeWidth},null,8,["onAfterChange"]),[[y,["linkThickness",{}]]])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(p,{orientation:"left"},{default:Object(o["withCtx"])((function(){return[s]})),_:1}),Object(o["createVNode"])(b,{label:"辅助线","label-col":f.formItemLayout.labelCol,"wrapper-col":f.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(w,{checked:f.isOpenAuxiliaryLine,checkedChildren:"开",unCheckedChildren:"关",onChange:m.toggleOpenAuxiliaryLine},null,8,["checked","onChange"]),[[y,["isOpenAuxiliaryLine",{}]]])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(b,{label:"自动对齐水平间距","label-col":f.formItemLayout.labelCol,"wrapper-col":f.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(h,{min:10,max:800,step:5,onAfterChange:m.setAlignLevelDistance},null,8,["onAfterChange"]),[[y,["alignLevelDistance",{}]]])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(b,{label:"自动对齐垂直间距","label-col":f.formItemLayout.labelCol,"wrapper-col":f.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(h,{min:10,max:800,step:5,onAfterChange:m.setAlignVerticalDistance},null,8,["onAfterChange"]),[[y,["alignVerticalDistance",{}]]])]})),_:1},8,["label-col","wrapper-col"]),Object(o["createVNode"])(b,{label:"微移距离","label-col":f.formItemLayout.labelCol,"wrapper-col":f.formItemLayout.wrapperCol},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(h,{min:1,onAfterChange:m.setMovePx},null,8,["onAfterChange"]),[[y,["movePx",{}]]])]})),_:1},8,["label-col","wrapper-col"])]})),_:1},8,["form"])]})),_:1},8,["visible","onClose"])])}var f=n("9f60"),m={data:function(){return{settingVisible:!1,formItemLayout:{labelCol:{span:6},wrapperCol:{span:15}},initFlag:!1,settingForm:{},isOpenAuxiliaryLine:f["flowConfig"].defaultStyle.isOpenAuxiliaryLine,linkColor:f["flowConfig"].jsPlumbInsConfig.PaintStyle.stroke}},methods:{init:function(){var e=this;this.$nextTick((function(){e.settingForm.setFieldsValue({movePx:f["flowConfig"].defaultStyle.movePx,linkType:f["flowConfig"].jsPlumbInsConfig.Connector[0],linkThickness:f["flowConfig"].jsPlumbInsConfig.PaintStyle.strokeWidth,alignLevelDistance:f["flowConfig"].defaultStyle.alignSpacing.level,alignVerticalDistance:f["flowConfig"].defaultStyle.alignSpacing.vertical,containerOnceNarrow:f["flowConfig"].defaultStyle.containerScale.onceNarrow,containerOnceEnlarge:f["flowConfig"].defaultStyle.containerScale.onceEnlarge})}))},open:function(){this.settingVisible=!0,this.initFlag||(this.init(),this.initFlag=!0)},close:function(){this.settingVisible=!1},setFlowType:function(e){f["flowConfig"].jsPlumbInsConfig.Connector[0]=e},toggleOpenAuxiliaryLine:function(e){this.isOpenAuxiliaryLine=e,f["flowConfig"].defaultStyle.isOpenAuxiliaryLine=e},setMovePx:function(e){f["flowConfig"].defaultStyle.movePx=e},setLinkColor:function(e){this.linkColor=e,f["flowConfig"].jsPlumbInsConfig.PaintStyle.stroke=e},setStrokeWidth:function(e){f["flowConfig"].jsPlumbInsConfig.PaintStyle.strokeWidth=e},setAlignLevelDistance:function(e){f["flowConfig"].defaultStyle.alignSpacing.level=e},setAlignVerticalDistance:function(e){f["flowConfig"].defaultStyle.alignSpacing.vertical=e},formatterContainerOnceNarrow:function(e){return"".concat(100*e,"%")},setContainerOnceNarrow:function(e){f["flowConfig"].defaultStyle.containerScale.onceNarrow=e},formatterContainerOnceEnlarge:function(e){return"".concat(100*e,"%")},setContainerOnceEnlarge:function(e){f["flowConfig"].defaultStyle.containerScale.onceEnlarge=e}}},p=(n("a0ad"),n("b3f2")),h=n.n(p);const b=h()(m,[["render",d]]);t["default"]=b},af5c:function(e,t,n){"use strict";n.r(t);n("7e5a");var o=n("434f"),a={style:{overflow:"hidden",position:"relative",height:"100%"}},r={class:"container-scale"},i={class:"mouse-position"},c=Object(o["createTextVNode"])("流程图信息"),l=Object(o["createTextVNode"])("粘贴"),u=Object(o["createTextVNode"])("全选"),s=Object(o["createTextVNode"])("保存流程"),d=Object(o["createTextVNode"])("添加备注"),f=Object(o["createTextVNode"])("垂直左对齐"),m=Object(o["createTextVNode"])("垂直左对齐"),p=Object(o["createTextVNode"])("垂直右对齐"),h=Object(o["createTextVNode"])("水平居中"),b=Object(o["createTextVNode"])("水平下对齐"),g=Object(o["createTextVNode"])("复制节点"),v=Object(o["createTextVNode"])("删除节点");function w(e,t,n,w,O,j){var y=Object(o["resolveComponent"])("flow-node"),C=Object(o["resolveComponent"])("context-menu-item"),x=Object(o["resolveComponent"])("context-menu-submenu"),N=Object(o["resolveComponent"])("context-menu"),k=Object(o["resolveDirective"])("flowDrag");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["renderSlot"])(e.$slots,"default"),O.container.auxiliaryLine.isOpen&&O.container.auxiliaryLine.isShowXLine?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"auxiliary-line-x",style:Object(o["normalizeStyle"])({top:O.auxiliaryLinePos.y+"px"})},null,4)):Object(o["createCommentVNode"])("",!0),O.container.auxiliaryLine.isOpen&&O.container.auxiliaryLine.isShowYLine?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:1,class:"auxiliary-line-y",style:Object(o["normalizeStyle"])({left:O.auxiliaryLinePos.x+"px"})},null,4)):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{style:{overflow:"hidden",position:"relative",height:"100%"},onDragover:t[9]||(t[9]=function(){return j.allowDrop&&j.allowDrop.apply(j,arguments)}),onDrop:t[10]||(t[10]=function(){return j.drop&&j.drop.apply(j,arguments)})},[Object(o["createElementVNode"])("div",{id:"flowContainer",class:Object(o["normalizeClass"])(["flow-container",{grid:n.flowData.config.showGrid,zoomIn:"zoom-in"===n.currentTool.type,zoomOut:"zoom-out"===n.currentTool.type,canScale:O.container.scaleFlag,canDrag:O.container.dragFlag,canMultiple:O.rectangleMultiple.flag}]),style:Object(o["normalizeStyle"])(j.gridStyle),onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(){return j.containerHandler&&j.containerHandler.apply(j,arguments)}),["stop"])),onMousedown:t[3]||(t[3]=function(){return j.mousedownHandler&&j.mousedownHandler.apply(j,arguments)}),onMousemove:t[4]||(t[4]=function(){return j.mousemoveHandler&&j.mousemoveHandler.apply(j,arguments)}),onMouseup:t[5]||(t[5]=function(){return j.mouseupHandler&&j.mouseupHandler.apply(j,arguments)}),onMousewheel:t[6]||(t[6]=function(){return j.scaleContainer&&j.scaleContainer.apply(j,arguments)}),onDOMMouseScroll:t[7]||(t[7]=function(){return j.scaleContainer&&j.scaleContainer.apply(j,arguments)}),onContextmenu:t[8]||(t[8]=function(){return j.showContainerContextMenu&&j.showContainerContextMenu.apply(j,arguments)})},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.flowData.nodeList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(y,{key:e.id,node:e,plumb:n.plumb,select:O.currentSelect,"onUpdate:select":t[0]||(t[0]=function(e){return O.currentSelect=e}),":selectGroup":O.currentSelectGroup,"onUpdate::selectGroup":t[1]||(t[1]=function(e){return O.currentSelectGroup=e}),currentTool:n.currentTool,onShowNodeContextMenu:j.showNodeContextMenu,onIsMultiple:j.isMultiple,onUpdateNodePos:j.updateNodePos,onAlignForLine:j.alignForLine,onHideAlignLine:j.hideAlignLine},null,8,["node","plumb","select",":selectGroup","currentTool","onShowNodeContextMenu","onIsMultiple","onUpdateNodePos","onAlignForLine","onHideAlignLine"])})),128)),O.rectangleMultiple.flag&&O.rectangleMultiple.multipling?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"rectangle-multiple",style:Object(o["normalizeStyle"])({top:O.rectangleMultiple.position.top+"px",left:O.rectangleMultiple.position.left+"px",width:O.rectangleMultiple.width+"px",height:O.rectangleMultiple.height+"px"})},null,4)):Object(o["createCommentVNode"])("",!0)],38)],32)),[[k]]),Object(o["createElementVNode"])("div",r," 缩放倍数："+Object(o["toDisplayString"])(O.container.scaleShow)+"% ",1),Object(o["createElementVNode"])("div",i," x: "+Object(o["toDisplayString"])(O.mouse.position.x)+", y: "+Object(o["toDisplayString"])(O.mouse.position.y),1),Object(o["createVNode"])(N,{name:"context-flow"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(C,{onItemClickHandle:j.flowInfo,divider:!0},{default:Object(o["withCtx"])((function(){return[c]})),_:1},8,["onItemClickHandle"]),Object(o["createVNode"])(C,{onItemClickHandle:j.paste,divider:!0},{default:Object(o["withCtx"])((function(){return[l]})),_:1},8,["onItemClickHandle"]),Object(o["createVNode"])(C,{onItemClickHandle:j.selectAll,divider:!0},{default:Object(o["withCtx"])((function(){return[u]})),_:1},8,["onItemClickHandle"]),Object(o["createVNode"])(C,{onItemClickHandle:j.saveFlow,divider:!0},{default:Object(o["withCtx"])((function(){return[s]})),_:1},8,["onItemClickHandle"]),Object(o["createVNode"])(C,{onItemClickHandle:j.addRemark,divider:!0},{default:Object(o["withCtx"])((function(){return[d]})),_:1},8,["onItemClickHandle"]),Object(o["createVNode"])(x,{label:"对齐方式",divider:""},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(C,{onItemClickHandle:j.verticaLeft,divider:!0},{default:Object(o["withCtx"])((function(){return[f]})),_:1},8,["onItemClickHandle"]),Object(o["createVNode"])(C,{onItemClickHandle:j.verticalRight,divider:!0},{default:Object(o["withCtx"])((function(){return[m]})),_:1},8,["onItemClickHandle"]),Object(o["createVNode"])(C,{onItemClickHandle:j.levelUp,divider:!0},{default:Object(o["withCtx"])((function(){return[p]})),_:1},8,["onItemClickHandle"]),Object(o["createVNode"])(C,{onItemClickHandle:j.levelCenter,divider:!0},{default:Object(o["withCtx"])((function(){return[h]})),_:1},8,["onItemClickHandle"]),Object(o["createVNode"])(C,{onItemClickHandle:j.levelDown,divider:!0},{default:Object(o["withCtx"])((function(){return[b]})),_:1},8,["onItemClickHandle"])]})),_:1})]})),_:1}),Object(o["createVNode"])(N,{name:"context-node"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(C,{onItemClickHandle:j.copyNode,divider:!0},{default:Object(o["withCtx"])((function(){return[g]})),_:1},8,["onItemClickHandle"]),Object(o["createVNode"])(C,{onItemClickHandle:j.deleteNode,divider:!0},{default:Object(o["withCtx"])((function(){return[v]})),_:1},8,["onItemClickHandle"])]})),_:1})])}n("d994"),n("882b"),n("935e"),n("b2df"),n("373e"),n("8cd3");var O=n("9f60"),j=n("de9a"),y=n("5b69"),C=n("6856"),x={props:["browserType","flowData","plumb","select","selectGroup","currentTool","dragInfo"],components:{FlowNode:y["default"]},directives:{flowDrag:{mounted:function(e,t,n,o){t&&(e.onmousedown=function(t){if(2!=t.button){var n=t.clientX,o=t.clientY;e.style.cursor="move",document.onmousemove=function(t){t.preventDefault();var a=t.clientX-n;n=t.clientX,e.scrollLeft+=-a;var r=t.clientY-o;o=t.clientY,e.scrollTop+=-r},document.onmouseup=function(t){e.style.cursor="auto",document.onmousemove=null,document.onmouseup=null}}})}}},data:function(){return{ctx:null,currentSelect:this.select,currentSelectGroup:this.selectGroup,container:{pos:{top:-4e3,left:-4e3},dragFlag:!1,draging:!1,scale:O["flowConfig"].defaultStyle.containerScale.init,scaleFlag:!1,scaleOrigin:{x:0,y:0},scaleShow:j["AMS"].mul(O["flowConfig"].defaultStyle.containerScale.init,100),auxiliaryLine:{isOpen:O["flowConfig"].defaultStyle.isOpenAuxiliaryLine,isShowXLine:!1,isShowYLine:!1,controlFnTimesFlag:!0}},auxiliaryLinePos:{x:0,y:0},mouse:{position:{x:0,y:0},tempPos:{x:0,y:0}},rectangleMultiple:{flag:!1,multipling:!1,position:{top:0,left:0},height:0,width:0},containerContextMenuData:O["flowConfig"].contextMenu.container,nodeContextMenuData:O["flowConfig"].contextMenu.node,tempLinkId:"",clipboard:[]}},computed:{gridStyle:function(){return{top:"".concat(this.container.pos.top,"px"),left:"".concat(this.container.pos.left,"px"),transform:"scale(".concat(this.container.scale,")"),transformOrigin:"".concat(this.container.scaleOrigin.x,"px ").concat(this.container.scaleOrigin.y,"px")}}},methods:{allowDrop:function(e){e.preventDefault(),this.mousemoveHandler(e)},drop:function(){var e=this,t=this.dragInfo.belongTo,n=this.dragInfo.type;this.$emit("selectTool","drag"),this.$emit("findNodeConfig",t,n,(function(t){t?e.addNewNode(t):e.$message.error("未知的节点类型！")}))},mousedownHandler:function(e){var t=window.event||e;0===t.button&&(this.container.dragFlag&&(this.mouse.tempPos=this.mouse.position,this.container.draging=!0),this.currentSelectGroup=[],this.rectangleMultiple.flag&&(this.mouse.tempPos=this.mouse.position,this.rectangleMultiple.multipling=!0))},mousemoveHandler:function(e){var t=window.event||e;if("flowContainer"===t.target.id)this.mouse.position={x:t.offsetX,y:t.offsetY};else{var n=t.target.className,o=t.target.tagName;"lane-text"!==n&&"lane-text-div"!==n&&"svg"!==o&&"path"!==o&&"I"!==o&&(this.mouse.position.x=t.target.offsetLeft+t.offsetX,this.mouse.position.y=t.target.offsetTop+t.offsetY)}if(this.container.draging){var a=this.container.pos.top+(this.mouse.position.y-this.mouse.tempPos.y),r=this.container.pos.left+(this.mouse.position.x-this.mouse.tempPos.x);a>=0&&(a=0),r>=0&&(r=0),this.container.pos={top:a,left:r}}if(this.rectangleMultiple.multipling){var i=this.mouse.position.y-this.mouse.tempPos.y,c=this.mouse.position.x-this.mouse.tempPos.x,l=this.mouse.tempPos.y,u=this.mouse.tempPos.x;i>=0&&c<0?(c=-c,u-=c):i<0&&c>=0?(i=-i,l-=i):i<0&&c<0&&(i=-i,c=-c,l-=i,u-=c),this.rectangleMultiple.height=i,this.rectangleMultiple.width=c,this.rectangleMultiple.position.top=l,this.rectangleMultiple.position.left=u}},mouseupHandler:function(){this.container.draging&&(this.container.draging=!1),this.rectangleMultiple.multipling&&(this.judgeSelectedNode(),this.rectangleMultiple.multipling=!1,this.rectangleMultiple.width=0,this.rectangleMultiple.height=0)},judgeSelectedNode:function(){var e=this,t=this.rectangleMultiple.position.top,n=this.rectangleMultiple.position.left,o=t+this.rectangleMultiple.height,a=n+this.rectangleMultiple.width,r=this.flowData.nodeList;r.forEach((function(r){r.y>=t&&r.x>=n&&r.y<=o&&r.x<=a&&(e.plumb.addToDragSelection(r.id),e.currentSelectGroup.push(r))}))},scaleContainer:function(e){var t=window.event||e;this.container.scaleFlag&&(2===this.browserType?t.detail<0?this.enlargeContainer():this.narrowContainer():t.deltaY<0?this.enlargeContainer():this.container.scale&&this.narrowContainer())},enlargeContainer:function(){this.container.scaleOrigin.x=this.mouse.position.x,this.container.scaleOrigin.y=this.mouse.position.y;var e=j["AMS"].add(this.container.scale,O["flowConfig"].defaultStyle.containerScale.onceEnlarge);e<=O["flowConfig"].defaultStyle.containerScale.max&&(this.container.scale=e,this.container.scaleShow=j["AMS"].mul(this.container.scale,100),this.plumb.setZoom(this.container.scale))},narrowContainer:function(){this.container.scaleOrigin.x=this.mouse.position.x,this.container.scaleOrigin.y=this.mouse.position.y;var e=j["AMS"].sub(this.container.scale,O["flowConfig"].defaultStyle.containerScale.onceNarrow);e>=O["flowConfig"].defaultStyle.containerScale.min&&(this.container.scale=e,this.container.scaleShow=j["AMS"].mul(this.container.scale,100),this.plumb.setZoom(this.container.scale))},showContainerContextMenu:function(e){var t=window.event||e;Object(C["hideContext"])(e),t.preventDefault(),Object(C["emitContext"])(e,{name:"context-flow",id:[5,6,7]}),this.selectContainer()},showNodeContextMenu:function(e){var t=window.event||e;t.preventDefault(),Object(C["emitContext"])(e,{name:"context-node",id:[1,2,3]})},flowInfo:function(){var e=this.flowData.nodeList,t=this.flowData.linkList;this.$message.info("当前流程图中有 "+e.length+" 个节点，有 "+t.length+" 条连线。")},paste:function(){var e=this,t=0;this.clipboard.forEach((function(n){var o=Object.assign({},n);o.id=o.type+"-"+j["AMS"].getId();var a=e.computeNodePos(e.mouse.position.x+t,e.mouse.position.y+t);o.x=a.x,o.y=a.y,t+=20,e.flowData.nodeList.push(o)}))},selectAll:function(){var e=this;this.flowData.nodeList.forEach((function(t){e.plumb.addToDragSelection(t.id),e.currentSelectGroup.push(t)}))},saveFlow:function(){this.$emit("saveFlow")},checkAlign:function(){return!(this.currentSelectGroup.length<2)||(this.$message.error("请选择至少两个节点！"),!1)},verticaLeft:function(){var e=this;if(this.checkAlign())for(var t=this.flowData.nodeList,n=this.currentSelectGroup,o=n[0].x,a=n[0].y,r=function(r){a=a+n[r-1].height+O["flowConfig"].defaultStyle.alignSpacing.vertical;var i=t.filter((function(e){return e.id===n[r].id}))[0];i.tx=o,i.ty=a,e.plumb.animate(n[r].id,{top:a,left:o},{duration:O["flowConfig"].defaultStyle.alignDuration,complete:function(){i.x=i.tx,i.y=i.ty}})},i=1;i<n.length;i++)r(i)},verticalCenter:function(){var e=this;if(this.checkAlign())for(var t=this.flowData.nodeList,n=this.currentSelectGroup,o=n[0].x,a=n[0].y,r=o,i=function(i){a=a+n[i-1].height+O["flowConfig"].defaultStyle.alignSpacing.vertical,o=r+j["AMS"].div(n[0].width,2)-j["AMS"].div(n[i].width,2);var c=t.filter((function(e){return e.id===n[i].id}))[0];c.tx=o,c.ty=a,e.plumb.animate(n[i].id,{top:a,left:o},{duration:O["flowConfig"].defaultStyle.alignDuration,complete:function(){c.x=c.tx,c.y=c.ty}})},c=1;c<n.length;c++)i(c)},verticalRight:function(){var e=this;if(this.checkAlign())for(var t=this.flowData.nodeList,n=this.currentSelectGroup,o=n[0].x,a=n[0].y,r=o,i=function(i){a=a+n[i-1].height+O["flowConfig"].defaultStyle.alignSpacing.vertical,o=r+n[0].width-n[i].width;var c=t.filter((function(e){return e.id===n[i].id}))[0];c.tx=o,c.ty=a,e.plumb.animate(n[i].id,{top:a,left:o},{duration:O["flowConfig"].defaultStyle.alignDuration,complete:function(){c.x=c.tx,c.y=c.ty}})},c=1;c<n.length;c++)i(c)},levelUp:function(){var e=this;if(this.checkAlign())for(var t=this.flowData.nodeList,n=this.currentSelectGroup,o=n[0].x,a=n[0].y,r=function(r){o=o+n[r-1].width+O["flowConfig"].defaultStyle.alignSpacing.level;var i=t.filter((function(e){return e.id===n[r].id}))[0];i.tx=o,i.ty=a,e.plumb.animate(n[r].id,{top:a,left:o},{duration:O["flowConfig"].defaultStyle.alignDuration,complete:function(){i.x=i.tx,i.y=i.ty}})},i=1;i<n.length;i++)r(i)},levelCenter:function(){var e=this;if(this.checkAlign())for(var t=this.flowData.nodeList,n=this.currentSelectGroup,o=n[0].x,a=n[0].y,r=a,i=function(i){a=r+j["AMS"].div(n[0].height,2)-j["AMS"].div(n[i].height,2),o=o+n[i-1].width+O["flowConfig"].defaultStyle.alignSpacing.level;var c=t.filter((function(e){return e.id===n[i].id}))[0];c.tx=o,c.ty=a,e.plumb.animate(n[i].id,{top:a,left:o},{duration:O["flowConfig"].defaultStyle.alignDuration,complete:function(){c.x=c.tx,c.y=c.ty}})},c=1;c<n.length;c++)i(c)},levelDown:function(){var e=this;if(this.checkAlign())for(var t=this.flowData.nodeList,n=this.currentSelectGroup,o=n[0].x,a=n[0].y,r=a,i=function(i){a=r+n[0].height-n[i].height,o=o+n[i-1].width+O["flowConfig"].defaultStyle.alignSpacing.level;var c=t.filter((function(e){return e.id===n[i].id}))[0];c.tx=o,c.ty=a,e.plumb.animate(n[i].id,{top:a,left:o},{duration:O["flowConfig"].defaultStyle.alignDuration,complete:function(){c.x=c.tx,c.y=c.ty}})},c=1;c<n.length;c++)i(c)},addRemark:function(){this.$message.info("添加备注(待完善)...")},copyNode:function(){this.clipboard=[],this.currentSelectGroup.length>0?this.clipboard=Object.assign([],this.currentSelectGroup):this.currentSelect.id&&this.clipboard.push(this.currentSelect)},getConnectionsByNodeId:function(e){if(null===e||void 0===e)return[];var t=this.plumb.getConnections({source:e}),n=this.plumb.getConnections({target:e});return t.concat(n)},deleteNode:function(){var e=this,t=this.flowData.nodeList,n=this.flowData.linkList,o=[];o.push(Object.assign({},this.currentSelect)),this.flowData.status=O["flowConfig"].flowStatus.LOADING,o.forEach((function(o){console.log(o.id);var a=e.getConnectionsByNodeId(o.id);console.log(a),a.forEach((function(t){n.splice(n.findIndex((function(e){return e.sourceId===t.sourceId&&e.targetId===t.targetId})),1),e.plumb.deleteConnection(e.plumb.getConnections({source:t.sourceId,target:t.targetId})[0])}));var r=t.findIndex((function(e){return e.id===o.id}));t.splice(r,1)})),this.flowData.status=O["flowConfig"].flowStatus.CREATE,this.selectContainer()},addNewNode:function(e){var t=this.mouse.position.x,n=this.mouse.position.y,o=this.computeNodePos(t,n);t=o.x,n=o.y;var a=Object.assign({},e);a.id=a.type+"-"+j["AMS"].getId(),a.height=50,"start"===a.type||"end"===a.type||"event"===a.type||"gateway"===a.type?(a.x=t-25,a.width=50):(a.x=t-60,a.width=120),a.y=n-25,"x-lane"===a.type?(a.height=200,a.width=500):"y-lane"===a.type&&(a.height=500,a.width=200),this.flowData.nodeList.push(a)},computeNodePos:function(e,t){var n=O["flowConfig"].defaultStyle.alignGridPX[0],o=O["flowConfig"].defaultStyle.alignGridPX[1];return e%n&&(e=n-e%n+e),t%o&&(t=o-t%o+t),{x:e,y:t}},containerHandler:function(e){Object(C["hideContext"])(e),this.selectContainer();var t=this.currentTool.type;"zoom-in"===t?this.enlargeContainer():"zoom-out"===t&&this.narrowContainer()},selectContainer:function(){this.currentSelect={},this.$emit("getShortcut")},isMultiple:function(e){e(this.rectangleMultiple.flag)},updateNodePos:function(){var e=this.flowData.nodeList;this.currentSelectGroup.forEach((function(t){var n=parseInt(document.querySelector("#"+t.id).style.left),o=parseInt(document.querySelector("#"+t.id).style.top),a=e.filter((function(e){return e.id===t.id}))[0];a.x=n,a.y=o}))},alignForLine:function(e){var t=this;if(!(this.selectGroup.length>1)&&this.container.auxiliaryLine.controlFnTimesFlag){var n=e.el.id,o=this.flowData.nodeList;o.forEach((function(o){if(n!==o.id){var a=O["flowConfig"].defaultStyle.showAuxiliaryLineDistance,r=e.pos,i=e.el.offsetHeight,c=e.el.offsetWidth,l=r[0]-o.x,u=r[1]-o.y;if(l>=-a&&l<=a||l+c>=-a&&l+c<=a){t.container.auxiliaryLine.isShowYLine=!0,t.auxiliaryLinePos.x=o.x+t.container.pos.left;var s=o.x+o.width/2;s===r[0]+c/2&&(t.auxiliaryLinePos.x=s+t.container.pos.left)}if(u>=-a&&u<=a||u+i>=-a&&u+i<=a){t.container.auxiliaryLine.isShowXLine=!0,t.auxiliaryLinePos.y=o.y+t.container.pos.top;var d=o.y+o.height/2;d===r[1]+i/2&&(t.auxiliaryLinePos.y=d+t.container.pos.left)}}})),this.container.auxiliaryLine.controlFnTimesFlag=!1,setTimeout((function(){t.container.auxiliaryLine.controlFnTimesFlag=!0}),200)}},hideAlignLine:function(){this.container.auxiliaryLine.isOpen&&(this.container.auxiliaryLine.isShowXLine=!1,this.container.auxiliaryLine.isShowYLine=!1)}},watch:{select:function(e){if(this.currentSelect=e,""!==this.tempLinkId){var t=document.querySelector("#"+this.tempLinkId);null!==t&&(document.querySelector("#"+this.tempLinkId).classList.remove("link-active"),this.tempLinkId="")}"link"===this.currentSelect.type&&(this.tempLinkId=this.currentSelect.id,document.querySelector("#"+this.currentSelect.id).classList.add("link-active"))},currentSelect:{handler:function(e){this.$emit("update:select",e)},deep:!0},selectGroup:function(e){this.currentSelectGroup=e,this.currentSelectGroup.length<=0&&this.plumb.clearDragSelection()},currentSelectGroup:{handler:function(e){this.$emit("update:selectGroup",e)},deep:!0}}},N=(n("c0c5"),n("b3f2")),k=n.n(N);const I=k()(x,[["render",w]]);t["default"]=I},b0ff:function(e,t,n){},b2eb:function(e,t,n){"use strict";n.r(t);n("f150");var o,a,r,i=n("e9df"),c=n("d8ad"),l="ws://tot.makerknz.cn:9200/ws/",u=!1,s={Init:function(e){if(r=e,"WebSocket"in window)o=new WebSocket(l+e+"?token="+Object(i["getAccessToken"])());else{if(!("MozWebSocket"in window))return void console.log("您的浏览器不支持 WebSocket!");o=new MozWebSocket(l+e+"?token="+Object(i["getAccessToken"])())}o.onmessage=function(e){m.start(),"ok"!=e.data&&d(e.data)},o.onclose=function(){console.log("连接已关闭"),f(e)},o.onopen=function(){console.log("连接成功"),m.start()},o.onerror=function(t){console.log("数据传输发生错误"),f(e)}},Send:function(e,t,n,a){var r={sender:e,reception:t,body:n,flag:a},i=JSON.stringify(r);console.log("发送消息："+i),o.send(i)},getWebSocket:function(){return o},getStatus:function(){return 0==o.readyState?"未连接":1==o.readyState?"已连接":2==o.readyState?"连接正在关闭":3==o.readyState?"连接已关闭":void 0}};function d(e){var t=JSON.parse(e);switch(t.command){case"THINGS_CHANGED":c["bus"].$emit("THINGS_CHANGED",t.message);break;case"inform":console.log("通知");break;default:console.log("未知消息类型")}}function f(e){u||(u=!0,a&&clearTimeout(a),a=setTimeout((function(){console.log("执行断线重连..."),s.Init(e),u=!1}),4e3))}t["default"]=s;var m={timeout:18e4,timeoutObj:null,serverTimeoutObj:null,start:function(){console.log("开始心跳检测");var e=this;this.timeoutObj&&clearTimeout(this.timeoutObj),this.serverTimeoutObj&&clearTimeout(this.serverTimeoutObj),this.timeoutObj=setTimeout((function(){console.log("心跳检测..."),o.send("HeartBeat:"+r),e.serverTimeoutObj=setTimeout((function(){1!=o.readyState&&o.close()}),e.timeout)}),this.timeout)}}},b3d3:function(e,t,n){},b775:function(e,t,n){"use strict";n.r(t);var o,a=n("1938"),r=(n("7e5a"),n("097a"),n("5e88"),n("d994"),n("f150"),n("4ff3")),i=n.n(r),c=n("f121"),l=n("4360"),u=n("daf0"),s=n.n(u),d=n("a18c"),f=n("61f7"),m=n("893d"),p=function(e,t){switch(e){case 401:m["a"].error(t||"登录失效"),l["default"].dispatch("user/resetAll").catch((function(){}));break;case 403:d["default"].push({path:"/401"}).catch((function(){}));break;default:m["a"].error(t||"后端接口".concat(e,"异常"));break}},h=i.a.create({baseURL:c["baseURL"],timeout:c["requestTimeout"],headers:{"Content-Type":c["contentType"]}});h.interceptors.request.use((function(e){return"get"===e.method&&(e.paramsSerializer=function(e){return s.a.stringify(e,{arrayFormat:"repeat"})}),l["default"].getters["user/accessToken"]&&(e.headers[c["tokenName"]]=l["default"].getters["user/accessToken"]),e.data&&"application/x-www-form-urlencoded;charset=UTF-8"===e.headers["Content-Type"]&&(e.data=s.a.stringify(e.data)),c["debounce"].some((function(t){return e.url.includes(t)})),e}),(function(e){return Promise.reject(e)})),h.interceptors.response.use((function(e){o&&o.close();var t=e.data,n=e.config,r=t.code,i=t.msg,l=Object(f["isArray"])(c["successCode"])?Object(a["a"])(c["successCode"]):[c["successCode"]].concat();return l.includes(r)?t:(p(r,i),Promise.reject("请求异常拦截:"+JSON.stringify({url:n.url,code:r,msg:i})||!1))}),(function(e){o&&o.close();var t=e.response,n=e.message;if(e.response&&e.response.data){var a=t.status,r=t.data;return p(a,r.msg||n),Promise.reject(e)}var i=e.message;if("Network Error"===i&&(i="后端接口连接异常"),i.includes("timeout")&&(i="后端接口请求超时"),i.includes("Request failed with status code")){var c=i.substr(i.length-3);i="后端接口"+c+"异常"}return i.error(i||"后端接口未知异常"),Promise.reject(e)})),t["default"]=h},b97c7:function(e,t,n){"use strict";n("9cf6")},ba5f:function(e,t,n){"use strict";n.r(t);var o=n("434f");function a(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("a-table"),l=Object(o["resolveComponent"])("a-modal");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{title:"快捷键大全",width:"60%",visible:r.modalVisible,okText:"确认",cancelText:"取消",onOk:i.saveSetting,onCancel:i.cancel},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{rowKey:"code",columns:r.columns,dataSource:r.dataSource},null,8,["columns","dataSource"])]})),_:1},8,["visible","onOk","onCancel"])}var r=n("9f60"),i={data:function(){return{modalVisible:!1,columns:[{title:"功能",align:"center",key:"shortcutName",dataIndex:"shortcutName",width:"50%"},{title:"快捷键",align:"center",key:"codeName",dataIndex:"codeName",width:"50%"}],dataSource:[]}},methods:{open:function(){this.modalVisible=!0;var e=Object.assign({},r["flowConfig"].shortcut);for(var t in e)this.dataSource.push(e[t])},close:function(){this.dataSource=[],this.modalVisible=!1},saveSetting:function(){this.close()},cancel:function(){this.close()}}},c=n("b3f2"),l=n.n(c);const u=l()(i,[["render",a]]);t["default"]=u},baac:function(e,t,n){"use strict";n.r(t);var o=n("434f");function a(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("a-input"),l=Object(o["resolveComponent"])("a-form-item"),u=Object(o["resolveComponent"])("a-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(u,{rules:r.rules,ref:"dataForm",model:r.tempItem,"label-width":"80px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称",name:"stepName"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{size:"small",value:r.tempItem.stepName,"onUpdate:value":t[0]||(t[0]=function(e){return r.tempItem.stepName=e}),style:{width:"200px"}},null,8,["value"])]})),_:1})]})),_:1},8,["rules","model"])])}n("7e5a");var r=n("761a");function i(){return{stepName:"新建"}}var c={name:"StartNodeForm",props:{editItem:{type:Object}},data:function(){return{tempItem:i(),rules:{stepName:[{required:!0,trigger:"blur",message:"请填写名称"}]}}},created:function(){this.editItem&&this.editItem.stepName&&(this.tempItem=Object(r["clone"])(this.editItem))},methods:{validateFormData:function(){return new Promise((function(e,t){e()}))},formData:function(){var e=Object(r["clone"])(this.tempItem);return e}}},l=n("b3f2"),u=n.n(l);const s=u()(c,[["render",a]]);t["default"]=s},bb24:function(e,t,n){"use strict";n("b0ff")},bb55:function(e,t,n){},bc38:function(e,t,n){"use strict";n.r(t);n("2723"),n("7e5a"),n("882b"),n("373e"),n("b2df"),n("0211");var o=function(){return{visitedRoutes:[]}},a={visitedRoutes:function(e){return e.visitedRoutes}},r={addVisitedRoute:function(e,t){var n=e.visitedRoutes.find((function(e){return e.path===t.path}));n?t.fullPath!==n.fullPath&&Object.assign(n,t):e.visitedRoutes.push(Object.assign({},t))},delVisitedRoute:function(e,t){e.visitedRoutes.forEach((function(n,o){n.path===t.path&&e.visitedRoutes.splice(o,1)}))},delOthersVisitedRoutes:function(e,t){e.visitedRoutes=e.visitedRoutes.filter((function(e){return e.meta.affix||e.path===t.path}))},delLeftVisitedRoutes:function(e,t){var n=e.visitedRoutes.length;e.visitedRoutes=e.visitedRoutes.filter((function(o){return o.name===t.name&&(n=e.visitedRoutes.indexOf(o)),o.meta.affix||n<=e.visitedRoutes.indexOf(o)}))},delRightVisitedRoutes:function(e,t){var n=e.visitedRoutes.length;e.visitedRoutes=e.visitedRoutes.filter((function(o){return o.name===t.name&&(n=e.visitedRoutes.indexOf(o)),o.meta.affix||n>=e.visitedRoutes.indexOf(o)}))},delAllVisitedRoutes:function(e){e.visitedRoutes=e.visitedRoutes.filter((function(e){return e.meta.affix}))}},i={addVisitedRoute:function(e,t){var n=e.commit;n("addVisitedRoute",t)},delVisitedRoute:function(e,t){var n=e.commit;n("delVisitedRoute",t)},delOthersVisitedRoutes:function(e,t){var n=e.commit;n("delOthersVisitedRoutes",t)},delLeftVisitedRoutes:function(e,t){var n=e.commit;n("delLeftVisitedRoutes",t)},delRightVisitedRoutes:function(e,t){var n=e.commit;n("delRightVisitedRoutes",t)},delAllVisitedRoutes:function(e){var t=e.commit;t("delAllVisitedRoutes")}};t["default"]={state:o,getters:a,mutations:r,actions:i}},c0c5:function(e,t,n){"use strict";n("f0f1")},c1f7:function(e,t,n){"use strict";n.r(t);var o=n("434f");function a(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("vab-logo"),l=Object(o["resolveComponent"])("vab-menu"),u=Object(o["resolveComponent"])("a-menu"),s=Object(o["resolveComponent"])("a-layout-sider"),d=Object(o["resolveComponent"])("menu-unfold-outlined"),f=Object(o["resolveComponent"])("menu-fold-outlined"),m=Object(o["resolveComponent"])("a-col"),p=Object(o["resolveComponent"])("vab-avatar"),h=Object(o["resolveComponent"])("a-row"),b=Object(o["resolveComponent"])("a-layout-header"),g=Object(o["resolveComponent"])("vab-tabs"),v=Object(o["resolveComponent"])("vab-content"),w=Object(o["resolveComponent"])("a-layout");return Object(o["openBlock"])(),Object(o["createBlock"])(w,{class:"vab-layout-wrap"},{default:Object(o["withCtx"])((function(){return["mobile"!==e.device||e.collapse?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"vab-mask",onClick:t[0]||(t[0]=function(){return e.handleFoldSideBar&&e.handleFoldSideBar.apply(e,arguments)})})),Object(o["createVNode"])(s,{collapsible:"",class:Object(o["normalizeClass"])(["vab-sider",i.classObj]),width:"250",collapsed:e.collapse,"onUpdate:collapsed":t[3]||(t[3]=function(t){return e.collapse=t}),trigger:null},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c),Object(o["createVNode"])(u,{class:"vab-menu",theme:"dark",mode:"inline",selectedKeys:r.selectedKeys,"onUpdate:selectedKeys":t[1]||(t[1]=function(e){return r.selectedKeys=e}),openKeys:r.openKeys,"onUpdate:openKeys":t[2]||(t[2]=function(e){return r.openKeys=e})},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.routes,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:e.path,item:e},null,8,["item"])})),128))]})),_:1},8,["selectedKeys","openKeys"])]})),_:1},8,["collapsed","class"]),Object(o["createVNode"])(w,{class:Object(o["normalizeClass"])(["vab-layout","mobile"===e.device?"vab-mobile-layout":""])},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{class:"vab-header"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{xs:12,sm:12,md:12,lg:12,xl:12},{default:Object(o["withCtx"])((function(){return[e.collapse?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,class:"trigger",onClick:e.toggleCollapse},null,8,["onClick"])):(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:1,class:"trigger",onClick:e.toggleCollapse},null,8,["onClick"]))]})),_:1}),Object(o["createVNode"])(m,{xs:12,sm:12,md:12,lg:12,xl:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p)]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(g),Object(o["createVNode"])(v)]})),_:1},8,["class"])]})),_:1})}var r=n("b49e"),i=n("558f"),c=n("83fb"),l=n("d996"),u=n("e9d5"),s=n("4b59"),d=n("767c"),f=n("677c"),m=n("8fd5"),p={components:{VabLogo:i["default"],VabAvatar:c["default"],VabMenu:l["default"],VabTabs:u["default"],VabContent:s["default"],MenuUnfoldOutlined:f["a"],MenuFoldOutlined:m["a"]},data:function(){return{selectedKeys:[],openKeys:[]}},computed:Object(r["a"])(Object(r["a"])({},Object(d["c"])({collapse:"settings/collapse",routes:"routes/routes",device:"settings/device"})),{},{classObj:function(){return{"vab-mobile":"mobile"===this.device,"vab-collapse":this.collapse}}}),watch:{$route:{handler:function(e){var t=e.path,n=e.matched;void 0!==n[0]&&n[0].children.length>1?this.selectedKeys=[t]:this.selectedKeys=[n[0].path],this.openKeys=[n[0].path]},immediate:!0}},beforeMount:function(){window.addEventListener("resize",this.handleLayouts)},beforeUnmount:function(){window.removeEventListener("resize",this.handleLayouts)},mounted:function(){this.handleLayouts()},methods:Object(r["a"])(Object(r["a"])({},Object(d["b"])({toggleDevice:"settings/toggleDevice",handleFoldSideBar:"settings/foldSideBar",toggleCollapse:"settings/toggleCollapse"})),{},{handleLayouts:function(){var e=document.body.getBoundingClientRect().width;if(this.width!==e){var t=e-1<992;this.toggleDevice(t?"mobile":"desktop"),this.width=e}}})},h=(n("b97c7"),n("b3f2")),b=n.n(h);const g=b()(p,[["render",a]]);t["default"]=g},c24f:function(e,t,n){"use strict";n.r(t),n.d(t,"login",(function(){return c})),n.d(t,"socialLogin",(function(){return u})),n.d(t,"getUserInfo",(function(){return d})),n.d(t,"logout",(function(){return f})),n.d(t,"register",(function(){return m})),n.d(t,"registerCode",(function(){return p}));var o=n("28b6"),a=n("291b"),r=(n("e186"),n("b775")),i=n("f121");function c(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r["default"])({url:"/user/login",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return s=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r["default"])({url:"/socialLogin",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function d(e){return Object(r["default"])({url:"/user/user-info",method:"get",data:Object(o["a"])({},i["tokenName"],e)})}function f(){return Object(r["default"])({url:"/user/logout",method:"get"})}function m(e){return Object(r["default"])({url:"/user/register",method:"post",data:e})}function p(e){return Object(r["default"])({url:"/user/register/code",method:"post",data:e})}},c286:function(e,t,n){"use strict";n("8687")},c30a:function(e,t,n){"use strict";n.r(t);n("0211");var o=n("434f"),a=Object(o["createTextVNode"])(" 如果 ");function r(e,t,n,r,i,c){var l=Object(o["resolveComponent"])("a-list-item"),u=Object(o["resolveComponent"])("a-list");return Object(o["openBlock"])(),Object(o["createBlock"])(u,{size:"small",bordered:!1,"data-source":n.engineRules},{renderItem:Object(o["withCtx"])((function(e){var t=e.item;return["startNode"===t.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0},{default:Object(o["withCtx"])((function(){return[a]})),_:1})):"endNode"===t.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" 执行: "+Object(o["toDisplayString"])(t.data.name)+" 设置值为 "+Object(o["toDisplayString"])(t.condition.value),1)]})),_:2},1024)):"nodeNode"===t.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:2},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("     "+Object(o["toDisplayString"])(t.data.name)+" "+Object(o["toDisplayString"])(i.relationalOperatorSelect[t.condition.conditionType])+" "+Object(o["toDisplayString"])(t.condition.value),1)]})),_:2},1024)):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["data-source"])}var i=n("6a05"),c={EQ:"相等",NE:"不相等",LT:"小于",GT:"大于",LE:"小于或等于",GE:"大于或等于"},l={name:"rulesPanel",components:{RecycleScroller:i["a"]},props:{engineRules:{type:Array,default:function(){return[]}}},data:function(){return{relationalOperatorSelect:c}}},u=(n("ca68"),n("b3f2")),s=n.n(u);const d=s()(l,[["render",r],["__scopeId","data-v-1dfe6f2f"]]);t["default"]=d},c6a4:function(e,t,n){"use strict";n.r(t);var o=function(){return{admin:!1,role:[],ability:[]}},a={admin:function(e){return e.admin},role:function(e){return e.role},ability:function(e){return e.ability}},r={setFull:function(e,t){e.admin=t},setRole:function(e,t){e.role=t},setAbility:function(e,t){e.ability=t}},i={setFull:function(e,t){var n=e.commit;n("setFull",t)},setRole:function(e,t){var n=e.commit;n("setRole",t)},setAbility:function(e,t){var n=e.commit;n("setAbility",t)}};t["default"]={state:o,getters:a,mutations:r,actions:i}},c912:function(e,t,n){"use strict";n.r(t),n.d(t,"FLOW_TYPE",(function(){return o})),n.d(t,"FLOW_ITEM_TYPE",(function(){return a})),n.d(t,"FLOW_LIST",(function(){return r})),n.d(t,"FLOW_ALL_LIST",(function(){return i}));var o={action:"action",condition:"condition",flow:"flow",temp:"temp"},a={startNode:"startNode",endNode:"endNode",waitNode:"waitNode",tempNode:"tempNode",nodeNode:"nodeNode",ifNode:"ifNode",expandNode:"expandNode",list:"list"},r={action:[{id:"nodeNode",type:"nodeNode",className:"step-tag",name:"节点",groupType:"action"},{id:"nodeNode2",type:"nodeNode",className:"step-tag",name:"节点1",groupType:"action"}],condition:[{id:"conditionNode",type:"ifNode",className:"step-if",name:"条件判断",groupType:"condition"},{id:"switchNode",type:"expandNode",className:"step-expand",name:"条件分组",groupType:"condition"}],flow:[{id:"startNode",type:"startNode",className:"step-start",name:"start",groupType:"flow",hidden:!0},{id:"stopNode",type:"endNode",className:"step-end",name:"结束",groupType:"flow"}],temp:[{id:"tempNode",type:"tempNode",className:"step-temp",name:"temp",groupType:"temp"}]},i=[{name:"条件节点",type:o.action,ref:"actionFlow",children:r.action},{name:"执行节点",type:o.flow,ref:"flowFlow",children:r.flow},{name:"控制流",type:o.condition,ref:"conditionFlow",children:r.condition}]},ca68:function(e,t,n){"use strict";n("9138")},ceb3:function(e,t,n){},cf05:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAABACAMAAAAEY5ocAAADAFBMVEX////9/f78/Pz9/v/+/v8zqfH+///+/v79/f06RtY4RNYpKSkrpvEgofE2QtU0QNUup/H9/f/7/f/8/v/8/P4uLi76+vsko/EsLCwvPNQwMDAmJiYxPtQoKCja2toyP9U0NDT6/f89rvMxMTH6+v6ioqInpPHN0PVBr/MzMzP5+v7Y2/f7+/zj4+P7+/4wqPH4/P7V1dU4ODiByvc9SdcyMjLo6Omzs7O6urrFxcXh4eFCTdjW7vz29vYlo/Hz+v7o9f35/P3p9f74+f73+P2ip+zy8vLu7u6qqqrz8/P0+v88PDz19f2w3fpeu/UjIyM3q/JveOHy8/w7R9YtOtTr7PtocN/r6+zHx8eenp7Jycn8/P/9/v6mq+3g4vnS6/u1tbXKysrMzMx1dXW/wMDZ2dn39/fc3NyMjIz7/f7e8f3q6uqX0/jBwcG4vfDOzs7w8fxQWtvV2PZ8hOPn6PrT7fzT09PIy/NTXtytra29vb2wsLCoqKjn5+fv+f4eoPDl9PyFy/fr9v1jvvWs3Prb8P3a3Pj8/P319fVFUNlocuDEyPPX19d+fn7Q0NDw8PCPj4/t7e1vb2+amprf39+JiYmSkpJBQUE6rPL19ftLs/NfvPXe4Piwte/b29sppfFFsfPj5Pnk5vlJVNr8/f3u9/xye+LN0PVQtfMXnvDK6fvP6vvCxfKIj+ZWYdxWVlZ/h+VjbN9KSkq5ubnY7/zDw8OmpqaYmJj09PX2+/59yPbt7vtOTk5ncN8qN9NeaN34+/6epOuQlujC5fpTU1OUm+l2f+Ld3d2bm5t6enqLzvdvw/ar2/mkqexrdOGc1fni8v2p2/pHsvPc3vhbZd1NWdpha95MtPOZoOrG5/u+wvK1uu/5+fmrsO1cXFyUlJRkZGTl5eWGhoaWlpar3PnQ0/Vmv/ZDQ0Oa1PlhvfWqr+294/v1+fuh1/gcn/CNlOcnM9MyqPJ4xvYfHx/z+P3S1fYXFxeDi+WVlZWEhIRWuPTX7fxUtvJDr/Pp6vrR6vrkw4XGAAALbklEQVRo3uWbCVwTVx7HXzLTeUOQTANJDGeMJAoS0FAIlxS7gMKKCiIFLCooAdSqiMrlsa5tPVEE8azHqtVPva0U0GqrrQf1wNW1H63KtqX32u327qfd7tZ9b2ZyIUHorjJxf36ETCYzzHf+73+9NwGgZ0TrlXoaivEP8H8mSNMQ0nr9te0ZxQkhItKygyJlMvybFJHWNwHpFFALBrkTBEUA9J9wJ2z3oE0PgiA83AcdW/C7K5ieXrJ99vEULUHYoFEcMklSToc+CHMDCkNQBGW7B21SFNqD6BE8xBJlFKfEh7Q7A+k8sPZyp4AFmGq3j+L3UYRmEERODmFKQkKIjHxEvNh2jFOOP+XB/Y6P18rJRxHdsSj+rsiRELrT0W9OnAXAC6l9sQZe6Ba6eUDISNK5xrscRyayJcbnFQAG93ocq/cT9x3kHaEjcJJgrU45Bfn4O/EI/yu11OVpjP4YVnfRzdGcJeeTmuDNP/vdsDJ0zQc8XVw6Qu+eODdnvR1L0KaP3x/zxl+Rj76Lyf8X6Jgew8uQ7MoYwZHPYtTlKQCUqCUO0Inu42N4UiZC/wRMnrCbkaj7oztQzriY0bf1wnIzo+MytgseT1krN9bHSRmX5oSqlIM+LsxlLQAtaLhLpIz6IEpuAX/C2nABVWpYcRqPrrBTFovz+DJ5iHyyYNET0hAxsx+A0YxUIo2Zef3wdAA0QzhN+fJZViN+ryHswhVF4k6GgGSnDk8+ExISIpcJNNBpd6NRLo0pBmDF4QNlo7fPLo632bsowO1JJLd/LmhvX9SxuWs07gTVmbuLntFqtXKhOvt0Bo1xyRYUx7Qd7B3yMhvvej0Xh9oSe6t7YHSNB+XA4lx7LtcOEGw5fw359s63VlgBtBmf/OAInaJszU54aDST3SnH5Bh9QLw2ZLIgs5vs8hs738zgU9zm8Qd2n1tevvP1jtFJyp6d9EBm9yA6rubM6KiJC5EJ0ug/+BzezlfwiYeXqSWMmpFKHaGjuswWHbO7uxOdjHfk6yFygTq6/PJtfOkyOQCLpT5sPcPldQv6jX64jek3EqHnELw1+RuA2AkPDwI4p2aPx9lt8bnZAJw1g9uhx236JhXpm7+hSYgcUQ6072WwvzsrOtavadJlQQC85WNBRwN+wdXnsa6ennNzL9LNwV9cff7Sxx9fGmE7I+HsujOTUe9OAMevM7ZWn+PGas+3kNfL/2Df6Nf9Dlaw2iKVungmoqEvsRvwlvaF5abpp0b2w9sD+3a/izG3L0ILd+M8EbH0TQAyxrg4Qkcz678VHdfwIXIgQHRqOtufpyP0IE8XW1+/ss2CTncfnbRBl8tlQjT6ZnaUS9JvAXBbbSFPvw7Aqd48Ok13DZ3CtZ1G076mkSF2IRqdnMXyStIXowBvjXLSNFTZ2aOLLegOQhzpoTm2YNeiBRZyLEBW5xujV+VFl07TZeuwKldtbSgQAvonYWM8sXxQ23ade4n1NZqM3rWHi/AXzeg3uAj/pAN0CrPHxcVZ5ubQvA76OcPr0In1oa428g6NFgJ6Rn9ek1Ex19+iss1ojW3fnAl3J0zYd4VHF7+67+5d9MYcsisDnpucQjKG+ioU4YGBXgqVytXX19XXdVQT7QR5D/LRnUVnhZaQHeZ0ql1px85LwknfuXqPGuUdHnrivdqVKychGZ2E3MzOgr+E0TuJVqivI4ESySaqGXW1q5Pm5eYbMo/GFiDFxt7379KtytgH/mTCMU6DzNsa67Z+f0ti4v6yFS0t41rGXaPp7W8mIrVssb0mcWFzZk2mMbjOZPIrLTUYTHVbTVFFqz/Mpc2DHk9MJes7uYLq0vk1mVPbggtNflUGg6GqrtnPoFu7emX1g0bf1DcAKfUivz4KLjyGtwP6LQJg45iwsDCGYdLDwtKXTafpLUwY1jt2131IcejQmRNHPgsdPryP//DQ4Z8N76NSKEbV8ybvwsJLhPeRQ2fOHDmCDg71Cg0NXb8+VKHw8j6jfNDoG3pxDakZ/Yne3ELbKYSulpglXVYC9V/5sK9P2h5eNRyHbJVK4eXl5e/l7++Frto/XKEwga6Sw5XeKusp+DP4B7p+kPyg0fsOxLm634tWdC6ZLwJwo7XCkc4shhvT2LQv3W074KNDFX36BIaHB4aji0YKD0Sb/irfYOuM9H2KGfq8K3cG/hT+6Ax9wsNHfbD0YaO/xqG7TYF26Cfl8Pg7UvRKPXOjLbqy9juUrVDWwmZDcvX19vZVKVYe5Usac/Tr5AryvNEhruwZ8ClUrmhbpVpfCh46+pMs+rZf7NGvQxi/U4LJf7UP8FOLiiLqDXmVUX6maKOxLS+36f3crTNQDCcJQuZoCsMurdP1kyoi8gz5+aVbC41GoyG/cV32qrqHkP8cWP3xOXbokuUQJoRJJOqTx+/BaFeeQH6b5FsWoKzMz8uqzzMZcPheFVlfH1kRZX+IvrM786DDXO+RZgO95saGuW2DIbxm7d7V0yFckc4waSnd/wtjVYHrUdj39vXFzoD141xBFC1scvt36qfuvFP+ceCGDQEBG1JfhbDE2sL6bIfwAFNelgC6/3CM8YSvAseuwEAcwJBU7y0VBPqQhVhDFl36/M+fP/v5s1+il7uuLNy1CD0CFmR19Z1BEN5pQR0OKF6h7e6fmIuqdhzKfFE5i3qXUT9mCati/Re3rpb6FC5bufqVR0dZfUyaFoIE/LkdJ8u6fe6CGVFzIyLqK6dV5jZOqi2qiIgVFPqgkdwyw1/+zhXsLDpebPb0TI+ZubyES2gpZyXX/7uJ56HVSiAwxb1oj47Zg2JmvnM48c6715YksOQZt8oZzyDwqCnuOR79e9rCnhC0OSMeQr6C2TGrXC31PEs+sug3htBWdl5gAIpsxTGM1IU5GN+Fc1ldmVYqxbi9E4uV1hJQbJ6dssZ5qNfrYc8NeG5d7cZCtjE308s37ljR//a5XwHY74kfPhh//zMNy22sbKUjY8H85tZ576+uEIPkxnUfZUdtBTVZQG+CNXMbq9g70NAYqQRj60CrHx259qM183sM/dNtA1FdN3DT91b08bMOnHu9fBnz9VtoTe6g1EWq7oKjx66ZWN0QEVvbBBqym88XFhohaDXpPjQYkkDue9XBjbGrTZnvG3DKaxwWuQaunSSuWZes82uObu0pdGLwF3v3nr55et/pEaye30XTJYyPmkHPW4SNBqCMcZH63HIwi2N2DLw9MRuttSTVTUsKLtRFF7UFs61nlg7QuuqGyuCsytxKNDB0YtD2NnpfNzU/Iqr67aONdW3Dei6vT56cw85EfctNw7rdpWk+r49BTxQNeJphYkockdtGhroI1K9FGbNqdIXz5teu+zAK35GGbAAiKxva8mY0F+UB0LpmGJg2D89SzKg8qquaV1D08+rcnpqptJqO79d7/ULzJY36FfTE8BYfz4P9O5254w8n637Wk9XZU+vFpnVzmz+iue/+TEMmrjvvR2f/tLQhAoDMJAiGZYsB/GloxNC6tU1H57ZC2OPk96Azy0bj8C49W+zgMEtGEIlEUCRqrUiqWtdQnVRAr2xqO19laNbz6JlHjKBpLShoKjWtxRMZDRXNuRWgMRPoPigoijIZlgoHXcSiMy4otMnS0hbLOzzKjC224iuzJo4V6TOXgORgfWlW1kSMlNmMEl2wGEQjj66ZmF/IJr68hspWMFUJkvNg3bSssdU9DG5FH8zW8D4xOKgvnq4FnZOLbUyPleMcX36AjtBLpEzaceyEAxwdR9uuTtiQi0inQLcnhxf3/IHVBAhnz/okoZPw0x4dw4ucyertyOHCF6ZgvXDK/AbV2ZH26FZ26ATo8P7q9Ei7NamXeHSU4wT+tYeukTtgt+6mbWUxutDRIfyt7LBDdJHIBp1yfvCO0O/5SE6OFZxD70Gz/wdcBOELPsyE5gAAAABJRU5ErkJggg=="},d307:function(e,t,n){var o={"./acl.js":"c6a4","./routes.js":"66f7","./settings.js":"0781","./tagsBar.js":"bc38","./user.js":"0f9a"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id="d307"},d834:function(e,t,n){"use strict";n.r(t),n.d(t,"getWorkFlowNode",(function(){return r})),n.d(t,"updateRules",(function(){return c})),n.d(t,"getThingsLinkage",(function(){return u})),n.d(t,"getVenuesThingsLinkage",(function(){return d})),n.d(t,"addRules",(function(){return m})),n.d(t,"deleteLinkage",(function(){return h}));var o=n("291b"),a=(n("e186"),n("b775"));function r(e){return i.apply(this,arguments)}function i(){return i=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["default"])({url:"/things-linkage/work-flow/"+t,method:"get"}));case 1:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function c(e,t){return l.apply(this,arguments)}function l(){return l=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["default"])({url:"/things-linkage/update-rules/"+t,method:"put",data:n}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return s=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["default"])({url:"/things-linkage/"+t,method:"get"}));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["default"])({url:"/things-linkage/page",method:"get",params:t}));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["default"])({url:"/things-linkage/add",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return b=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["default"])({url:"/things-linkage/"+t,method:"delete"}));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}},d8ad:function(e,t,n){"use strict";n.r(t),n.d(t,"bus",(function(){return r}));var o=n("02aa"),a=Object(o["a"])(),r={$emit:a.emit,$on:a.on,$off:a.off}},d996:function(e,t,n){"use strict";n.r(t);var o=n("434f");function a(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("vab-menu");return n.item.hidden?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(r.menuComponent),{key:0,item:n.item,"route-children":r.routeChildren},{default:Object(o["withCtx"])((function(){return[n.item.children&&n.item.children.length?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(n.item.children,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.path,item:e},null,8,["item"])})),128)):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["item","route-children"]))}n("b2df"),n("7e5a");var r=n("a7f9"),i=n("a436"),c={name:"VabMenu",components:{MenuItem:r["default"],Submenu:i["default"]},props:{item:{type:Object,required:!0}},data:function(){return{routeChildren:{},menuComponent:""}},created:function(){var e=this.handleChildren(this.item.children);0===e.length?(this.menuComponent="MenuItem",this.routeChildren=this.item):1===e.length&&!0!==this.item.alwaysShow?(this.menuComponent="MenuItem",this.routeChildren=e[0]):this.menuComponent="Submenu"},methods:{handleChildren:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null===e?[]:e.filter((function(e){return!0!==e.hidden}))}}},l=(n("e84a"),n("b3f2")),u=n.n(l);const s=u()(c,[["render",a]]);t["default"]=s},dabb:function(e,t,n){"use strict";n.r(t),n.d(t,"addClass",(function(){return a})),n.d(t,"removeClass",(function(){return r})),n.d(t,"hasClass",(function(){return i})),n.d(t,"getWidth",(function(){return l})),n.d(t,"getHeight",(function(){return u}));n("cb0b"),n("a9bd"),n("1669"),n("4fe0");var o=function(e){var t=/^\s*(.*?)\s+$/;return e.replace(t,"$1")};function a(e,t){if(e&&t){for(var n=e.className,o=(t||"").split(" "),a=0,r=o.length;a<r;a++){var c=o[a];c&&(e.classList?e.classList.add(c):i(e,c)||(n+=" "+c))}e.classList||(e.className=n)}}function r(e,t){if(e&&t){for(var n=" "+e.className+" ",a=(t||"").split(" "),r=0,c=a.length;r<c;r++){var l=a[r];l&&(e.classList?e.classList.remove(l):i(e,l)||(n=n.replace(" "+l+" "," ")))}e.classList||(e.className=o(n))}}function i(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("classNames should not contain space");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function c(e,t){try{return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}catch(n){return null}}function l(e){var t=c(e,"width");return"auto"===t&&(t=e.offsetWidth),parseFloat(t)}function u(e){var t=c(e,"height");return"auto"===t&&(t=e.offsetHeight),parseFloat(t)}},de9a:function(e,t,n){"use strict";n.r(t),n.d(t,"AMS",(function(){return a}));n("797a"),n("cb0b"),n("a9bd"),n("200b"),n("9787"),n("1669"),n("7e5a"),n("7223"),n("0b9a");var o=n("9f60"),a={seqNo:1,consoleLog:function(e){for(var t="",n=0,o=e.length;n<o;n++)t+=e[n]+"\n";console.log("%c"+t,"color: red; font-weight: bold;")},getId:function(){var e=o["flowConfig"].idType;if("string"==typeof e){if("uuid"==e)return this.getUUID();if("time_stamp"==e)return this.getTimeStamp()}else if(e instanceof Array){if("time_stamp_and_sequence"==e[0])return this.getSequence(e[1]);if("time_stamp_and_sequence"==e[0])return this.getTimeStampAndSequence(e[1]);if("custom"==e[0])return e[1]()}},getUUID:function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var o=e.join("");return o.replace(/-/g,"")},getTimeStamp:function(){return(new Date).getTime()},getSequence:function(e){var t=new Array(e).fill("0").join("");return(t+this.seqNo++).slice(-e)},getTimeStampAndSequence:function(e){return this.getTimeStamp()+this.getSequence(e)},add:function(e,t){var n,o,a;try{n=e.toString().split(".")[1].length}catch(r){n=0}try{o=t.toString().split(".")[1].length}catch(r){o=0}return a=Math.pow(10,Math.max(n,o)),(this.mul(e,a)+this.mul(t,a))/a},sub:function(e,t){var n,o,a;try{n=e.toString().split(".")[1].length}catch(r){n=0}try{o=t.toString().split(".")[1].length}catch(r){o=0}return a=Math.pow(10,Math.max(n,o)),(this.mul(e,a)-this.mul(t,a))/a},mul:function(e,t){var n=0,o=e.toString(),a=t.toString();try{n+=o.split(".")[1].length}catch(r){}try{n+=a.split(".")[1].length}catch(r){}return Number(o.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,n)},div:function(e,t){var n,o,a=0,r=0;try{a=e.toString().split(".")[1].length}catch(i){}try{r=t.toString().split(".")[1].length}catch(i){}return n=Number(e.toString().replace(".","")),o=Number(t.toString().replace(".","")),this.mul(n/o,Math.pow(10,r-a))}}},e46b:function(e,t,n){},e84a:function(e,t,n){"use strict";n("ebe8")},e9d5:function(e,t,n){"use strict";n.r(t);var o=n("434f"),a={class:"vab-tabs"},r={class:"vab-tabs-left-panel"},i={class:"vab-tabs-right-panel"},c=Object(o["createElementVNode"])("a",null,"关闭其他",-1),l=Object(o["createElementVNode"])("a",null,"关闭左侧",-1),u=Object(o["createElementVNode"])("a",null,"关闭右侧",-1),s=Object(o["createElementVNode"])("a",null,"关闭全部",-1),d=Object(o["createTextVNode"])(" 更多 ");function f(e,t,n,f,m,p){var h=Object(o["resolveComponent"])("a-tab-pane"),b=Object(o["resolveComponent"])("a-tabs"),g=Object(o["resolveComponent"])("a-menu-item"),v=Object(o["resolveComponent"])("a-menu"),w=Object(o["resolveComponent"])("DownOutlined"),O=Object(o["resolveComponent"])("a-button"),j=Object(o["resolveComponent"])("a-dropdown");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(b,{onTabClick:p.handleTabClick,onEdit:p.handleTabRemove,activeKey:m.tabActive,"onUpdate:activeKey":t[0]||(t[0]=function(e){return m.tabActive=e}),"hide-add":"",type:"editable-card"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.visitedRoutes,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:e.fullPath,closable:!p.isAffix(e),tab:e.meta.title},null,8,["closable","tab"])})),128))]})),_:1},8,["onTabClick","onEdit","activeKey"])]),Object(o["createElementVNode"])("div",i,[Object(o["createVNode"])(j,null,{overlay:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{onClick:p.handleClick},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{key:"closeOthersTabs"},{default:Object(o["withCtx"])((function(){return[c]})),_:1}),Object(o["createVNode"])(g,{key:"closeLeftTabs"},{default:Object(o["withCtx"])((function(){return[l]})),_:1}),Object(o["createVNode"])(g,{key:"closeRightTabs"},{default:Object(o["withCtx"])((function(){return[u]})),_:1}),Object(o["createVNode"])(g,{key:"closeAllTabs"},{default:Object(o["withCtx"])((function(){return[s]})),_:1})]})),_:1},8,["onClick"])]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{style:{"margin-left":"8px"}},{default:Object(o["withCtx"])((function(){return[d,Object(o["createVNode"])(w)]})),_:1})]})),_:1})])])}var m=n("291b"),p=n("b49e"),h=(n("e186"),n("7e5a"),n("882b"),n("0211"),n("457d"),n("b2df"),n("2723"),n("9787"),n("0efb")),b=n("767c"),g={name:"VabTabs",components:{DownOutlined:h["a"]},data:function(){return{affixTabs:[],tabActive:null,created:!1}},computed:Object(p["a"])({},Object(b["c"])({visitedRoutes:"tagsBar/visitedRoutes",routes:"routes/routes"})),watch:{$route:{handler:function(e){this.addTabs(e)}}},created:function(){this.initAffixTabs(this.routes),this.addTabs(this.$route)},methods:Object(p["a"])(Object(p["a"])({},Object(b["b"])({addVisitedRoute:"tagsBar/addVisitedRoute",delVisitedRoute:"tagsBar/delVisitedRoute",delOthersVisitedRoutes:"tagsBar/delOthersVisitedRoutes",delLeftVisitedRoutes:"tagsBar/delLeftVisitedRoutes",delRightVisitedRoutes:"tagsBar/delRightVisitedRoutes",delAllVisitedRoutes:"tagsBar/delAllVisitedRoutes"})),{},{initAffixTabs:function(e){var t=this;e.forEach((function(e){e.meta&&e.meta.affix&&t.addTabs(e),e.children&&t.initAffixTabs(e.children)}))},addTabs:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.name||!e.meta||!0===e.meta.tagHidden){n.next=6;break}return o=[e.name],e.matched&&(o=e.matched.map((function(e){return e.name}))),n.next=5,t.addVisitedRoute({path:e.path,fullPath:e.fullPath,query:e.query,params:e.params,name:e.name,matched:o,meta:Object(p["a"])({},e.meta)});case 5:t.tabActive=e.fullPath;case 6:case"end":return n.stop()}}),n)})))()},isActive:function(e){return e.path===this.$route.path},isAffix:function(e){return e.meta&&e.meta.affix},handleTabClick:function(e){var t=this.visitedRoutes.filter((function(t){return t.path===e}))[0];this.$route.fullPath!==t.fullPath&&this.$router.push(t)},handleTabRemove:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.visitedRoutes.find((function(t){return e===t.fullPath})),n.next=3,t.delVisitedRoute(o);case 3:t.isActive(o)&&t.toLastTag();case 4:case"end":return n.stop()}}),n)})))()},handleClick:function(e){var t=e.key;switch(t){case"closeOthersTabs":this.closeOthersTabs();break;case"closeLeftTabs":this.closeLeftTabs();break;case"closeRightTabs":this.closeRightTabs();break;case"closeAllTabs":this.closeAllTabs();break}},closeSelectedTag:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.delVisitedRoute(e);case 2:t.isActive(e)&&t.toLastTag();case 3:case"end":return n.stop()}}),n)})))()},closeOthersTabs:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.delOthersVisitedRoutes(e.toThisTag());case 2:case"end":return t.stop()}}),t)})))()},closeLeftTabs:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.delLeftVisitedRoutes(e.toThisTag());case 2:case"end":return t.stop()}}),t)})))()},closeRightTabs:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.delRightVisitedRoutes(e.toThisTag());case 2:case"end":return t.stop()}}),t)})))()},closeAllTabs:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.delAllVisitedRoutes();case 2:if(!e.affixTabs.some((function(t){return t.path===e.toThisTag().path}))){t.next=4;break}return t.abrupt("return");case 4:e.toLastTag();case 5:case"end":return t.stop()}}),t)})))()},toLastTag:function(){var e=this.visitedRoutes.slice(-1)[0];e?this.$router.push(e):this.$router.push("/")},toThisTag:function(){var e=this,t=this.visitedRoutes.find((function(t){return t.fullPath===e.$route.fullPath}));return this.$route.path!==t.path&&this.$router.push(t),t}})},v=(n("f6fc"),n("b3f2")),w=n.n(v);const O=w()(g,[["render",f]]);t["default"]=O},e9df:function(e,t,n){"use strict";n.r(t),n.d(t,"getAccessToken",(function(){return i})),n.d(t,"setAccessToken",(function(){return c})),n.d(t,"removeAccessToken",(function(){return l}));var o=n("f121"),a=n("5cf7"),r=n.n(a);function i(){return o["storage"]?"localStorage"===o["storage"]?localStorage.getItem(o["tokenTableName"]):"sessionStorage"===o["storage"]?sessionStorage.getItem(o["tokenTableName"]):"cookie"===o["storage"]?r.a.get(o["tokenTableName"]):localStorage.getItem(o["tokenTableName"]):localStorage.getItem(o["tokenTableName"])}function c(e){return o["storage"]?"localStorage"===o["storage"]?localStorage.setItem(o["tokenTableName"],e):"sessionStorage"===o["storage"]?sessionStorage.setItem(o["tokenTableName"],e):"cookie"===o["storage"]?r.a.set(o["tokenTableName"],e):localStorage.setItem(o["tokenTableName"],e):localStorage.setItem(o["tokenTableName"],e)}function l(){return o["storage"]?"localStorage"===o["storage"]?localStorage.removeItem(o["tokenTableName"]):"sessionStorage"===o["storage"]?sessionStorage.clear():"cookie"===o["storage"]?r.a.remove(o["tokenTableName"]):localStorage.removeItem(o["tokenTableName"]):localStorage.removeItem(o["tokenTableName"])}},ebe8:function(e,t,n){},ec48:function(e,t,n){"use strict";n("e46b")},ed76:function(e,t,n){"use strict";n.r(t);var o=n("434f"),a=["onDragstart"];function r(e,t,n,r,i,c){var l=Object(o["resolveComponent"])("a-tooltip"),u=Object(o["resolveComponent"])("a-list-item"),s=Object(o["resolveComponent"])("a-list");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{grid:{gutter:0,column:1}},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.nodeList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:e.type,class:"ef-node-menu-li"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{title:e.nodeName,placement:"right"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{class:"node-item",draggable:"true",onDragstart:function(t){return c.dragNode(e.type,n.type)}},[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(e.icon)},null,2),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.nodeName),1)],40,a)]})),_:2},1032,["title"])]})),_:2},1024)})),128))]})),_:1})}var i={name:"NodeList",props:{nodeList:{type:Array,default:function(){return[]}},type:{type:String,default:""}},methods:{dragNode:function(e,t){this.$emit("setDragInfo",{type:e,belongTo:t})}}},c=(n("ec48"),n("b3f2")),l=n.n(c);const u=l()(i,[["render",r],["__scopeId","data-v-c13891c6"]]);t["default"]=u},f0f1:function(e,t,n){},f121:function(e,t,n){var o=n("6364"),a=o.setting,r=o.theme,i=o.network,c=n("a078");e.exports=Object.assign({},a,r,i,c)},f4d0:function(e,t,n){"use strict";n.r(t),n.d(t,"getVenuesList",(function(){return r})),n.d(t,"addVenues",(function(){return c})),n.d(t,"getVenuesThings",(function(){return u})),n.d(t,"deleteVenues",(function(){return d}));var o=n("291b"),a=(n("e186"),n("b775"));function r(e){return i.apply(this,arguments)}function i(){return i=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["default"])({url:"/venues/list",method:"get"}));case 1:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return l=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["default"])({url:"/venues/add",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return s=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["default"])({url:"/venues/things/"+t,method:"get"}));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["default"])({url:"/venues/"+t,method:"delete"}));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}},f6fc:function(e,t,n){"use strict";n("b3d3")},f8ab:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));n("797a");var o=n("f121");function a(e){var t=[];return e&&t.push(e),o["title"]&&t.push(o["title"]),o["titleReverse"]&&(t=t.reverse()),t.join(o["titleSeparator"])}},fcaa:function(e,t){var n={publicPath:"",outputDir:"../deploy/nginx/www/product-frontend",assetsDir:"static",lintOnSave:!1,transpileDependencies:["vue-echarts","resize-detector"],baseURL:"/api",title:"一二一物联",titleSeparator:" - ",titleReverse:!1,abbreviation:"OneTwoOne",devPort:"9999",version:"1.0.0",copyright:"1461706290@qq.com",keepAliveMaxNum:99,routerMode:"hash",routesWhiteList:["/login","/register","/callback","/404","/403"],cachedViews:["DeviceTopics"],loadingText:"正在加载中...",tokenName:"accessToken",tokenTableName:"accessToken",storage:"localStorage",recordRoute:!0,logo:"vuejs-fill",i18n:"zh",errorLog:["development","production"],loginInterception:!0,loginRSA:!1,authentication:"intelligence",rolesControl:!0,uniqueOpened:!1,defaultOpeneds:["/vab"],debounce:["doEdit"],providePlugin:{},build7z:!1,templateFolder:"project",donation:!1,openFirstMenu:!0};e.exports=n},ff0b:function(e,t,n){"use strict";n.r(t);var o=n("b49e"),a=(n("0211"),n("434f")),r={class:"flow-layout"},i={key:0,class:"rules-panel"},c={class:"rules-panel-close"},l={class:"flow-tools"},u={class:"tool-item"},s=["data-zoom"],d={class:"zoom-btn"},f={class:"zoom-btn"},m=["onMouseup","id","onClick"],p={class:"node-content"},h={class:"flow-item node"},b={class:"step-img"},g=["src"],v={class:"step-title"},w={class:"flow-text"},O={class:"text-line"},j=["onClick"],y={class:"flow-item node-square"},C={class:"square"},x={class:"flow-text"},N={class:"text-line"},k={class:"text-line1"},I={key:0,class:"text-content"},S={class:"flow-item node node-circle"},T={class:"flow-text"},F={class:"text-line"},L=["title","data-id","data-type","data-group","data-nodeData"],V={class:"step-img"},E=["src"],D={class:"step-title"},P=["title","data-id","data-type","data-group","data-nodeData"],_={class:"step-img"},B=["src"],R=["title","data-id","data-type","data-group","data-itemData"],A={class:"square"},M={key:1,class:"dialog-body"},z={key:0,class:"pre-show",ref:"preShow"},$={slot:"footer",class:"dialog-footer"},G=Object(a["createTextVNode"])("关 闭");function U(e,t,n,U,H,q){var W=Object(a["resolveComponent"])("rules-panel"),Y=Object(a["resolveComponent"])("vab-icon"),J=Object(a["resolveComponent"])("a-button"),X=Object(a["resolveComponent"])("a-spin"),Z=Object(a["resolveComponent"])("a-tooltip"),K=Object(a["resolveComponent"])("a-popconfirm"),Q=Object(a["resolveComponent"])("draggable"),ee=Object(a["resolveComponent"])("pane"),te=Object(a["resolveComponent"])("a-collapse-panel"),ne=Object(a["resolveComponent"])("a-collapse"),oe=Object(a["resolveComponent"])("splitpanes"),ae=Object(a["resolveComponent"])("list-form"),re=Object(a["resolveComponent"])("a-modal"),ie=Object(a["resolveDirective"])("flowDrag");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",r,[H.rulesPanelVisible?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",i,[Object(a["createVNode"])(W,{engineRules:H.engineRules},null,8,["engineRules"]),Object(a["createElementVNode"])("div",c,[Object(a["createVNode"])(J,{size:"mini",shape:"circle",onClick:t[0]||(t[0]=function(e){return H.rulesPanelVisible=!1})},{icon:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(Y,{icon:"close-circle-fill"})]})),_:1})])])),[[ie]]):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(X,{spinning:H.spinningVisible},null,8,["spinning"]),Object(a["createVNode"])(oe,{class:"flow-editor"},{default:Object(a["withCtx"])((function(){return[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(ee,{class:Object(a["normalizeClass"])(["canvas-container",{"show-grid":H.toggleGridLine}]),"data-zoom":H.canvasDataRoom},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",l,[Object(a["createVNode"])(Z,{class:"item",color:"dark",title:"手动排列",placement:"top"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",{class:"tool-item",title:"",onClick:t[1]||(t[1]=function(){return q.handleSort&&q.handleSort.apply(q,arguments)})},[Object(a["createVNode"])(Y,{class:"flow-tool",icon:"sort-asc"})])]})),_:1}),Object(a["createVNode"])(Z,{class:"item",color:"dark",title:"自动排列",placement:"top"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",{class:"tool-item",onClick:t[2]||(t[2]=function(){return q.handleToggleAutoSort&&q.handleToggleAutoSort.apply(q,arguments)})},[Object(a["createVNode"])(Y,{class:"flow-tool",icon:"sort-desc"})])]})),_:1}),Object(a["createVNode"])(Z,{class:"item",color:"dark",title:"撤销",placement:"top"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",{class:"tool-item",onClick:t[3]||(t[3]=function(){return q.handleUndo&&q.handleUndo.apply(q,arguments)})},[Object(a["createVNode"])(Y,{class:"flow-tool",icon:"arrow-go-back-line"})])]})),_:1}),Object(a["createVNode"])(K,{title:"确定要清空数据,重做吗？",placement:"bottom",okText:"确认",cancelText:"取消",onConfirm:t[4]||(t[4]=function(e){return q.$_doClear(!0)})},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(Z,{class:"item",color:"dark",title:"重做",placement:"top"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",u,[Object(a["createVNode"])(Y,{class:"flow-tool",icon:"loader-3-fill"})])]})),_:1})]})),_:1}),Object(a["createVNode"])(Z,{class:"item",color:"dark",title:"网格",placement:"top"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",{class:"tool-item",onClick:t[5]||(t[5]=function(e){return H.toggleGridLine=!H.toggleGridLine})},[Object(a["createVNode"])(Y,{class:"flow-tool",icon:"grid-line"})])]})),_:1}),Object(a["createVNode"])(Z,{class:"item",color:"dark",title:"保存",placement:"top"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",{class:"tool-item",onClick:t[6]||(t[6]=function(){return q._updateRules&&q._updateRules.apply(q,arguments)})},[Object(a["createVNode"])(Y,{class:"flow-tool",icon:"save-3-fill"})])]})),_:1}),Object(a["createVNode"])(Z,{class:"item",color:"dark",title:"关闭小窗口",placement:"top"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",{class:"tool-item",onClick:t[7]||(t[7]=function(e){return H.rulesPanelVisible=!H.rulesPanelVisible})},[Object(a["createVNode"])(Y,{class:"flow-tool",icon:"terminal-window-fill"})])]})),_:1})]),Object(a["createElementVNode"])("div",{class:"flow-zoom","data-zoom":H.canvasDataRoom+"%"},[Object(a["createElementVNode"])("div",d,[Object(a["createVNode"])(J,{size:"mini",shape:"circle",onClick:q.handleMinusCanvas},{icon:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(Y,{style:{"font-size":"8px"},icon:"subtract-fill"})]})),_:1},8,["onClick"])]),Object(a["createElementVNode"])("div",f,[Object(a["createVNode"])(J,{size:"mini",shape:"circle",onClick:q.handlePlusCanvas},{icon:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(Y,{icon:"add-fill"})]})),_:1},8,["onClick"])])],8,s),Object(a["createElementVNode"])("div",{id:"campaignCanvas",style:Object(a["normalizeStyle"])(q.canvasRoomScaleStyle),ref:"campaignCanvas"},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(H.flowList,(function(n,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:n.uuid,class:"node-content-wrap",onMousedown:t[8]||(t[8]=function(){return q.handleFlowMoveDown&&q.handleFlowMoveDown.apply(q,arguments)}),onMouseup:function(e){q.handleChangeFlowPosition(n,e)},id:n.uuid,onClick:Object(a["withModifiers"])((function(e){q.handleEditFlowItem(n,e)}),["stop"]),style:Object(a["normalizeStyle"])({left:n.left+"px",top:n.top+"px"})},[Object(a["createElementVNode"])("div",p,[Object(a["createVNode"])(Q,Object(a["mergeProps"])({class:"node-temp-small",ref_for:!0,ref:n.uuid},e.$attrs,{group:{name:"sortable",pull:!1,put:!0}}),null,16),n.groupType===H.flowTypeConstant.action?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("div",b,[Object(a["createElementVNode"])("img",{src:n.icon,style:{width:"100%"},alt:""},null,8,g)]),Object(a["createElementVNode"])("div",v,Object(a["toDisplayString"])(n.name),1)]),Object(a["createElementVNode"])("div",w,[Object(a["createElementVNode"])("div",O,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(n.formData&&n.formData.stepName),1),Object(a["createElementVNode"])("i",{class:"el-icon-close flow-delete",onClick:Object(a["withModifiers"])((function(e){return q.handleDeleteFlowItem(n)}),["stop"])},null,8,j),Object(a["createVNode"])(Y,{class:"flow-delete",icon:"close-circle-line",onClick:Object(a["withModifiers"])((function(e){return q.handleDeleteFlowItem(n)}),["stop"])},null,8,["onClick"])])])],64)):n.groupType===H.flowTypeConstant.condition?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createElementVNode"])("div",y,[Object(a["createElementVNode"])("div",C,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["step-img",n.className])},null,2)])]),Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("div",N,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(n.formData&&n.formData.stepName),1),Object(a["createVNode"])(Y,{class:"flow-delete",icon:"close-circle-line",onClick:Object(a["withModifiers"])((function(e){return q.handleDeleteFlowItem(n)}),["stop"])},null,8,["onClick"])]),Object(a["createElementVNode"])("div",k,[n.formData&&n.formData.ifNodeTitle?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",I,Object(a["toDisplayString"])(n.formData.ifNodeTitle),1)):Object(a["createCommentVNode"])("",!0)])])],64)):n.groupType===H.flowTypeConstant.flow?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:2},[Object(a["createElementVNode"])("div",S,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["step-img",n.className])},null,2)]),Object(a["createElementVNode"])("div",T,[Object(a["createElementVNode"])("div",F,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(n.formData&&n.formData.stepName),1),n.type!==H.flowItemTypeConstant.startNode?(Object(a["openBlock"])(),Object(a["createBlock"])(Y,{key:0,class:"flow-delete",icon:"close-circle-line",onClick:Object(a["withModifiers"])((function(e){return q.handleDeleteFlowItem(n)}),["stop"])},null,8,["onClick"])):Object(a["createCommentVNode"])("",!0)])])],64)):Object(a["createCommentVNode"])("",!0),n.groupType===H.flowTypeConstant.temp?(Object(a["openBlock"])(),Object(a["createBlock"])(Q,Object(a["mergeProps"])({key:3,class:"flow-item node-temp node-temp-img",ref_for:!0,ref:"tempNode",id:n.uuid},e.$attrs,{group:{name:"sortable",pull:!1,put:!0}}),null,16,["id"])):Object(a["createCommentVNode"])("",!0)])],44,m)})),128))],4)]})),_:1},8,["class","data-zoom"])),[[ie]]),Object(a["createVNode"])(ee,{size:"25","min-size":"0","max-size":"120",class:"flow-editor-sidebar"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(ne,null,{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(H.flowAllList,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])(te,{key:n,header:t.name},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(Q,Object(a["mergeProps"])({class:"items-box",list:t.children,group:{name:"sortable",pull:"clone",put:!1}},Object(o["a"])(Object(o["a"])({},H.dragConfig),e.$attrs),{move:q.handleFlowMoveItem,onStart:q.handleFlowMoveStart,onEnd:q.handleFlowMoveEnd,sort:!1,ref_for:!0,ref:t.ref}),{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(t.children,(function(e,n){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[t.type===H.flowTypeConstant.action?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[e.hidden?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"node",key:n,title:e.name,"data-id":e.id,"data-type":e.type,"data-group":e.groupType,"data-nodeData":e},[Object(a["createElementVNode"])("div",V,[Object(a["createElementVNode"])("img",{src:e.icon,style:{width:"100%"},alt:""},null,8,E)]),Object(a["createElementVNode"])("div",D,Object(a["toDisplayString"])(e.name),1)],8,L))],64)):t.type===H.flowTypeConstant.flow?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[e.hidden?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"node node-circle",key:n,title:e.name,"data-id":e.id,"data-type":e.type,"data-group":e.groupType,"data-nodeData":e},[Object(a["createElementVNode"])("div",_,[Object(a["createElementVNode"])("img",{src:e.icon,style:{width:"100%"},alt:""},null,8,B)])],8,P))],64)):t.type===H.flowTypeConstant.condition?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:2},[e.hidden?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"node-square",key:n,title:e.name,"data-id":e.id,"data-type":e.type,"data-group":e.groupType,"data-itemData":e},[Object(a["createElementVNode"])("div",A,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["step-img",e.className])},null,2)])],8,R))],64)):Object(a["createCommentVNode"])("",!0)],64)})),256))]})),_:2},1040,["list","move","onStart","onEnd"])]})),_:2},1032,["header"])})),128))]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(re,{class:"dialog-wrap",visible:H.dialogObj.visible,"onUpdate:visible":t[9]||(t[9]=function(e){return H.dialogObj.visible=e}),title:"表单","ok-button-props":{disabled:H.dialogObj.editType===H.flowItemTypeConstant.list},onCancel:q.handleCloseDialog,onOk:q.handleTempFlowFormData,width:"350px"},{default:Object(a["withCtx"])((function(){return[H.dialogObj.editType===H.flowItemTypeConstant.list?(Object(a["openBlock"])(),Object(a["createBlock"])(ae,{key:0,flowAllList:H.flowAllList,onHandleCheck:q.handleSelectFlowItem},null,8,["flowAllList","onHandleCheck"])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",M,[H.dialogObj.editType?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(q.dialogFlowItemComponent),{key:0,ref:"flowEditComponent",editItem:H.dialogObj.editForm,itemData:H.dialogObj.itemData},null,8,["editItem","itemData"])):Object(a["createCommentVNode"])("",!0)]))]})),_:1},8,["visible","ok-button-props","onCancel","onOk"]),Object(a["createVNode"])(re,{title:"JSON数据",visible:H.dialogVisible,"onUpdate:visible":t[11]||(t[11]=function(e){return H.dialogVisible=e}),width:"700px"},{default:Object(a["withCtx"])((function(){return[H.dialogVisible?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",z,null,512)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("span",$,[Object(a["createVNode"])(J,{type:"primary",onClick:t[10]||(t[10]=function(e){return H.dialogVisible=!1})},{default:Object(a["withCtx"])((function(){return[G]})),_:1})])]})),_:1},8,["visible"])])}n("b2df"),n("7e5a"),n("882b"),n("457d"),n("2723"),n("cb6f"),n("d994"),n("373e"),n("f157"),n("8cd3"),n("cb0b"),n("a9bd"),n("0b9a"),n("f150");var H=n("ee02"),q=n.n(H),W=n("5817"),Y=n("c912"),J=n("761a"),X=n("dabb"),Z=n("1813"),K=n("baac"),Q=n("05aa"),ee=n("34e9"),te=n("3968"),ne=n("3da2"),oe=n("c30a"),ae=n("3f56"),re=n("d927"),ie=(n("dd7b"),n("46f3")),ce=n("7c98"),le=n.n(ce),ue=n("d834"),se=[],de={animation:0,disabled:!1,ghostClass:"sortable-ghost"},fe=120,me=80,pe=130,he=30,be=30,ge={name:"Workflow",jsPlumb:null,directives:{flowDrag:{mounted:function(e,t,n,o){t&&(e.onmousedown=function(t){if(2!=t.button){var n=t.clientX,o=t.clientY;e.style.cursor="move",document.onmousemove=function(t){t.preventDefault();var a=t.clientX-n;n=t.clientX,e.scrollLeft+=-a;var r=t.clientY-o;o=t.clientY,e.scrollTop+=-r},document.onmouseup=function(t){e.style.cursor="auto",document.onmousemove=null,document.onmouseup=null}}})}}},data:function(){return{venuesId:-1,id:-1,spinningVisible:!1,flowTypeConstant:Y["FLOW_TYPE"],flowItemTypeConstant:Y["FLOW_ITEM_TYPE"],flowAllList:Y["FLOW_ALL_LIST"],jsPlumbInit:!1,workFlowNode:{input:[],flow:[],action:[]},dialogObj:{visible:!1,editType:void 0,flowUUid:void 0,editForm:void 0,isBetween:!1,flowPreUuid:void 0,flowNextUuid:void 0,itemData:void 0},dialogVisible:!1,rulesPanelVisible:!0,flowList:[],engineRules:[],dragConfig:de,movingFlowItem:void 0,movedFlowItem:void 0,canvasDataRoom:100,toggleGridLine:!0,toggleAutoSort:!0,canUndo:!1,tempLayerMap:[]}},components:{Draggable:W["default"],ListForm:Z["default"],StartNodeForm:K["default"],NodeNodeForm:Q["default"],IfNodeForm:ee["default"],ExpandNodeForm:te["default"],EndNodeForm:ne["default"],VabIcon:ae["default"],Pane:re["a"],Splitpanes:re["b"],RulesPanel:oe["default"]},mounted:function(){var e=this;this.venuesId=this.$route.query.venuesId,this.id=this.$route.query.id,this.$options.jsPlumb=ie["jsPlumb"].getInstance(),this.initJsPlumb(),this.initFlow(),this.$nextTick((function(){e._getWorkFlowNode(e.venuesId),e._getThingsLinkage(e.id)}))},computed:{dialogFlowItemComponent:function(){return this.dialogObj.editType+"Form"},canvasRoomMinusEnable:function(){return this.canvasDataRoom>50},canvasRoomPlusEnable:function(){return this.canvasDataRoom<100},canvasRoomScaleStyle:function(){return{transform:"scale("+this.canvasDataRoom/100+")"}},toggleGridLineClass:function(){return this.toggleGridLine?"icon-wangge-open":"icon-wangge-close"},toggleSortClass:function(){return this.toggleAutoSort?"icon-auto-sort-open":"icon-auto-sort-close"}},watch:{flowList:{handler:function(e,t){this.engineRules=[];var n=e.filter((function(e){return e.type===Y["FLOW_ITEM_TYPE"].startNode}))[0];null!==n&&void 0!==n&&this.engineRules.push(n),this.findNextNode(n)},deep:!0}},methods:{findNextNode:function(e){if(null!==e&&void 0!==e&&null!==e.next&&void 0!==e.next&&0!==e.next.length){var t=e.next[0];if(void 0!==t&&null!==t){var n=this.flowList.filter((function(e){return e.uuid===t}))[0];n.type!==Y["FLOW_ITEM_TYPE"].tempNode&&this.engineRules.push(n),this.findNextNode(n)}}},initFlow:function(){var e=this.createFlowItem(Y["FLOW_ITEM_TYPE"].startNode);this.addTempFlowItem(e)},updateFlow:function(e,t){var n=this,o=JSON.parse(e.positions),a=e.steps,r=[];a.forEach((function(e){var t=n.getFlowItemById(e.elementId);if(t){t.next=[],t.prev=[],t.uuid=e.stepId;var a=o[e.stepId];if(a&&(t.left=a.left,t.top=a.top),e.nextStep?t.next=[e.nextStep]:e.nextSteps&&(t.next=e.nextSteps.map((function(e){return e.nextStep}))),t.type!==Y["FLOW_ITEM_TYPE"].endNode)if(n.isIfFlowItem(t.type)){var i=Object(J["clone"])(e.nextSteps[0]);if(i.stepName=e.stepName,t.formData=n.getFlowItemFormData(i),i.isDefault?(t.nextElseId=i.nextStep,t.nextIfId=e.nextSteps[1].nextStep):(t.nextIfId=i.nextStep,t.nextElseId=e.nextSteps[1].nextStep),e.stepJson){var c=JSON.parse(e.stepJson);t.formData.ifNodeTitle=c.ifNodeTitle}}else if(n.isExpandFlowItem(t.type)){var l=e.nextSteps,u={};u.stepName=e.stepName,u.ruleGroupList=l,t.formData=u}else t.formData=n.getFlowItemFormData(e);r.push(t)}})),r.forEach((function(e){e.next.length>0&&e.next.forEach((function(t){var n=le.a.find(r,(function(e){return e.uuid===t}));n&&-1===n.prev.indexOf(e.uuid)&&n.prev.push(e.uuid)}))})),r.forEach((function(e){if(n.isIfFlowItem(e.type)){var t=le.a.find(r,(function(t){return t.uuid===e.nextIfId})),o=le.a.find(r,(function(t){return t.uuid===e.nextElseId}));t.left<o.left?e.next=[t.uuid,o.uuid]:e.next=[o.uuid,t.uuid]}else if(n.isExpandFlowItem(e.type)){var a=e.next.map((function(e){return le.a.find(r,(function(t){return t.uuid===e}))}));a.sort((function(e,t){return e.left-t.left})),e.next=a.map((function(e){return e.uuid}))}})),this.flowList=r,this.$nextTick((function(){r.forEach((function(e){n.$options.jsPlumb.draggable(e.uuid,{})})),n.$nextTick((function(){r.forEach((function(e){e.next.forEach((function(t,o){var a=n.getFlow(t);if(n.isTempFlowItem(a)?n.draggableFlowConnect(e.uuid,t,!0):n.addFlowItemConnect(e.uuid,t),n.isIfFlowItem(e.type)){var r=e.nextIfId===a.uuid;n.createFlowItemLabel(e.uuid,t,r?"是":"否")}else if(n.isExpandFlowItem(e.type)){var i=n.getExpandFlowItemName(e,t);n.createFlowItemLabel(e.uuid,t,i)}}))})),n.$nextTick((function(){t&&t()}))}))}))},$_updateMemoryList:function(){var e=this.formatData();se.length>10&&se.shift(),se.push(e),this.$_updateCanUndoBtn()},$_sortFlowItemNext:function(e){var t=this,n=this.getFlow(e.prev[0]);if(this.isExpandFlowItem(n.type)){var o=n.next.map((function(e){return t.getFlow(e)}));o.sort((function(e,t){return e.left-t.left})),n.next=o.map((function(e){return e.uuid}))}else if(this.isIfFlowItem(n.type)){var a=this.getFlow(n.nextIfId),r=this.getFlow(n.nextElseId);a.left<r.left?n.next=[a.uuid,r.uuid]:n.next=[r.uuid,a.uuid]}},$_updateCanUndoBtn:function(){this.canUndo=se.length>0},initJsPlumb:function(){var e=this;this.$options.jsPlumb.ready((function(){e.jsPlumbInit=!0,e.$options.jsPlumb.importDefaults({ConnectionsDetachable:!1,LogEnabled:!0})}))},createFlowConnectionLabel:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){var o=n.$options.jsPlumb.getConnections({source:e,target:t});o.forEach((function(e){e.getOverlay("nodeTempSmall").setVisible(!0),e.bind("click",n.handleFlowLabelClick)}))}))},createFlowItemLabel:function(e,t,n){var o=this;this.$nextTick((function(){var a=o.$options.jsPlumb.getConnections({source:e,target:t});a.length>0&&a[0].getOverlay("flowItemDesc").setLabel('<span class="node-item-title" title="'.concat(n,'">').concat(n,"</span>"))}))},removeFlowConnection:function(e,t){var n=this,o=this.$options.jsPlumb.getConnections({source:e,target:t});o.forEach((function(e){n.$options.jsPlumb.deleteConnection(e)}))},handleFlowLabelClick:function(e){var t=e.component;if(t){var n=t.sourceId,o=t.targetId;this.showDialog({isBetween:!0,flowPreUuid:n,flowNextUuid:o})}},handleEditFlowItem:function(e,t){var n=t.currentTarget;"true"===n.dataset.isClick&&this.showDialog({flowItemType:e.type,flowUuid:e.uuid,flowFormData:Object.assign({},e.formData,e.condition),itemData:e.data})},draggableFlowConnect:function(e,t,n){var o=this;function a(){o.jsPlumbInit&&o.$options.jsPlumb.connect({source:e,target:t,endpoint:"Dot",connectorStyle:{strokeStyle:"#ccc",joinStyle:"round",outlineColor:"#ccc"},connector:["Flowchart",{stub:[10,20],gap:1,cornerRadius:2,alwaysRespectStubs:!0}],endpointStyle:{fill:"transparent",outlineStroke:"transparent",outlineWidth:2},paintStyle:{stroke:"lightgray",strokeWidth:2},anchor:["BottomCenter","TopCenter"],overlays:[["PlainArrow",{width:10,length:10,location:1}],["Custom",{location:.5,id:"nodeTempSmall",create:function(){var n=o.$refs[t][0].$el;return n.dataset.target=t,n.dataset.source=e,n},visible:!1}],["Label",{location:1,id:"flowItemDesc",cssClass:"node-item-label",visible:!0}]]})}n?a():this.$nextTick((function(){a()}))},getFlowItemInitLeft:function(){var e=this.$refs.campaignCanvas,t=Object(X["getWidth"])(e),n=500;return t&&(n=t/2),n},createFlowItem:function(e,t,n){var o=this;n=n||{};var a=Object(J["uuid"])(),r=this.getFlowItemByType(e),i=[];if(r){if(r.prev=[],r.next=[],r.formData={},r.left=this.getFlowItemInitLeft(),r.top=be,r.uuid=a,t&&(Array.isArray(t)||(t=[t]),r.prev=t,t.forEach((function(e){var t=le.a.find(o.flowList,(function(t){return t.uuid===e}));t&&(i.push(t),-1===t.next.indexOf(a)&&(le.a.isUndefined(n.index)||-1===n.index?t.next.push(a):t.next.splice(n.index,0,a)))}))),i.length>0&&1===i.length){var c=i[0];n.offsetLeft?r.left=c.left+n.offsetLeft:n.left?r.left=n.left:r.left=c.left,r.top=c.top+fe}this.flowList.push(r),this.$nextTick((function(){o.$options.jsPlumb.draggable(a,{})}))}return r?a:null},updateFlowItem:function(e,t){var n=this.getFlow(t),o=this.getFlowItemByType(e);for(var a in o)n[a]=o[a];return n},deleteFlowItem:function(e){if(this.isOnePreOneNext(e)||this.isEndFlowItem(e)){var t=this.getFlowIndex(e.uuid);this.handleDeleteOnePrevOneNextFlowItem(e,t)}else if(this.isHasMoreNextFlowItem(e)){this.deleteNextFlowItem(e.uuid);var n=this.getFlow(e.prev[0]);if(this.isIfFlowItem(n.type))this.addIfOneTempFlowItem(n.uuid,n.nextIfId===e.uuid);else if(this.isExpandFlowItem(n.type)){var o=this.getExpandFlowItem(n,e.uuid);this.addExpandOneTempFlowItem(n,e.left,o.name)}else this.addTempFlowItem(e.prev[0])}},handleDeleteOnePrevOneNextFlowItem:function(e,t){var n=[],o=[],a=this.flowList[t];this.flowList.forEach((function(t){t.prev.length>0&&-1!==t.prev.indexOf(e.uuid)?o.push(t):t.next.length>0&&-1!==t.next.indexOf(e.uuid)&&n.push(t)}));var r={};e.type===Y["FLOW_ITEM_TYPE"].endNode&&n[0].type===Y["FLOW_ITEM_TYPE"].expandNode&&(r=this.getExpandFlowItem(n[0],e.uuid)),o.forEach((function(t){var n=t.prev.indexOf(e.uuid);t.prev.splice(n,1)})),n.forEach((function(t){var n=t.next.indexOf(e.uuid);t.next.splice(n,1)})),this.$options.jsPlumb.removeAllEndpoints(e.uuid,!0),this.flowList.splice(t,1),this.$nextTick((function(){var t=this,i=n[0],c=o[0];if(i&&c)if(i.next.push(c.uuid),c.prev.push(i.uuid),this.draggableFlowConnect(i.uuid,c.uuid,!0),c.type!==Y["FLOW_ITEM_TYPE"].tempNode&&this.createFlowConnectionLabel(i.uuid,c.uuid),this.isIfFlowItem(i.type)){var l=i.nextIfId===e.uuid;l?i.nextIfId=c.uuid:i.nextElseId=c.uuid,this.createFlowItemLabel(i.uuid,c.uuid,l?"是":"否")}else if(this.isExpandFlowItem(i.type)){var u=this.getExpandFlowItem(i,a.uuid);u&&(u.nextStep=c.uuid),this.createFlowItemLabel(i.uuid,c.uuid,u.name)}if(e.type===Y["FLOW_ITEM_TYPE"].endNode&&i)if(this.isIfFlowItem(i.type)){var s=i.nextIfId===e.uuid;this.addIfOneTempFlowItem(i.uuid,s)}else if(this.isExpandFlowItem(i.type)){var d=this.addExpandOneTempFlowItem(i,e.left,r.name);r.nextStep=d}else this.addTempFlowItem(i.uuid);this.$nextTick((function(){c&&(t.moveFlowItem(c.uuid),t.$_plumbRepaintEverything())}))}))},$_plumbRepaintEverything:function(){var e=this;this.$nextTick((function(){e.$options.jsPlumb.repaintEverything(!0)}))},getFlowItemById:function(e){var t=null;return Object.keys(Y["FLOW_LIST"]).forEach((function(n){var o=Y["FLOW_LIST"][n];if(o&&o.length>0){var a=le.a.find(o,(function(t){return t.id===e}));a&&(t=Object(J["clone"])(a))}})),t},getFlowItemByType:function(e){var t=null;return Object.keys(Y["FLOW_LIST"]).forEach((function(n){var o=Y["FLOW_LIST"][n];if(o&&o.length>0){var a=le.a.find(o,(function(t){return t.type===e}));a&&(t=Object(J["clone"])(a))}})),t},handleFlowMoveItem:function(e){var t=e.to,n=e.dragged;if(console.log(n.dataset),n.dataset.id===Y["FLOW_ITEM_TYPE"].startNode)return!1;this.movedFlowItem?this.movedFlowItem&&this.movedFlowItem!==t&&(Object(X["removeClass"])(this.movedFlowItem,"is-active"),this.movedFlowItem=t,this.movedFlowItem.nodeData=n.dataset.nodedata,Object(X["addClass"])(t,"is-active")):(this.movedFlowItem=t,this.movedFlowItem.nodeData=n.dataset.nodedata,Object(X["addClass"])(t,"is-active"))},handleDeleteFlowItem:function(e){var t=this;this.$confirm({title:"确定要删除吗？Tips: ifNode 和 expandNode 会删除下面所有节点",okText:"确认",cancelText:"取消",onOk:function(){t.$_updateMemoryList(),t.deleteFlowItem(e),t.$_updatePositionByAutoSort()}})},handleFlowMoveStart:function(e){console.log("==========move Start============"),console.log("==========move Start============");var t=e.item,n=t.dataset;this.movingFlowItem={group:n.group,type:n.type}},handleFlowMoveEnd:function(e){var t=e.originalEvent;if(console.log(t),console.log("==========move 1 end============"),this.movedFlowItem){if(console.log("==========move 2 end============"),Object(X["removeClass"])(this.movedFlowItem,"is-active"),t.toElement!==this.movedFlowItem)return console.log("==========move 3 end============"),this.movedFlowItem=void 0,void(this.movingFlowItem=void 0);console.log(this.movedFlowItem.nodeData);var n={flowItemType:this.movingFlowItem.type,flowUuid:this.movedFlowItem.id,itemData:this.movedFlowItem.nodeData};console.log(n),console.log("==========move 4 end============"),this.movedFlowItem.dataset.source&&this.movedFlowItem.dataset.target&&(console.log("==========move 5 end============"),n.isBetween=!0,n.flowPreUuid=this.movedFlowItem.dataset.source,n.flowNextUuid=this.movedFlowItem.dataset.target,delete n.flowUuid),this.showDialog(n)}console.log("==========move 6 end============"),this.movedFlowItem=void 0,this.movingFlowItem=void 0},handleSelectFlowItem:function(e){this.showDialog({flowItemType:e.type,flowUuid:this.dialogObj.flowUUid,itemData:e.data})},handleAddFlowItem:function(e,t,n){var o=this.updateFlowItem(e,t);if(null!==n&&void 0!==n&&(o.linkType="THINGS_TYPE",o.data=n),console.log("==============itemData==============="),console.log(o),console.log(n),console.log("==============itemData==============="),this.createFlowConnectionLabel(o.prev,o.uuid),this.isOnePreOneNext(o))console.log("================addTempFlowItem========================="),this.addTempFlowItem(t);else if(o.groupType===Y["FLOW_TYPE"].condition){var a=this.getFlow(o.prev[0]);if(this.isIfFlowItem(e))this.isIfFlowItem(a.type)&&(a.nextIfId===o.uuid?o.left-=he:a.nextElseId===o.uuid&&(o.left+=he)),console.log("================addIfTempFlowItem========================="),this.addIfTempFlowItem(t);else if(this.isExpandFlowItem(e)){if(this.isIfFlowItem(a.type)){var r=o.formData.ruleGroupList.length,i=r%2===0,c=parseInt(r/2,10),l=(i?c:c+1)*me+he;a.nextIfId===o.uuid?o.left-=l:a.nextElseId===o.uuid&&(o.left+=l)}this.addExpandTempFlowItem(t,o.formData.ruleGroupList)}}return o},handleUpdateFlowItem:function(e){var t=this,n=e.flowItemType,o=e.tempFlowId,a=this.getFlow(o),r=!1,i=this.updateFlowItem(n,o);if(n!==a.type)this.isHasMoreNextFlowItem(a)&&(r=!0,a.next.forEach((function(e){t.deleteNextFlowItem(e)}))),this.isIfFlowItem(n)?this.handleUpdateIfFlowItem(i):this.isExpandFlowItem(n)?this.handleUpdateExpandFlowItem(i):r&&this.addTempFlowItem(i.uuid);else if(this.isExpandFlowItem(n)){var c=i.formData.ruleGroupList,l=i.next,u=[],s=[],d=[];if(c.forEach((function(e){var n=e.nextStep;n?(u.push(n),t.createFlowItemLabel(i.uuid,n,e.name)):s.push(e)})),d=le.a.difference(l,u),d.length>0&&(i.next=u,d.forEach((function(e){t.deleteNextFlowItem(e)}))),s.length>0){var f=0;i.next.forEach((function(e){var n=t.getFlow(e);f<n.left&&(f=n.left)})),s.forEach((function(e,n){var o=f+(n+1)*(2*me),a=t.createFlowItem(Y["FLOW_ITEM_TYPE"].tempNode,i.uuid,{left:o});t.draggableFlowConnect(i.uuid,a),t.createFlowItemLabel(i.uuid,a,e.name),e.nextStep=a}))}}},handleUpdateIfFlowItem:function(e){var t=this;e.next.forEach((function(e){t.deleteNextFlowItem(e)})),this.$nextTick((function(){t.addIfTempFlowItem(e.uuid)}))},handleUpdateExpandFlowItem:function(e){var t=this;e.next.forEach((function(e){t.deleteNextFlowItem(e)})),this.$nextTick((function(){t.addExpandTempFlowItem(e.uuid,e.formData.ruleGroupList)}))},handleAddBetweenFlowItem:function(e){var t=this,n=e.flowItemType,o=e.preFlowId,a=e.nextFlowId,r=e.formData,i=e.itemData;if(console.log("==================isHasMoreNextFlowItemByType============================="),console.log(n),console.log(i),console.log(this.isHasMoreNextFlowItemByType(n)),console.log(this.isEndFlowItem(n)),console.log(this.dialogObj),console.log("==================isHasMoreNextFlowItemByType============================="),this.isHasMoreNextFlowItemByType(n)){var c={},l=this.getFlow(o),u=this.isExpandFlowItem(l.type),s=this.isEndFlowItem(n),d=u?l.formData:null;if(this.isHasMoreNextFlowItemByType(l.type)){var f=this.getFlow(a);c.left=f.left,c.index=l.next.indexOf(a)}this.deleteNextFlowItem(a),this.$nextTick((function(){var e=t.addTempFlowItem(o,c),f=t.getFlow(e);f.formData=r,t.$nextTick((function(){if(t.handleAddFlowItem(n,e),u){t.updateExpandFlowItemRuleGroup(d.ruleGroupList,a,e);var c=t.getExpandFlowItemName(l,e);t.createFlowItemLabel(o,e,c),t.$_plumbRepaintEverything()}if(s){var f=t.handleAddFlowItem(n,e,i);t.flowFormAddFormCondition(f,r)}t.$_updatePositionByAutoSort()}))}))}else this.handleAddBetweenCommonFlowItem(e)},handleAddBetweenCommonFlowItem:function(e){var t=this,n=e.flowItemType,o=e.preFlowId,a=e.nextFlowId,r=e.formData,i=e.itemData,c=this.getFlow(o),l=this.getFlow(a),u={},s=!1;this.isHasMoreNextFlowItemByType(c.type)&&(u.left=l.left,this.isIfFlowItem(c.type)&&(s=c.nextIfId===a));var d=this.createFlowItem(n,o,u),f=this.getFlow(d);f.formData=r,this.flowFormAddFormCondition(f,r),f.linkType="THINGS_TYPE",f.data=i,f.next.push(a),this.$nextTick((function(){if(t.isExpandFlowItem(c.type)){t.updateExpandFlowItemRuleGroup(c.formData.ruleGroupList,a,d),t.updateBetweenFlowItem(d,a,o);var e=t.getExpandFlowItemName(c,d);t.createFlowItemLabel(o,d,e)}else t.updateBetweenFlowItem(d,a,o),t.isIfFlowItem(c.type)&&t.createFlowItemLabel(o,d,s?"是":"否`");t.$_updatePositionByAutoSort()}))},getExpandFlowItemName:function(e,t){var n=this.getExpandFlowItem(e,t),o="";return n&&(o=n.name),o},updateExpandFlowItemRuleGroup:function(e,t,n){var o=le.a.find(e,(function(e){return e.nextStep===t}));o&&(o.nextStep=n)},getExpandFlowItem:function(e,t){var n=e.formData.ruleGroupList,o=le.a.find(n,(function(e){return e.nextStep===t}));return o},updateBetweenFlowItem:function(e,t,n){var o=this.getFlow(n),a=o.next.indexOf(t);-1!==a&&o.next.splice(a,1);var r=o.next.indexOf(e);-1===r?o.next.splice(a,0,e):r!==a&&(o.next.splice(r,1),o.next.splice(a,0,e));var i=this.getFlow(t);i.prev=[e],this.removeFlowConnection(n,t),this.addFlowItemConnect(n,e),this.addFlowItemConnect(e,t),this.moveFlowItem(t),this.$_plumbRepaintEverything()},moveFlowItem:function(e){var t=this,n=this.getFlow(e);if(n.prev.length>0){var o=this.getFlow(n.prev[0]);n.top=o.top+fe}n.next.forEach((function(e){t.moveFlowItem(e)}))},deleteNextFlowItem:function(e){var t=this,n=this.getFlow(e),o=this.getFlowIndex(e);if(n){if(n.prev[0]){var a=this.getFlow(n.prev[0]);if(a){var r=a.next.indexOf(e);-1!==r&&a.next.splice(r,1)}}this.flowList.splice(o,1),this.$nextTick((function(){t.$options.jsPlumb.removeAllEndpoints(n.uuid)})),n.next.forEach((function(e){t.deleteNextFlowItem(e)}))}},getFlow:function(e){var t=le.a.find(this.flowList,(function(t){return t.uuid===e}));return t},getFlowIndex:function(e){var t=le.a.findIndex(this.flowList,(function(t){return t.uuid===e}));return t},addTempFlowItem:function(e,t){var n=this.createFlowItem(Y["FLOW_ITEM_TYPE"].tempNode,e,t);return this.draggableFlowConnect(e,n),n},addIfTempFlowItem:function(e){this.addIfOneTempFlowItem(e,!0),this.addIfOneTempFlowItem(e,!1)},addIfOneTempFlowItem:function(e,t){var n=this.getFlow(e),o=t?-me:me,a=this.createFlowItem(Y["FLOW_ITEM_TYPE"].tempNode,e,{offsetLeft:o});return this.draggableFlowConnect(e,a),this.createFlowItemLabel(e,a,t?"是":"否"),t?n.nextIfId=a:n.nextElseId=a,a},addExpandTempFlowItem:function(e,t){var n,o=t.length,a=o%2===0,r=parseInt(o/2,10);r=a?r-1:r;for(var i={},c=0;c<=r;c++){n=t[c];var l=r-c,u=l*(2*me);a&&(u+=me),i.offsetLeft=-u;var s=this.createFlowItem(Y["FLOW_ITEM_TYPE"].tempNode,e,i);this.draggableFlowConnect(e,s),this.createFlowItemLabel(e,s,n.name),n.nextStep=s}for(var d=r+1;d<o;d++){n=t[d];var f=a?d-(r+1):d-r,m=f*(2*me);a&&(m+=me),i.offsetLeft=m;var p=this.createFlowItem(Y["FLOW_ITEM_TYPE"].tempNode,e,i);this.draggableFlowConnect(e,p),this.createFlowItemLabel(e,p,n.name),n.nextStep=p}},addExpandOneTempFlowItem:function(e,t,n){var o=this.createFlowItem(Y["FLOW_ITEM_TYPE"].tempNode,e.uuid,{left:t});return this.draggableFlowConnect(e.uuid,o),this.createFlowItemLabel(e.uuid,o,n),o},addFlowItemConnect:function(e,t){this.draggableFlowConnect(e,t,!0),this.createFlowConnectionLabel(e,t)},handleChangeFlowPosition:function(e,t){var n=t.currentTarget,o=n.dataset.firstTime,a=(new Date).getTime(),r=(""+n.style.left).replace("px",""),i=(""+n.style.top).replace("px",""),c=a-o<200;c||this.$_updateMemoryList(),e.left=Number(r),e.top=Number(i),c||this.$_sortFlowItemNext(e),n.dataset.isClick=c},handleFlowMoveDown:function(e){var t=e.currentTarget;t.dataset.firstTime=(new Date).getTime()},handleTempFlowFormData:function(){var e=this,t=this.$refs.flowEditComponent;t&&t.validateFormData&&t.validateFormData().then((function(){var n=t.formData();if(e.$_updateMemoryList(),e.dialogObj.isBetween)e.handleAddBetweenFlowItem({flowItemType:e.dialogObj.editType,preFlowId:e.dialogObj.flowPreUuid,nextFlowId:e.dialogObj.flowNextUuid,formData:n,itemData:e.dialogObj.itemData});else{var o=e.getFlow(e.dialogObj.flowUUid);o.formData=n,e.flowFormAddFormCondition(o,n),o.type===Y["FLOW_ITEM_TYPE"].tempNode?(e.handleAddFlowItem(e.dialogObj.editType,o.uuid,e.dialogObj.itemData),e.$_updatePositionByAutoSort()):e.handleUpdateFlowItem({flowItemType:e.dialogObj.editType,tempFlowId:o.uuid})}e.initDialog()})).catch((function(){}))},flowFormAddFormCondition:function(e,t){e.condition={type:t.type,value:t.value,conditionType:t.conditionType}},handleCloseDialog:function(){this.initDialog()},handleGoList:function(){this.dialogObj.editType=Y["FLOW_ITEM_TYPE"].list},showDialog:function(e){e.isBetween?(this.dialogObj.isBetween=!0,this.dialogObj.flowPreUuid=e.flowPreUuid,this.dialogObj.flowNextUuid=e.flowNextUuid,this.dialogObj.editType=e.flowItemType||Y["FLOW_ITEM_TYPE"].list):(this.dialogObj.editType=e.flowItemType,this.dialogObj.flowUUid=e.flowUuid,e.flowFormData&&(this.dialogObj.editForm=Object.assign({},e.flowFormData)),e.flowItemType===Y["FLOW_ITEM_TYPE"].tempNode&&(this.dialogObj.editType=Y["FLOW_ITEM_TYPE"].list)),this.dialogObj.itemData=e.itemData,this.dialogObj.visible=!0},initDialog:function(){this.dialogObj.visible=!1,this.dialogObj.flowUUid=void 0,this.dialogObj.editType=void 0,this.dialogObj.isBetween=!1,this.dialogObj.flowPreUuid=void 0,this.dialogObj.itemData=void 0},formatData:function(){var e=this,t={},n={},o=[],a=Object(J["clone"])(this.flowList);return a.forEach((function(t){t.type===Y["FLOW_ITEM_TYPE"].startNode&&t.formData.stepName;var a={elementId:t.id,stepId:t.uuid};if(null!==t&&void 0!==t&&(a.data=t),t.next.length>1)if(e.isIfFlowItem(t.type)){var r=t.formData.ruleGroups||[],i={nextStep:t.nextIfId,name:"是",isDefault:!1,ruleGroups:r},c={nextStep:t.nextElseId,name:"否",isDefault:!0,ruleGroups:[]};a.nextSteps=[i,c],a.stepName=t.formData.stepName,a.stepJson=JSON.stringify({ifNodeTitle:t.formData.ifNodeTitle})}else if(e.isExpandFlowItem(t.type)){var l=t.formData.ruleGroupList,u=[];l.forEach((function(e){var t={nextStep:e.nextStep,name:e.name,ruleGroups:e.ruleGroups,isDefault:!!e.isDefault};u.push(t)})),a.nextSteps=u,a.stepName=t.formData.stepName}else a.nextSteps=t.next.map((function(e){return{nextStep:e}}));else a.nextStep=t.next[0]||null;e.isIfFlowItem(t.type)||e.isExpandFlowItem(t.type)||(a=Object.assign(a,t.formData)),o.push(a),n[t.uuid]={left:t.left,top:t.top}})),t.positions=JSON.stringify(n),t.steps=o,t},handleMinusCanvas:function(){this.canvasDataRoom<=50||(this.canvasDataRoom=this.canvasDataRoom-10)},handlePlusCanvas:function(){100!==this.canvasDataRoom&&(this.canvasDataRoom=this.canvasDataRoom+10)},handleSort:function(){this.$_updatePosition()},handleClear:function(){var e=this;this.$confirm("确定要清空数据,重做吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$_doClear(!0)})).catch((function(){}))},handleToggleAutoSort:function(){this.toggleAutoSort=!this.toggleAutoSort,this.$_updatePositionByAutoSort()},$_updatePositionByAutoSort:function(){var e=this;this.toggleAutoSort&&this.$nextTick((function(){e.$_updatePosition()}))},handleUndo:function(){var e=this;if(this.canUndo){if(se.length>0){var t=se.pop();this.$_doClear(),this.$options.jsPlumb.reset(),this.$nextTick((function(){e.updateFlow(t,e.$_plumbRepaintEverything)}))}this.$_updateCanUndoBtn()}},$_updatePosition:function(){var e=this;console.log("$_updatePosition"),this.tempLayerMap=[];var t=le.a.find(this.flowList,(function(t){return e.isStartFlowItem(t)}));t.top=be,t.left=this.getFlowItemInitLeft(),this.tempLayerMap[0]=[t],this.$_layoutChild(t,1),this.$_adjustChild();var n=this.$_getFirstLeft();if(n<0){var o=-n;this.$_offsetFlowListLeft(o)}this.$_plumbRepaintEverything()},$_getFirstLeft:function(){var e=this.flowList[0].left;return this.flowList.forEach((function(t){e>t.left&&(e=t.left)})),e},$_offsetFlowListLeft:function(e){this.flowList.forEach((function(t){t.left+=e}))},$_updateOneFlowPosition:function(e){this.isHasMoreNextFlowItemByType(e.type)},$_adjustChild:function(){for(var e=this,t=null,n=this.tempLayerMap.length-1;n>=0;n--)t=this.tempLayerMap[n],t.forEach((function(o,a){var r=t[a-1];if(r&&o.left-r.left<pe){var i=e.$_findCommonParentNode(r,o),c=Math.abs(o.left-r.left)+pe;e.$_translateXTree(i,c);var l=e.getFlow(i.prev[0]);e.$_centerChild(l),n=e.tempLayerMap.length}}))},$_centerChild:function(e){var t=this,n=0;if(e.next&&e.next.length>0){if(1===e.next.length){var o=this.getFlow(e.next[0]);n=e.left-o.left}else{var a=this.getFlow(e.next[0]),r=this.getFlow(e.next[e.next.length-1]);n=e.left-(a.left+(r.left-a.left)/2)}n&&e.next.forEach((function(e){var o=t.getFlow(e);o&&t.$_translateXTree(o,n)}))}},$_translateXTree:function(e,t){var n=this;e.left+=t,e.next&&e.next.length>0&&e.next.forEach((function(e){var o=n.getFlow(e);o&&n.$_translateXTree(o,t)}))},$_findCommonParentNode:function(e,t){if(e.prev[0]===t.prev[0])return t;var n=this.getFlow(e.prev[0]),o=this.getFlow(t.prev[0]);return this.$_findCommonParentNode(n,o)},$_layoutChild:function(e,t){var n=this,o=e.next,a=o.length;void 0===this.tempLayerMap[t]&&(this.tempLayerMap[t]=[]),o.forEach((function(o,r){var i=n.getFlow(o);if(i){i.top=e.top+fe;var c=e.left-pe*(a-1)/2;i.left=c+pe*r,n.tempLayerMap[t].push(i),i.next&&i.next.length>0&&n.$_layoutChild(i,t+1)}}))},$_doClear:function(e){var t=this,n=le.a.find(this.flowList,(function(e){return t.isStartFlowItem(e)}));n&&(this.deleteNextFlowItem(n.uuid),e&&this.$nextTick((function(){t.initFlow()})))},handleGetData:function(){var e=this,t=this.formatData(),n=new q.a(t,3);this.dialogVisible=!0,this.$nextTick((function(){e.$refs.preShow.appendChild(n.render())}))},getFlowItemFormData:function(e){var t=Object(J["clone"])(e);return delete t.elementId,delete t.stepId,t.nextStep&&delete t.nextStep,t.nextSteps&&delete t.nextSteps,t},_message:function(e,t){this.$message({type:t||"error",message:e})},isOnePreOneNext:function(e){return e.groupType===Y["FLOW_TYPE"].action||e.type===Y["FLOW_ITEM_TYPE"].waitNode},isTempFlowItem:function(e){return e.type===Y["FLOW_ITEM_TYPE"].tempNode},isStartFlowItem:function(e){return e.type===Y["FLOW_ITEM_TYPE"].startNode},isEndFlowItem:function(e){return e.type===Y["FLOW_ITEM_TYPE"].endNode||e===Y["FLOW_ITEM_TYPE"].endNode},isIfFlowItem:function(e){return e===Y["FLOW_ITEM_TYPE"].ifNode},isExpandFlowItem:function(e){return e===Y["FLOW_ITEM_TYPE"].expandNode},isHasMoreNextFlowItem:function(e){return this.isHasMoreNextFlowItemByType(e.type)},isHasMoreNextFlowItemByType:function(e){return this.isIfFlowItem(e)||this.isExpandFlowItem(e)||this.isEndFlowItem(e)},isHasStepCountFlowItem:function(e){return e.groupType===Y["FLOW_TYPE"].action||e.type===Y["FLOW_ITEM_TYPE"].startNode},updateFlowItemConnect:function(e){var t=this;this.$nextTick((function(){t.flowList.forEach((function(e){t.$options.jsPlumb.draggable(e.uuid,{})})),t.$nextTick((function(){t.flowList.forEach((function(e){e.next.forEach((function(n,o){var a=t.getFlow(n);if(t.isTempFlowItem(a)?t.draggableFlowConnect(e.uuid,n,!0):t.addFlowItemConnect(e.uuid,n),t.isIfFlowItem(e.type)){var r=e.nextIfId===a.uuid;t.createFlowItemLabel(e.uuid,n,r?"是":"否")}else if(t.isExpandFlowItem(e.type)){var i=t.getExpandFlowItemName(e,n);t.createFlowItemLabel(e.uuid,n,i)}}))})),t.$nextTick((function(){e&&e()}))}))}))},_getWorkFlowNode:function(e){var t=this;Object(ue["getWorkFlowNode"])(e).then((function(e){t.workFlowNode=e.data,t.flowAllList[0].children=t.workFlowNode.input,t.flowAllList[1].children=t.workFlowNode.flow}))},_updateRules:function(){var e=this,t=this.flowList.map((function(e){return null!==e.linkType&&void 0!==e.linkType&&void 0!==e.data&&null!==e.data&&(e.data.linkType=e.linkType),e}));this.spinningVisible=!0,Object(ue["updateRules"])(this.id,t).then((function(t){e.$message.success("保存成功")})).finally((function(){e.spinningVisible=!1}))},_getThingsLinkage:function(e){var t=this;Object(ue["getThingsLinkage"])(e).then((function(e){t.$_doClear(!1),t.flowList=JSON.parse(e.data.controlUi),t.updateFlowItemConnect()}))}}},ve=(n("7be2"),n("b3f2")),we=n.n(ve);const Oe=we()(ge,[["render",U]]);t["default"]=Oe}});